import{j as F}from"./jsx-runtime.D_zvdyIk.js";import{r as m}from"./index.75N07mRN.js";import{a as T,u as h}from"./use-transform.Bg4wIqv4.js";import{f as M,I as S,J as N,M as A,F as j}from"./MotionConfigContext.DBIp5wb9.js";function y(e,n,i){const o=e.get();let t=null,l=o,r;const u=typeof o=="string"?o.replace(/[\d.-]/g,""):void 0,c=()=>{t&&(t.stop(),t=null)},f=()=>{c(),t=new N({keyframes:[E(e.get()),E(l)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...i,onUpdate:r})};e.attach((a,p)=>(l=a,r=g=>p(x(g,u)),M.postRender(f),e.get()),c);let s;return S(n)&&(s=n.on("change",a=>e.set(x(a,u))),e.on("destroy",s)),s}function x(e,n){return n?e+n:e}function E(e){return typeof e=="number"?e:parseFloat(e)}function D(e,n={}){const{isStatic:i}=m.useContext(A),o=()=>S(e)?e.get():e;if(i)return T(o);const t=h(o());return m.useInsertionEffect(()=>y(t,e,n),[t,JSON.stringify(n)]),t}const J={some:0,all:1};function O(e,n,{root:i,margin:o,amount:t="some"}={}){const l=j(e),r=new WeakMap,u=f=>{f.forEach(s=>{const a=r.get(s.target);if(s.isIntersecting!==!!a)if(s.isIntersecting){const p=n(s.target,s);typeof p=="function"?r.set(s.target,p):c.unobserve(s.target)}else typeof a=="function"&&(a(s),r.delete(s.target))})},c=new IntersectionObserver(u,{root:i,rootMargin:o,threshold:typeof t=="number"?t:J[t]});return l.forEach(f=>c.observe(f)),()=>c.disconnect()}function R(e,{root:n,margin:i,amount:o,once:t=!1,initial:l=!1}={}){const[r,u]=m.useState(l);return m.useEffect(()=>{if(!e.current||t&&r)return;const c=()=>(u(!0),t?void 0:()=>u(!1)),f={root:n&&n.current||void 0,margin:i,amount:o};return O(e.current,c,f)},[n,e,i,t,o]),r}function $({to:e,from:n=0,direction:i="up",delay:o=0,duration:t=2,className:l="",startWhen:r=!0,separator:u="",onStart:c=()=>{},onEnd:f=()=>{}}){const s=m.useRef(null),a=h(i==="down"?e:n),p=20+40*(1/t),g=100*(1/t),b=D(a,{damping:p,stiffness:g}),V=R(s,{once:!0,margin:"0px"});return m.useEffect(()=>{s.current&&(s.current.textContent=String(i==="down"?e:n))},[n,e,i]),m.useEffect(()=>{if(V&&r){typeof c=="function"&&c();const d=setTimeout(()=>{a.set(i==="down"?n:e)},o*1e3),I=setTimeout(()=>{typeof f=="function"&&f()},o*1e3+t*1e3);return()=>{clearTimeout(d),clearTimeout(I)}}},[V,r,a,i,n,e,o,c,f,t]),m.useEffect(()=>{const d=b.on("change",I=>{if(s.current){const C={useGrouping:!!u,minimumFractionDigits:0,maximumFractionDigits:0},w=Intl.NumberFormat("en-US",C).format(I.toFixed(0));s.current.textContent=u?w.replace(/,/g,u):w}});return()=>d()},[b,u]),F.jsx("span",{className:`${l}`,ref:s})}export{$ as default};
