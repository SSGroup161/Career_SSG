import{c as commonjsGlobal,d as getAugmentedNamespace,g as getDefaultExportFromCjs}from"./index.75N07mRN.js";function _mergeNamespaces(k,i){for(var t=0;t<i.length;t++){const n=i[t];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in k)){const g=Object.getOwnPropertyDescriptor(n,o);g&&Object.defineProperty(k,o,g.get?g:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(k,Symbol.toStringTag,{value:"Module"}))}function commonjsRequire(k){throw new Error('Could not dynamically require "'+k+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$2={exports:{}},dommatrix$1={exports:{}};/*!
* DOMMatrix v1.0.3 (https://thednp.github.io/dommatrix/)
* Copyright 2022 Â© thednp
* Licensed under MIT (https://github.com/thednp/DOMMatrix/blob/master/LICENSE)
*/var dommatrix=dommatrix$1.exports,hasRequiredDommatrix;function requireDommatrix(){return hasRequiredDommatrix||(hasRequiredDommatrix=1,function(k,i){(function(t,n){k.exports=n()})(dommatrix,function(){function t(c){var h=new O,d=Array.from(c);if(!d.every(function(G){return!Number.isNaN(G)}))throw TypeError('CSSMatrix: "'+c+'" must only have numbers.');if(d.length===16){var a=d[0],s=d[1],m=d[2],p=d[3],T=d[4],N=d[5],M=d[6],Q=d[7],q=d[8],X=d[9],K=d[10],H=d[11],U=d[12],W=d[13],D=d[14],J=d[15];h.m11=a,h.a=a,h.m21=T,h.c=T,h.m31=q,h.m41=U,h.e=U,h.m12=s,h.b=s,h.m22=N,h.d=N,h.m32=X,h.m42=W,h.f=W,h.m13=m,h.m23=M,h.m33=K,h.m43=D,h.m14=p,h.m24=Q,h.m34=H,h.m44=J}else if(d.length===6){var le=d[0],ve=d[1],Ce=d[2],V=d[3],_=d[4],P=d[5];h.m11=le,h.a=le,h.m12=ve,h.b=ve,h.m21=Ce,h.c=Ce,h.m22=V,h.d=V,h.m41=_,h.e=_,h.m42=P,h.f=P}else throw new TypeError("CSSMatrix: expecting an Array of 6/16 values.");return h}function n(c){var h=Object.keys(new O);if(typeof c=="object"&&h.every(function(d){return d in c}))return t([c.m11,c.m12,c.m13,c.m14,c.m21,c.m22,c.m23,c.m24,c.m31,c.m32,c.m33,c.m34,c.m41,c.m42,c.m43,c.m44]);throw TypeError('CSSMatrix: "'+JSON.stringify(c)+'" is not a DOMMatrix / CSSMatrix / JSON compatible object.')}function o(c){if(typeof c!="string")throw TypeError('CSSMatrix: "'+c+'" is not a string.');var h=String(c).replace(/\s/g,""),d=new O,a='CSSMatrix: invalid transform string "'+c+'"';return h.split(")").filter(function(s){return s}).forEach(function(s){var m=s.split("("),p=m[0],T=m[1];if(!T)throw TypeError(a);var N=T.split(",").map(function(_){return _.includes("rad")?parseFloat(_)*(180/Math.PI):parseFloat(_)}),M=N[0],Q=N[1],q=N[2],X=N[3],K=[M,Q,q],H=[M,Q,q,X];if(p==="perspective"&&M&&[Q,q].every(function(_){return _===void 0}))d.m34=-1/M;else if(p.includes("matrix")&&[6,16].includes(N.length)&&N.every(function(_){return!Number.isNaN(+_)})){var U=N.map(function(_){return Math.abs(_)<1e-6?0:_});d=d.multiply(t(U))}else if(p==="translate3d"&&K.every(function(_){return!Number.isNaN(+_)}))d=d.translate(M,Q,q);else if(p==="translate"&&M&&q===void 0)d=d.translate(M,Q||0,0);else if(p==="rotate3d"&&H.every(function(_){return!Number.isNaN(+_)})&&X)d=d.rotateAxisAngle(M,Q,q,X);else if(p==="rotate"&&M&&[Q,q].every(function(_){return _===void 0}))d=d.rotate(0,0,M);else if(p==="scale3d"&&K.every(function(_){return!Number.isNaN(+_)})&&K.some(function(_){return _!==1}))d=d.scale(M,Q,q);else if(p==="scale"&&!Number.isNaN(M)&&M!==1&&q===void 0){var W=Number.isNaN(+Q),D=W?M:Q;d=d.scale(M,D,1)}else if(p==="skew"&&(M||!Number.isNaN(M)&&Q)&&q===void 0)d=d.skew(M,Q||0);else if(/[XYZ]/.test(p)&&M&&[Q,q].every(function(_){return _===void 0})&&["translate","rotate","scale","skew"].some(function(_){return p.includes(_)}))if(["skewX","skewY"].includes(p))d=d[p](M);else{var J=p.replace(/[XYZ]/,""),le=p.replace(J,""),ve=["X","Y","Z"].indexOf(le),Ce=J==="scale"?1:0,V=[ve===0?M:Ce,ve===1?M:Ce,ve===2?M:Ce];d=d[J].apply(d,V)}else throw TypeError(a)}),d}function g(c,h){return h?[c.a,c.b,c.c,c.d,c.e,c.f]:[c.m11,c.m12,c.m13,c.m14,c.m21,c.m22,c.m23,c.m24,c.m31,c.m32,c.m33,c.m34,c.m41,c.m42,c.m43,c.m44]}function A(c,h,d){var a=new O;return a.m41=c,a.e=c,a.m42=h,a.f=h,a.m43=d,a}function R(c,h,d){var a=new O,s=Math.PI/180,m=c*s,p=h*s,T=d*s,N=Math.cos(m),M=-Math.sin(m),Q=Math.cos(p),q=-Math.sin(p),X=Math.cos(T),K=-Math.sin(T),H=Q*X,U=-Q*K;a.m11=H,a.a=H,a.m12=U,a.b=U,a.m13=q;var W=M*q*X+N*K;a.m21=W,a.c=W;var D=N*X-M*q*K;return a.m22=D,a.d=D,a.m23=-M*Q,a.m31=M*K-N*q*X,a.m32=M*X+N*q*K,a.m33=N*Q,a}function C(c,h,d,a){var s=new O,m=Math.sqrt(c*c+h*h+d*d);if(m===0)return s;var p=c/m,T=h/m,N=d/m,M=a*(Math.PI/360),Q=Math.sin(M),q=Math.cos(M),X=Q*Q,K=p*p,H=T*T,U=N*N,W=1-2*(H+U)*X;s.m11=W,s.a=W;var D=2*(p*T*X+N*Q*q);s.m12=D,s.b=D,s.m13=2*(p*N*X-T*Q*q);var J=2*(T*p*X-N*Q*q);s.m21=J,s.c=J;var le=1-2*(U+K)*X;return s.m22=le,s.d=le,s.m23=2*(T*N*X+p*Q*q),s.m31=2*(N*p*X+T*Q*q),s.m32=2*(N*T*X-p*Q*q),s.m33=1-2*(K+H)*X,s}function y(c,h,d){var a=new O;return a.m11=c,a.a=c,a.m22=h,a.d=h,a.m33=d,a}function v(c,h){var d=new O;if(c){var a=c*Math.PI/180,s=Math.tan(a);d.m21=s,d.c=s}if(h){var m=h*Math.PI/180,p=Math.tan(m);d.m12=p,d.b=p}return d}function I(c){return v(c,0)}function u(c){return v(0,c)}function E(c,h){var d=h.m11*c.m11+h.m12*c.m21+h.m13*c.m31+h.m14*c.m41,a=h.m11*c.m12+h.m12*c.m22+h.m13*c.m32+h.m14*c.m42,s=h.m11*c.m13+h.m12*c.m23+h.m13*c.m33+h.m14*c.m43,m=h.m11*c.m14+h.m12*c.m24+h.m13*c.m34+h.m14*c.m44,p=h.m21*c.m11+h.m22*c.m21+h.m23*c.m31+h.m24*c.m41,T=h.m21*c.m12+h.m22*c.m22+h.m23*c.m32+h.m24*c.m42,N=h.m21*c.m13+h.m22*c.m23+h.m23*c.m33+h.m24*c.m43,M=h.m21*c.m14+h.m22*c.m24+h.m23*c.m34+h.m24*c.m44,Q=h.m31*c.m11+h.m32*c.m21+h.m33*c.m31+h.m34*c.m41,q=h.m31*c.m12+h.m32*c.m22+h.m33*c.m32+h.m34*c.m42,X=h.m31*c.m13+h.m32*c.m23+h.m33*c.m33+h.m34*c.m43,K=h.m31*c.m14+h.m32*c.m24+h.m33*c.m34+h.m34*c.m44,H=h.m41*c.m11+h.m42*c.m21+h.m43*c.m31+h.m44*c.m41,U=h.m41*c.m12+h.m42*c.m22+h.m43*c.m32+h.m44*c.m42,W=h.m41*c.m13+h.m42*c.m23+h.m43*c.m33+h.m44*c.m43,D=h.m41*c.m14+h.m42*c.m24+h.m43*c.m34+h.m44*c.m44;return t([d,a,s,m,p,T,N,M,Q,q,X,K,H,U,W,D])}var O=function(){for(var h=[],d=arguments.length;d--;)h[d]=arguments[d];var a=this;if(a.a=1,a.b=0,a.c=0,a.d=1,a.e=0,a.f=0,a.m11=1,a.m12=0,a.m13=0,a.m14=0,a.m21=0,a.m22=1,a.m23=0,a.m24=0,a.m31=0,a.m32=0,a.m33=1,a.m34=0,a.m41=0,a.m42=0,a.m43=0,a.m44=1,h.length){var s=[16,6].some(function(m){return m===h.length})?h:h[0];return a.setMatrixValue(s)}return a},S={isIdentity:{configurable:!0},is2D:{configurable:!0}};S.isIdentity.get=function(){var c=this;return c.m11===1&&c.m12===0&&c.m13===0&&c.m14===0&&c.m21===0&&c.m22===1&&c.m23===0&&c.m24===0&&c.m31===0&&c.m32===0&&c.m33===1&&c.m34===0&&c.m41===0&&c.m42===0&&c.m43===0&&c.m44===1},S.is2D.get=function(){var c=this;return c.m31===0&&c.m32===0&&c.m33===1&&c.m34===0&&c.m43===0&&c.m44===1},O.prototype.setMatrixValue=function(h){var d=this;return typeof h=="string"&&h.length&&h!=="none"?o(h):[Array,Float64Array,Float32Array].some(function(a){return h instanceof a})?t(h):[O,DOMMatrix,Object].some(function(a){return h instanceof a})?n(h):d},O.prototype.toFloat32Array=function(h){return Float32Array.from(g(this,h))},O.prototype.toFloat64Array=function(h){return Float64Array.from(g(this,h))},O.prototype.toString=function(){var h=this,d=h.is2D,a=h.toFloat64Array(d).join(", "),s=d?"matrix":"matrix3d";return s+"("+a+")"},O.prototype.toJSON=function(){var h=this,d=h.is2D,a=h.isIdentity;return Object.assign({},h,{is2D:d,isIdentity:a})},O.prototype.multiply=function(h){return E(this,h)},O.prototype.translate=function(h,d,a){var s=h,m=d,p=a;return m===void 0&&(m=0),p===void 0&&(p=0),E(this,A(s,m,p))},O.prototype.scale=function(h,d,a){var s=h,m=d,p=a;return m===void 0&&(m=h),p===void 0&&(p=1),E(this,y(s,m,p))},O.prototype.rotate=function(h,d,a){var s=h,m=d||0,p=a||0;return typeof h=="number"&&d===void 0&&a===void 0&&(p=s,s=0,m=0),E(this,R(s,m,p))},O.prototype.rotateAxisAngle=function(h,d,a,s){if([h,d,a,s].some(function(m){return Number.isNaN(+m)}))throw new TypeError("CSSMatrix: expecting 4 values");return E(this,C(h,d,a,s))},O.prototype.skewX=function(h){return E(this,I(h))},O.prototype.skewY=function(h){return E(this,u(h))},O.prototype.skew=function(h,d){return E(this,v(h,d))},O.prototype.transformPoint=function(h){var d=this,a=d.m11*h.x+d.m21*h.y+d.m31*h.z+d.m41*h.w,s=d.m12*h.x+d.m22*h.y+d.m32*h.z+d.m42*h.w,m=d.m13*h.x+d.m23*h.y+d.m33*h.z+d.m43*h.w,p=d.m14*h.x+d.m24*h.y+d.m34*h.z+d.m44*h.w;return h instanceof DOMPoint?new DOMPoint(a,s,m,p):{x:a,y:s,z:m,w:p}},Object.defineProperties(O.prototype,S),Object.assign(O,{Translate:A,Rotate:R,RotateAxisAngle:C,Scale:y,SkewX:I,SkewY:u,Skew:v,Multiply:E,fromArray:t,fromMatrix:n,fromString:o,toArray:g});var x="1.0.3",L=x;return Object.assign(O,{Version:L}),O})}(dommatrix$1)),dommatrix$1.exports}var ponyfill$1={exports:{}};/**
 * @license
 * web-streams-polyfill v3.3.3
 * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
 * This code is released under the MIT license.
 * SPDX-License-Identifier: MIT
 */var ponyfill=ponyfill$1.exports,hasRequiredPonyfill;function requirePonyfill(){return hasRequiredPonyfill||(hasRequiredPonyfill=1,function(k,i){(function(t,n){n(i)})(ponyfill,function(t){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(e){return"Symbol(".concat(e,")")};function o(e,r){var f={label:0,sent:function(){if(te[0]&1)throw te[1];return te[1]},trys:[],ops:[]},j,Y,te,fe;return fe={next:Te(0),throw:Te(1),return:Te(2)},typeof Symbol=="function"&&(fe[Symbol.iterator]=function(){return this}),fe;function Te(Pe){return function(We){return xe([Pe,We])}}function xe(Pe){if(j)throw new TypeError("Generator is already executing.");for(;fe&&(fe=0,Pe[0]&&(f=0)),f;)try{if(j=1,Y&&(te=Pe[0]&2?Y.return:Pe[0]?Y.throw||((te=Y.return)&&te.call(Y),0):Y.next)&&!(te=te.call(Y,Pe[1])).done)return te;switch(Y=0,te&&(Pe=[Pe[0]&2,te.value]),Pe[0]){case 0:case 1:te=Pe;break;case 4:return f.label++,{value:Pe[1],done:!1};case 5:f.label++,Y=Pe[1],Pe=[0];continue;case 7:Pe=f.ops.pop(),f.trys.pop();continue;default:if(te=f.trys,!(te=te.length>0&&te[te.length-1])&&(Pe[0]===6||Pe[0]===2)){f=0;continue}if(Pe[0]===3&&(!te||Pe[1]>te[0]&&Pe[1]<te[3])){f.label=Pe[1];break}if(Pe[0]===6&&f.label<te[1]){f.label=te[1],te=Pe;break}if(te&&f.label<te[2]){f.label=te[2],f.ops.push(Pe);break}te[2]&&f.ops.pop(),f.trys.pop();continue}Pe=r.call(e,f)}catch(We){Pe=[6,We],Y=0}finally{j=te=0}if(Pe[0]&5)throw Pe[1];return{value:Pe[0]?Pe[1]:void 0,done:!0}}}function g(e){var r=typeof Symbol=="function"&&Symbol.iterator,f=r&&e[r],j=0;if(f)return f.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&j>=e.length&&(e=void 0),{value:e&&e[j++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(e){return this instanceof A?(this.v=e,this):new A(e)}function R(e,r,f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var j=f.apply(e,r||[]),Y,te=[];return Y={},fe("next"),fe("throw"),fe("return"),Y[Symbol.asyncIterator]=function(){return this},Y;function fe(He){j[He]&&(Y[He]=function(it){return new Promise(function(dt,pt){te.push([He,it,dt,pt])>1||Te(He,it)})})}function Te(He,it){try{xe(j[He](it))}catch(dt){$e(te[0][3],dt)}}function xe(He){He.value instanceof A?Promise.resolve(He.value.v).then(Pe,We):$e(te[0][2],He)}function Pe(He){Te("next",He)}function We(He){Te("throw",He)}function $e(He,it){He(it),te.shift(),te.length&&Te(te[0][0],te[0][1])}}function C(e){var r,f;return r={},j("next"),j("throw",function(Y){throw Y}),j("return"),r[Symbol.iterator]=function(){return this},r;function j(Y,te){r[Y]=e[Y]?function(fe){return(f=!f)?{value:A(e[Y](fe)),done:!1}:te?te(fe):fe}:te}}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],f;return r?r.call(e):(e=typeof g=="function"?g(e):e[Symbol.iterator](),f={},j("next"),j("throw"),j("return"),f[Symbol.asyncIterator]=function(){return this},f);function j(te){f[te]=e[te]&&function(fe){return new Promise(function(Te,xe){fe=e[te](fe),Y(Te,xe,fe.done,fe.value)})}}function Y(te,fe,Te,xe){Promise.resolve(xe).then(function(Pe){te({value:Pe,done:Te})},fe)}}typeof SuppressedError=="function"&&SuppressedError;function v(){}function I(e){return typeof e=="object"&&e!==null||typeof e=="function"}var u=v;function E(e,r){try{Object.defineProperty(e,"name",{value:r,configurable:!0})}catch{}}var O=Promise,S=Promise.prototype.then,x=Promise.reject.bind(O);function L(e){return new O(e)}function c(e){return L(function(r){return r(e)})}function h(e){return x(e)}function d(e,r,f){return S.call(e,r,f)}function a(e,r,f){d(d(e,r,f),void 0,u)}function s(e,r){a(e,r)}function m(e,r){a(e,void 0,r)}function p(e,r,f){return d(e,r,f)}function T(e){d(e,void 0,u)}var N=function(e){if(typeof queueMicrotask=="function")N=queueMicrotask;else{var r=c(void 0);N=function(f){return d(r,f)}}return N(e)};function M(e,r,f){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,r,f)}function Q(e,r,f){try{return c(M(e,r,f))}catch(j){return h(j)}}var q=16384,X=function(){function e(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.push=function(r){var f=this._back,j=f;f._elements.length===q-1&&(j={_elements:[],_next:void 0}),f._elements.push(r),j!==f&&(this._back=j,f._next=j),++this._size},e.prototype.shift=function(){var r=this._front,f=r,j=this._cursor,Y=j+1,te=r._elements,fe=te[j];return Y===q&&(f=r._next,Y=0),--this._size,this._cursor=Y,r!==f&&(this._front=f),te[j]=void 0,fe},e.prototype.forEach=function(r){for(var f=this._cursor,j=this._front,Y=j._elements;(f!==Y.length||j._next!==void 0)&&!(f===Y.length&&(j=j._next,Y=j._elements,f=0,Y.length===0));)r(Y[f]),++f},e.prototype.peek=function(){var r=this._front,f=this._cursor;return r._elements[f]},e}(),K=n("[[AbortSteps]]"),H=n("[[ErrorSteps]]"),U=n("[[CancelSteps]]"),W=n("[[PullSteps]]"),D=n("[[ReleaseSteps]]");function J(e,r){e._ownerReadableStream=r,r._reader=e,r._state==="readable"?V(e):r._state==="closed"?P(e):_(e,r._storedError)}function le(e,r){var f=e._ownerReadableStream;return vt(f,r)}function ve(e){var r=e._ownerReadableStream;r._state==="readable"?G(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):z(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),r._readableStreamController[D](),r._reader=void 0,e._ownerReadableStream=void 0}function Ce(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function V(e){e._closedPromise=L(function(r,f){e._closedPromise_resolve=r,e._closedPromise_reject=f})}function _(e,r){V(e),G(e,r)}function P(e){V(e),l(e)}function G(e,r){e._closedPromise_reject!==void 0&&(T(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function z(e,r){_(e,r)}function l(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}var b=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},w=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function F(e){return typeof e=="object"||typeof e=="function"}function B(e,r){if(e!==void 0&&!F(e))throw new TypeError("".concat(r," is not an object."))}function $(e,r){if(typeof e!="function")throw new TypeError("".concat(r," is not a function."))}function Z(e){return typeof e=="object"&&e!==null||typeof e=="function"}function re(e,r){if(!Z(e))throw new TypeError("".concat(r," is not an object."))}function ie(e,r,f){if(e===void 0)throw new TypeError("Parameter ".concat(r," is required in '").concat(f,"'."))}function ce(e,r,f){if(e===void 0)throw new TypeError("".concat(r," is required in '").concat(f,"'."))}function oe(e){return Number(e)}function ue(e){return e===0?0:e}function me(e){return ue(w(e))}function ye(e,r){var f=0,j=Number.MAX_SAFE_INTEGER,Y=Number(e);if(Y=ue(Y),!b(Y))throw new TypeError("".concat(r," is not a finite number"));if(Y=me(Y),Y<f||Y>j)throw new TypeError("".concat(r," is outside the accepted range of ").concat(f," to ").concat(j,", inclusive"));return!b(Y)||Y===0?0:Y}function _e(e,r){if(!kt(e))throw new TypeError("".concat(r," is not a ReadableStream."))}function Ee(e){return new Fe(e)}function Me(e,r){e._reader._readRequests.push(r)}function Ae(e,r,f){var j=e._reader,Y=j._readRequests.shift();f?Y._closeSteps():Y._chunkSteps(r)}function Ve(e){return e._reader._readRequests.length}function Ke(e){var r=e._reader;return!(r===void 0||!we(r))}var Fe=function(){function e(r){if(ie(r,1,"ReadableStreamDefaultReader"),_e(r,"First parameter"),xt(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");J(this,r),this._readRequests=new X}return Object.defineProperty(e.prototype,"closed",{get:function(){return we(this)?this._closedPromise:h(Ye("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(r){return r===void 0&&(r=void 0),we(this)?this._ownerReadableStream===void 0?h(Ce("cancel")):le(this,r):h(Ye("cancel"))},e.prototype.read=function(){if(!we(this))return h(Ye("read"));if(this._ownerReadableStream===void 0)return h(Ce("read from"));var r,f,j=L(function(te,fe){r=te,f=fe}),Y={_chunkSteps:function(te){return r({value:te,done:!1})},_closeSteps:function(){return r({value:void 0,done:!0})},_errorSteps:function(te){return f(te)}};return ae(this,Y),j},e.prototype.releaseLock=function(){if(!we(this))throw Ye("releaseLock");this._ownerReadableStream!==void 0&&be(this)},e}();Object.defineProperties(Fe.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),E(Fe.prototype.cancel,"cancel"),E(Fe.prototype.read,"read"),E(Fe.prototype.releaseLock,"releaseLock"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Fe.prototype,n.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function we(e){return!I(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Fe}function ae(e,r){var f=e._ownerReadableStream;f._disturbed=!0,f._state==="closed"?r._closeSteps():f._state==="errored"?r._errorSteps(f._storedError):f._readableStreamController[W](r)}function be(e){ve(e);var r=new TypeError("Reader was released");De(e,r)}function De(e,r){var f=e._readRequests;e._readRequests=new X,f.forEach(function(j){j._errorSteps(r)})}function Ye(e){return new TypeError("ReadableStreamDefaultReader.prototype.".concat(e," can only be used on a ReadableStreamDefaultReader"))}var ge,Re,Le;function de(e){return e.slice()}function ee(e,r,f,j,Y){new Uint8Array(e).set(new Uint8Array(f,j,Y),r)}var ne=function(e){return typeof e.transfer=="function"?ne=function(r){return r.transfer()}:typeof structuredClone=="function"?ne=function(r){return structuredClone(r,{transfer:[r]})}:ne=function(r){return r},ne(e)},pe=function(e){return typeof e.detached=="boolean"?pe=function(r){return r.detached}:pe=function(r){return r.byteLength===0},pe(e)};function Oe(e,r,f){if(e.slice)return e.slice(r,f);var j=f-r,Y=new ArrayBuffer(j);return ee(Y,0,e,r,j),Y}function Ne(e,r){var f=e[r];if(f!=null){if(typeof f!="function")throw new TypeError("".concat(String(r)," is not a function"));return f}}function he(e){var r,f=(r={},r[n.iterator]=function(){return e.iterator},r),j=function(){return R(this,arguments,function(){return o(this,function(te){switch(te.label){case 0:return[5,g(C(y(f)))];case 1:return[4,A.apply(void 0,[te.sent()])];case 2:return[4,A.apply(void 0,[te.sent()])];case 3:return[2,te.sent()]}})})}(),Y=j.next;return{iterator:j,nextMethod:Y,done:!1}}var se=(Le=(ge=n.asyncIterator)!==null&&ge!==void 0?ge:(Re=n.for)===null||Re===void 0?void 0:Re.call(n,"Symbol.asyncIterator"))!==null&&Le!==void 0?Le:"@@asyncIterator";function Se(e,r,f){if(r===void 0&&(r="sync"),f===void 0)if(r==="async"){if(f=Ne(e,se),f===void 0){var j=Ne(e,n.iterator),Y=Se(e,"sync",j);return he(Y)}}else f=Ne(e,n.iterator);if(f===void 0)throw new TypeError("The object is not iterable");var te=M(f,e,[]);if(!I(te))throw new TypeError("The iterator method must return an object");var fe=te.next;return{iterator:te,nextMethod:fe,done:!1}}function ke(e){var r=M(e.nextMethod,e.iterator,[]);if(!I(r))throw new TypeError("The iterator.next() method must return an object");return r}function Be(e){return!!e.done}function Ge(e){return e.value}var Ue,ze=(Ue={},Ue[se]=function(){return this},Ue);Object.defineProperty(ze,se,{enumerable:!1});var Ie=function(){function e(r,f){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=r,this._preventCancel=f}return e.prototype.next=function(){var r=this,f=function(){return r._nextSteps()};return this._ongoingPromise=this._ongoingPromise?p(this._ongoingPromise,f,f):f(),this._ongoingPromise},e.prototype.return=function(r){var f=this,j=function(){return f._returnSteps(r)};return this._ongoingPromise?p(this._ongoingPromise,j,j):j()},e.prototype._nextSteps=function(){var r=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var f=this._reader,j,Y,te=L(function(Te,xe){j=Te,Y=xe}),fe={_chunkSteps:function(Te){r._ongoingPromise=void 0,N(function(){return j({value:Te,done:!1})})},_closeSteps:function(){r._ongoingPromise=void 0,r._isFinished=!0,ve(f),j({value:void 0,done:!0})},_errorSteps:function(Te){r._ongoingPromise=void 0,r._isFinished=!0,ve(f),Y(Te)}};return ae(f,fe),te},e.prototype._returnSteps=function(r){if(this._isFinished)return Promise.resolve({value:r,done:!0});this._isFinished=!0;var f=this._reader;if(!this._preventCancel){var j=le(f,r);return ve(f),p(j,function(){return{value:r,done:!0}})}return ve(f),c({value:r,done:!0})},e}(),qe={next:function(){return Xe(this)?this._asyncIteratorImpl.next():h(Je("next"))},return:function(e){return Xe(this)?this._asyncIteratorImpl.return(e):h(Je("return"))}};Object.setPrototypeOf(qe,ze);function nt(e,r){var f=Ee(e),j=new Ie(f,r),Y=Object.create(qe);return Y._asyncIteratorImpl=j,Y}function Xe(e){if(!I(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Ie}catch{return!1}}function Je(e){return new TypeError("ReadableStreamAsyncIterator.".concat(e," can only be used on a ReadableSteamAsyncIterator"))}var at=Number.isNaN||function(e){return e!==e};function Ze(e){return!(typeof e!="number"||at(e)||e<0)}function st(e){var r=Oe(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(r)}function et(e){var r=e._queue.shift();return e._queueTotalSize-=r.size,e._queueTotalSize<0&&(e._queueTotalSize=0),r.value}function mt(e,r,f){if(!Ze(f)||f===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:r,size:f}),e._queueTotalSize+=f}function Tt(e){var r=e._queue.peek();return r.value}function ct(e){e._queue=new X,e._queueTotalSize=0}function Mt(e){return e===DataView}function Gt(e){return Mt(e.constructor)}function It(e){return Mt(e)?1:e.BYTES_PER_ELEMENT}var ut=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"view",{get:function(){if(!Fr(this))throw Lr("view");return this._view},enumerable:!1,configurable:!0}),e.prototype.respond=function(r){if(!Fr(this))throw Lr("respond");if(ie(r,1,"respond"),r=ye(r,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(pe(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");cr(this._associatedReadableByteStreamController,r)},e.prototype.respondWithNewView=function(r){if(!Fr(this))throw Lr("respondWithNewView");if(ie(r,1,"respondWithNewView"),!ArrayBuffer.isView(r))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(pe(r.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");ur(this._associatedReadableByteStreamController,r)},e}();Object.defineProperties(ut.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),E(ut.prototype.respond,"respond"),E(ut.prototype.respondWithNewView,"respondWithNewView"),typeof n.toStringTag=="symbol"&&Object.defineProperty(ut.prototype,n.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var _t=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"byobRequest",{get:function(){if(!Dt(this))throw Jt("byobRequest");return Dr(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Dt(this))throw Jt("desiredSize");return dn(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!Dt(this))throw Jt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var r=this._controlledReadableByteStream._state;if(r!=="readable")throw new TypeError("The stream (in ".concat(r," state) is not in the readable state and cannot be closed"));Qt(this)},e.prototype.enqueue=function(r){if(!Dt(this))throw Jt("enqueue");if(ie(r,1,"enqueue"),!ArrayBuffer.isView(r))throw new TypeError("chunk must be an array buffer view");if(r.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(r.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var f=this._controlledReadableByteStream._state;if(f!=="readable")throw new TypeError("The stream (in ".concat(f," state) is not in the readable state and cannot be enqueued to"));lr(this,r)},e.prototype.error=function(r){if(r===void 0&&(r=void 0),!Dt(this))throw Jt("error");ft(this,r)},e.prototype[U]=function(r){tn(this),ct(this);var f=this._cancelAlgorithm(r);return or(this),f},e.prototype[W]=function(r){var f=this._controlledReadableByteStream;if(this._queueTotalSize>0){un(this,r);return}var j=this._autoAllocateChunkSize;if(j!==void 0){var Y=void 0;try{Y=new ArrayBuffer(j)}catch(fe){r._errorSteps(fe);return}var te={buffer:Y,bufferByteLength:j,byteOffset:0,byteLength:j,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(te)}Me(f,r),Lt(this)},e.prototype[D]=function(){if(this._pendingPullIntos.length>0){var r=this._pendingPullIntos.peek();r.readerType="none",this._pendingPullIntos=new X,this._pendingPullIntos.push(r)}},e}();Object.defineProperties(_t.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),E(_t.prototype.close,"close"),E(_t.prototype.enqueue,"enqueue"),E(_t.prototype.error,"error"),typeof n.toStringTag=="symbol"&&Object.defineProperty(_t.prototype,n.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Dt(e){return!I(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof _t}function Fr(e){return!I(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof ut}function Lt(e){var r=na(e);if(r){if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;var f=e._pullAlgorithm();a(f,function(){return e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Lt(e)),null},function(j){return ft(e,j),null})}}function tn(e){Mr(e),e._pendingPullIntos=new X}function Or(e,r){var f=!1;e._state==="closed"&&(f=!0);var j=rn(r);r.readerType==="default"?Ae(e,j,f):ca(e,j,f)}function rn(e){var r=e.bytesFilled,f=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,r/f)}function sr(e,r,f,j){e._queue.push({buffer:r,byteOffset:f,byteLength:j}),e._queueTotalSize+=j}function nn(e,r,f,j){var Y;try{Y=Oe(r,f,f+j)}catch(te){throw ft(e,te),te}sr(e,Y,0,j)}function an(e,r){r.bytesFilled>0&&nn(e,r.buffer,r.byteOffset,r.bytesFilled),zt(e)}function sn(e,r){var f=Math.min(e._queueTotalSize,r.byteLength-r.bytesFilled),j=r.bytesFilled+f,Y=f,te=!1,fe=j%r.elementSize,Te=j-fe;Te>=r.minimumFill&&(Y=Te-r.bytesFilled,te=!0);for(var xe=e._queue;Y>0;){var Pe=xe.peek(),We=Math.min(Y,Pe.byteLength),$e=r.byteOffset+r.bytesFilled;ee(r.buffer,$e,Pe.buffer,Pe.byteOffset,We),Pe.byteLength===We?xe.shift():(Pe.byteOffset+=We,Pe.byteLength-=We),e._queueTotalSize-=We,on(e,We,r),Y-=We}return te}function on(e,r,f){f.bytesFilled+=r}function ln(e){e._queueTotalSize===0&&e._closeRequested?(or(e),ar(e._controlledReadableByteStream)):Lt(e)}function Mr(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Ir(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;var r=e._pendingPullIntos.peek();sn(e,r)&&(zt(e),Or(e._controlledReadableByteStream,r))}}function Zn(e){for(var r=e._controlledReadableByteStream._reader;r._readRequests.length>0;){if(e._queueTotalSize===0)return;var f=r._readRequests.shift();un(e,f)}}function ea(e,r,f,j){var Y=e._controlledReadableByteStream,te=r.constructor,fe=It(te),Te=r.byteOffset,xe=r.byteLength,Pe=f*fe,We;try{We=ne(r.buffer)}catch(pt){j._errorSteps(pt);return}var $e={buffer:We,bufferByteLength:We.byteLength,byteOffset:Te,byteLength:xe,bytesFilled:0,minimumFill:Pe,elementSize:fe,viewConstructor:te,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push($e),pn(Y,j);return}if(Y._state==="closed"){var He=new te($e.buffer,$e.byteOffset,0);j._closeSteps(He);return}if(e._queueTotalSize>0){if(sn(e,$e)){var it=rn($e);ln(e),j._chunkSteps(it);return}if(e._closeRequested){var dt=new TypeError("Insufficient bytes to fill elements in the given buffer");ft(e,dt),j._errorSteps(dt);return}}e._pendingPullIntos.push($e),pn(Y,j),Lt(e)}function ta(e,r){r.readerType==="none"&&zt(e);var f=e._controlledReadableByteStream;if(Nr(f))for(;mn(f)>0;){var j=zt(e);Or(f,j)}}function ra(e,r,f){if(on(e,r,f),f.readerType==="none"){an(e,f),Ir(e);return}if(!(f.bytesFilled<f.minimumFill)){zt(e);var j=f.bytesFilled%f.elementSize;if(j>0){var Y=f.byteOffset+f.bytesFilled;nn(e,f.buffer,Y-j,j)}f.bytesFilled-=j,Or(e._controlledReadableByteStream,f),Ir(e)}}function cn(e,r){var f=e._pendingPullIntos.peek();Mr(e);var j=e._controlledReadableByteStream._state;j==="closed"?ta(e,f):ra(e,r,f),Lt(e)}function zt(e){var r=e._pendingPullIntos.shift();return r}function na(e){var r=e._controlledReadableByteStream;if(r._state!=="readable"||e._closeRequested||!e._started)return!1;if(Ke(r)&&Ve(r)>0||Nr(r)&&mn(r)>0)return!0;var f=dn(e);return f>0}function or(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Qt(e){var r=e._controlledReadableByteStream;if(!(e._closeRequested||r._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0){var f=e._pendingPullIntos.peek();if(f.bytesFilled%f.elementSize!==0){var j=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ft(e,j),j}}or(e),ar(r)}}function lr(e,r){var f=e._controlledReadableByteStream;if(!(e._closeRequested||f._state!=="readable")){var j=r.buffer,Y=r.byteOffset,te=r.byteLength;if(pe(j))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");var fe=ne(j);if(e._pendingPullIntos.length>0){var Te=e._pendingPullIntos.peek();if(pe(Te.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");Mr(e),Te.buffer=ne(Te.buffer),Te.readerType==="none"&&an(e,Te)}if(Ke(f))if(Zn(e),Ve(f)===0)sr(e,fe,Y,te);else{e._pendingPullIntos.length>0&&zt(e);var xe=new Uint8Array(fe,Y,te);Ae(f,xe,!1)}else Nr(f)?(sr(e,fe,Y,te),Ir(e)):sr(e,fe,Y,te);Lt(e)}}function ft(e,r){var f=e._controlledReadableByteStream;f._state==="readable"&&(tn(e),ct(e),or(e),Wn(f,r))}function un(e,r){var f=e._queue.shift();e._queueTotalSize-=f.byteLength,ln(e);var j=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);r._chunkSteps(j)}function Dr(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){var r=e._pendingPullIntos.peek(),f=new Uint8Array(r.buffer,r.byteOffset+r.bytesFilled,r.byteLength-r.bytesFilled),j=Object.create(ut.prototype);ia(j,e,f),e._byobRequest=j}return e._byobRequest}function dn(e){var r=e._controlledReadableByteStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function cr(e,r){var f=e._pendingPullIntos.peek(),j=e._controlledReadableByteStream._state;if(j==="closed"){if(r!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(r===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(f.bytesFilled+r>f.byteLength)throw new RangeError("bytesWritten out of range")}f.buffer=ne(f.buffer),cn(e,r)}function ur(e,r){var f=e._pendingPullIntos.peek(),j=e._controlledReadableByteStream._state;if(j==="closed"){if(r.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(r.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(f.byteOffset+f.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(f.bufferByteLength!==r.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(f.bytesFilled+r.byteLength>f.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var Y=r.byteLength;f.buffer=ne(r.buffer),cn(e,Y)}function hn(e,r,f,j,Y,te,fe){r._controlledReadableByteStream=e,r._pullAgain=!1,r._pulling=!1,r._byobRequest=null,r._queue=r._queueTotalSize=void 0,ct(r),r._closeRequested=!1,r._started=!1,r._strategyHWM=te,r._pullAlgorithm=j,r._cancelAlgorithm=Y,r._autoAllocateChunkSize=fe,r._pendingPullIntos=new X,e._readableStreamController=r;var Te=f();a(c(Te),function(){return r._started=!0,Lt(r),null},function(xe){return ft(r,xe),null})}function aa(e,r,f){var j=Object.create(_t.prototype),Y,te,fe;r.start!==void 0?Y=function(){return r.start(j)}:Y=function(){},r.pull!==void 0?te=function(){return r.pull(j)}:te=function(){return c(void 0)},r.cancel!==void 0?fe=function(xe){return r.cancel(xe)}:fe=function(){return c(void 0)};var Te=r.autoAllocateChunkSize;if(Te===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");hn(e,j,Y,te,fe,f,Te)}function ia(e,r,f){e._associatedReadableByteStreamController=r,e._view=f}function Lr(e){return new TypeError("ReadableStreamBYOBRequest.prototype.".concat(e," can only be used on a ReadableStreamBYOBRequest"))}function Jt(e){return new TypeError("ReadableByteStreamController.prototype.".concat(e," can only be used on a ReadableByteStreamController"))}function sa(e,r){B(e,r);var f=e?.mode;return{mode:f===void 0?void 0:oa(f,"".concat(r," has member 'mode' that"))}}function oa(e,r){if(e="".concat(e),e!=="byob")throw new TypeError("".concat(r," '").concat(e,"' is not a valid enumeration value for ReadableStreamReaderMode"));return e}function la(e,r){var f;B(e,r);var j=(f=e?.min)!==null&&f!==void 0?f:1;return{min:ye(j,"".concat(r," has member 'min' that"))}}function fn(e){return new Ct(e)}function pn(e,r){e._reader._readIntoRequests.push(r)}function ca(e,r,f){var j=e._reader,Y=j._readIntoRequests.shift();f?Y._closeSteps(r):Y._chunkSteps(r)}function mn(e){return e._reader._readIntoRequests.length}function Nr(e){var r=e._reader;return!(r===void 0||!Nt(r))}var Ct=function(){function e(r){if(ie(r,1,"ReadableStreamBYOBReader"),_e(r,"First parameter"),xt(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Dt(r._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");J(this,r),this._readIntoRequests=new X}return Object.defineProperty(e.prototype,"closed",{get:function(){return Nt(this)?this._closedPromise:h(dr("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(r){return r===void 0&&(r=void 0),Nt(this)?this._ownerReadableStream===void 0?h(Ce("cancel")):le(this,r):h(dr("cancel"))},e.prototype.read=function(r,f){if(f===void 0&&(f={}),!Nt(this))return h(dr("read"));if(!ArrayBuffer.isView(r))return h(new TypeError("view must be an array buffer view"));if(r.byteLength===0)return h(new TypeError("view must have non-zero byteLength"));if(r.buffer.byteLength===0)return h(new TypeError("view's buffer must have non-zero byteLength"));if(pe(r.buffer))return h(new TypeError("view's buffer has been detached"));var j;try{j=la(f,"options")}catch(Pe){return h(Pe)}var Y=j.min;if(Y===0)return h(new TypeError("options.min must be greater than 0"));if(Gt(r)){if(Y>r.byteLength)return h(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(Y>r.length)return h(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return h(Ce("read from"));var te,fe,Te=L(function(Pe,We){te=Pe,fe=We}),xe={_chunkSteps:function(Pe){return te({value:Pe,done:!1})},_closeSteps:function(Pe){return te({value:Pe,done:!0})},_errorSteps:function(Pe){return fe(Pe)}};return gn(this,r,Y,xe),Te},e.prototype.releaseLock=function(){if(!Nt(this))throw dr("releaseLock");this._ownerReadableStream!==void 0&&ua(this)},e}();Object.defineProperties(Ct.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),E(Ct.prototype.cancel,"cancel"),E(Ct.prototype.read,"read"),E(Ct.prototype.releaseLock,"releaseLock"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Ct.prototype,n.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function Nt(e){return!I(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Ct}function gn(e,r,f,j){var Y=e._ownerReadableStream;Y._disturbed=!0,Y._state==="errored"?j._errorSteps(Y._storedError):ea(Y._readableStreamController,r,f,j)}function ua(e){ve(e);var r=new TypeError("Reader was released");vn(e,r)}function vn(e,r){var f=e._readIntoRequests;e._readIntoRequests=new X,f.forEach(function(j){j._errorSteps(r)})}function dr(e){return new TypeError("ReadableStreamBYOBReader.prototype.".concat(e," can only be used on a ReadableStreamBYOBReader"))}function Zt(e,r){var f=e.highWaterMark;if(f===void 0)return r;if(at(f)||f<0)throw new RangeError("Invalid highWaterMark");return f}function hr(e){var r=e.size;return r||function(){return 1}}function fr(e,r){B(e,r);var f=e?.highWaterMark,j=e?.size;return{highWaterMark:f===void 0?void 0:oe(f),size:j===void 0?void 0:da(j,"".concat(r," has member 'size' that"))}}function da(e,r){return $(e,r),function(f){return oe(e(f))}}function ha(e,r){B(e,r);var f=e?.abort,j=e?.close,Y=e?.start,te=e?.type,fe=e?.write;return{abort:f===void 0?void 0:fa(f,e,"".concat(r," has member 'abort' that")),close:j===void 0?void 0:pa(j,e,"".concat(r," has member 'close' that")),start:Y===void 0?void 0:ma(Y,e,"".concat(r," has member 'start' that")),write:fe===void 0?void 0:ga(fe,e,"".concat(r," has member 'write' that")),type:te}}function fa(e,r,f){return $(e,f),function(j){return Q(e,r,[j])}}function pa(e,r,f){return $(e,f),function(){return Q(e,r,[])}}function ma(e,r,f){return $(e,f),function(j){return M(e,r,[j])}}function ga(e,r,f){return $(e,f),function(j,Y){return Q(e,r,[j,Y])}}function bn(e,r){if(!$t(e))throw new TypeError("".concat(r," is not a WritableStream."))}function va(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}var ba=typeof AbortController=="function";function ya(){if(ba)return new AbortController}var Rt=function(){function e(r,f){r===void 0&&(r={}),f===void 0&&(f={}),r===void 0?r=null:re(r,"First parameter");var j=fr(f,"Second parameter"),Y=ha(r,"First parameter");Sn(this);var te=Y.type;if(te!==void 0)throw new RangeError("Invalid type is specified");var fe=hr(j),Te=Zt(j,1);Ma(this,Y,Te,fe)}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!$t(this))throw br("locked");return Ht(this)},enumerable:!1,configurable:!0}),e.prototype.abort=function(r){return r===void 0&&(r=void 0),$t(this)?Ht(this)?h(new TypeError("Cannot abort a stream that already has a writer")):pr(this,r):h(br("abort"))},e.prototype.close=function(){return $t(this)?Ht(this)?h(new TypeError("Cannot close a stream that already has a writer")):bt(this)?h(new TypeError("Cannot close an already-closing stream")):An(this):h(br("close"))},e.prototype.getWriter=function(){if(!$t(this))throw br("getWriter");return yn(this)},e}();Object.defineProperties(Rt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),E(Rt.prototype.abort,"abort"),E(Rt.prototype.close,"close"),E(Rt.prototype.getWriter,"getWriter"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Rt.prototype,n.toStringTag,{value:"WritableStream",configurable:!0});function yn(e){return new wt(e)}function Sa(e,r,f,j,Y,te){Y===void 0&&(Y=1),te===void 0&&(te=function(){return 1});var fe=Object.create(Rt.prototype);Sn(fe);var Te=Object.create(Vt.prototype);return Cn(fe,Te,e,r,f,j,Y,te),fe}function Sn(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new X,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function $t(e){return!I(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Rt}function Ht(e){return e._writer!==void 0}function pr(e,r){var f;if(e._state==="closed"||e._state==="errored")return c(void 0);e._writableStreamController._abortReason=r,(f=e._writableStreamController._abortController)===null||f===void 0||f.abort(r);var j=e._state;if(j==="closed"||j==="errored")return c(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;var Y=!1;j==="erroring"&&(Y=!0,r=void 0);var te=L(function(fe,Te){e._pendingAbortRequest={_promise:void 0,_resolve:fe,_reject:Te,_reason:r,_wasAlreadyErroring:Y}});return e._pendingAbortRequest._promise=te,Y||Wr(e,r),te}function An(e){var r=e._state;if(r==="closed"||r==="errored")return h(new TypeError("The stream (in ".concat(r," state) is not in the writable state and cannot be closed")));var f=L(function(Y,te){var fe={_resolve:Y,_reject:te};e._closeRequest=fe}),j=e._writer;return j!==void 0&&e._backpressure&&r==="writable"&&Xr(j),Ia(e._writableStreamController),f}function Aa(e){var r=L(function(f,j){var Y={_resolve:f,_reject:j};e._writeRequests.push(Y)});return r}function Br(e,r){var f=e._state;if(f==="writable"){Wr(e,r);return}Ur(e)}function Wr(e,r){var f=e._writableStreamController;e._state="erroring",e._storedError=r;var j=e._writer;j!==void 0&&wn(j,r),!Ta(e)&&f._started&&Ur(e)}function Ur(e){e._state="errored",e._writableStreamController[H]();var r=e._storedError;if(e._writeRequests.forEach(function(Y){Y._reject(r)}),e._writeRequests=new X,e._pendingAbortRequest===void 0){mr(e);return}var f=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,f._wasAlreadyErroring){f._reject(r),mr(e);return}var j=e._writableStreamController[K](f._reason);a(j,function(){return f._resolve(),mr(e),null},function(Y){return f._reject(Y),mr(e),null})}function _a(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function wa(e,r){e._inFlightWriteRequest._reject(r),e._inFlightWriteRequest=void 0,Br(e,r)}function Ea(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0;var r=e._state;r==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var f=e._writer;f!==void 0&&Fn(f)}function Pa(e,r){e._inFlightCloseRequest._reject(r),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(r),e._pendingAbortRequest=void 0),Br(e,r)}function bt(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ta(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ca(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Ra(e){e._inFlightWriteRequest=e._writeRequests.shift()}function mr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var r=e._writer;r!==void 0&&Hr(r,e._storedError)}function jr(e,r){var f=e._writer;f!==void 0&&r!==e._backpressure&&(r?ja(f):Xr(f)),e._backpressure=r}var wt=function(){function e(r){if(ie(r,1,"WritableStreamDefaultWriter"),bn(r,"First parameter"),Ht(r))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=r,r._writer=this;var f=r._state;if(f==="writable")!bt(r)&&r._backpressure?Sr(this):On(this),yr(this);else if(f==="erroring")Vr(this,r._storedError),yr(this);else if(f==="closed")On(this),Wa(this);else{var j=r._storedError;Vr(this,j),xn(this,j)}}return Object.defineProperty(e.prototype,"closed",{get:function(){return Bt(this)?this._closedPromise:h(Wt("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Bt(this))throw Wt("desiredSize");if(this._ownerWritableStream===void 0)throw tr("desiredSize");return Oa(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return Bt(this)?this._readyPromise:h(Wt("ready"))},enumerable:!1,configurable:!0}),e.prototype.abort=function(r){return r===void 0&&(r=void 0),Bt(this)?this._ownerWritableStream===void 0?h(tr("abort")):ka(this,r):h(Wt("abort"))},e.prototype.close=function(){if(!Bt(this))return h(Wt("close"));var r=this._ownerWritableStream;return r===void 0?h(tr("close")):bt(r)?h(new TypeError("Cannot close an already-closing stream")):_n(this)},e.prototype.releaseLock=function(){if(!Bt(this))throw Wt("releaseLock");var r=this._ownerWritableStream;r!==void 0&&En(this)},e.prototype.write=function(r){return r===void 0&&(r=void 0),Bt(this)?this._ownerWritableStream===void 0?h(tr("write to")):Pn(this,r):h(Wt("write"))},e}();Object.defineProperties(wt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),E(wt.prototype.abort,"abort"),E(wt.prototype.close,"close"),E(wt.prototype.releaseLock,"releaseLock"),E(wt.prototype.write,"write"),typeof n.toStringTag=="symbol"&&Object.defineProperty(wt.prototype,n.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Bt(e){return!I(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof wt}function ka(e,r){var f=e._ownerWritableStream;return pr(f,r)}function _n(e){var r=e._ownerWritableStream;return An(r)}function xa(e){var r=e._ownerWritableStream,f=r._state;return bt(r)||f==="closed"?c(void 0):f==="errored"?h(r._storedError):_n(e)}function Fa(e,r){e._closedPromiseState==="pending"?Hr(e,r):Ua(e,r)}function wn(e,r){e._readyPromiseState==="pending"?Mn(e,r):Ga(e,r)}function Oa(e){var r=e._ownerWritableStream,f=r._state;return f==="errored"||f==="erroring"?null:f==="closed"?0:Rn(r._writableStreamController)}function En(e){var r=e._ownerWritableStream,f=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");wn(e,f),Fa(e,f),r._writer=void 0,e._ownerWritableStream=void 0}function Pn(e,r){var f=e._ownerWritableStream,j=f._writableStreamController,Y=Da(j,r);if(f!==e._ownerWritableStream)return h(tr("write to"));var te=f._state;if(te==="errored")return h(f._storedError);if(bt(f)||te==="closed")return h(new TypeError("The stream is closing or closed and cannot be written to"));if(te==="erroring")return h(f._storedError);var fe=Aa(f);return La(j,r,Y),fe}var Tn={},Vt=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"abortReason",{get:function(){if(!Gr(this))throw $r("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signal",{get:function(){if(!Gr(this))throw $r("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),e.prototype.error=function(r){if(r===void 0&&(r=void 0),!Gr(this))throw $r("error");var f=this._controlledWritableStream._state;f==="writable"&&kn(this,r)},e.prototype[K]=function(r){var f=this._abortAlgorithm(r);return gr(this),f},e.prototype[H]=function(){ct(this)},e}();Object.defineProperties(Vt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Vt.prototype,n.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Gr(e){return!I(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Vt}function Cn(e,r,f,j,Y,te,fe,Te){r._controlledWritableStream=e,e._writableStreamController=r,r._queue=void 0,r._queueTotalSize=void 0,ct(r),r._abortReason=void 0,r._abortController=ya(),r._started=!1,r._strategySizeAlgorithm=Te,r._strategyHWM=fe,r._writeAlgorithm=j,r._closeAlgorithm=Y,r._abortAlgorithm=te;var xe=zr(r);jr(e,xe);var Pe=f(),We=c(Pe);a(We,function(){return r._started=!0,vr(r),null},function($e){return r._started=!0,Br(e,$e),null})}function Ma(e,r,f,j){var Y=Object.create(Vt.prototype),te,fe,Te,xe;r.start!==void 0?te=function(){return r.start(Y)}:te=function(){},r.write!==void 0?fe=function(Pe){return r.write(Pe,Y)}:fe=function(){return c(void 0)},r.close!==void 0?Te=function(){return r.close()}:Te=function(){return c(void 0)},r.abort!==void 0?xe=function(Pe){return r.abort(Pe)}:xe=function(){return c(void 0)},Cn(e,Y,te,fe,Te,xe,f,j)}function gr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ia(e){mt(e,Tn,0),vr(e)}function Da(e,r){try{return e._strategySizeAlgorithm(r)}catch(f){return er(e,f),1}}function Rn(e){return e._strategyHWM-e._queueTotalSize}function La(e,r,f){try{mt(e,r,f)}catch(te){er(e,te);return}var j=e._controlledWritableStream;if(!bt(j)&&j._state==="writable"){var Y=zr(e);jr(j,Y)}vr(e)}function vr(e){var r=e._controlledWritableStream;if(e._started&&r._inFlightWriteRequest===void 0){var f=r._state;if(f==="erroring"){Ur(r);return}if(e._queue.length!==0){var j=Tt(e);j===Tn?Na(e):Ba(e,j)}}}function er(e,r){e._controlledWritableStream._state==="writable"&&kn(e,r)}function Na(e){var r=e._controlledWritableStream;Ca(r),et(e);var f=e._closeAlgorithm();gr(e),a(f,function(){return Ea(r),null},function(j){return Pa(r,j),null})}function Ba(e,r){var f=e._controlledWritableStream;Ra(f);var j=e._writeAlgorithm(r);a(j,function(){_a(f);var Y=f._state;if(et(e),!bt(f)&&Y==="writable"){var te=zr(e);jr(f,te)}return vr(e),null},function(Y){return f._state==="writable"&&gr(e),wa(f,Y),null})}function zr(e){var r=Rn(e);return r<=0}function kn(e,r){var f=e._controlledWritableStream;gr(e),Wr(f,r)}function br(e){return new TypeError("WritableStream.prototype.".concat(e," can only be used on a WritableStream"))}function $r(e){return new TypeError("WritableStreamDefaultController.prototype.".concat(e," can only be used on a WritableStreamDefaultController"))}function Wt(e){return new TypeError("WritableStreamDefaultWriter.prototype.".concat(e," can only be used on a WritableStreamDefaultWriter"))}function tr(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function yr(e){e._closedPromise=L(function(r,f){e._closedPromise_resolve=r,e._closedPromise_reject=f,e._closedPromiseState="pending"})}function xn(e,r){yr(e),Hr(e,r)}function Wa(e){yr(e),Fn(e)}function Hr(e,r){e._closedPromise_reject!==void 0&&(T(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Ua(e,r){xn(e,r)}function Fn(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Sr(e){e._readyPromise=L(function(r,f){e._readyPromise_resolve=r,e._readyPromise_reject=f}),e._readyPromiseState="pending"}function Vr(e,r){Sr(e),Mn(e,r)}function On(e){Sr(e),Xr(e)}function Mn(e,r){e._readyPromise_reject!==void 0&&(T(e._readyPromise),e._readyPromise_reject(r),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function ja(e){Sr(e)}function Ga(e,r){Vr(e,r)}function Xr(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}function za(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof commonjsGlobal<"u")return commonjsGlobal}var qr=za();function $a(e){if(!(typeof e=="function"||typeof e=="object")||e.name!=="DOMException")return!1;try{return new e,!0}catch{return!1}}function Ha(){var e=qr?.DOMException;return $a(e)?e:void 0}function Va(){var e=function(f,j){this.message=f||"",this.name=j||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return E(e,"DOMException"),e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}var Xa=Ha()||Va();function In(e,r,f,j,Y,te){var fe=Ee(e),Te=yn(r);e._disturbed=!0;var xe=!1,Pe=c(void 0);return L(function(We,$e){var He;if(te!==void 0){if(He=function(){var je=te.reason!==void 0?te.reason:new Xa("Aborted","AbortError"),Qe=[];j||Qe.push(function(){return r._state==="writable"?pr(r,je):c(void 0)}),Y||Qe.push(function(){return e._state==="readable"?vt(e,je):c(void 0)}),ht(function(){return Promise.all(Qe.map(function(rt){return rt()}))},!0,je)},te.aborted){He();return}te.addEventListener("abort",He)}function it(){return L(function(je,Qe){function rt(At){At?je():d(dt(),rt,Qe)}rt(!1)})}function dt(){return xe?c(!0):d(Te._readyPromise,function(){return L(function(je,Qe){ae(fe,{_chunkSteps:function(rt){Pe=d(Pn(Te,rt),void 0,v),je(!1)},_closeSteps:function(){return je(!0)},_errorSteps:Qe})})})}if(ot(e,fe._closedPromise,function(je){return j?Pt(!0,je):ht(function(){return pr(r,je)},!0,je),null}),ot(r,Te._closedPromise,function(je){return Y?Pt(!0,je):ht(function(){return vt(e,je)},!0,je),null}),St(e,fe._closedPromise,function(){return f?Pt():ht(function(){return xa(Te)}),null}),bt(r)||r._state==="closed"){var pt=new TypeError("the destination writable stream closed before all data could be piped to it");Y?Pt(!0,pt):ht(function(){return vt(e,pt)},!0,pt)}T(it());function yt(){var je=Pe;return d(Pe,function(){return je!==Pe?yt():void 0})}function ot(je,Qe,rt){je._state==="errored"?rt(je._storedError):m(Qe,rt)}function St(je,Qe,rt){je._state==="closed"?rt():s(Qe,rt)}function ht(je,Qe,rt){if(xe)return;xe=!0,r._state==="writable"&&!bt(r)?s(yt(),At):At();function At(){return a(je(),function(){return tt(Qe,rt)},function(Ot){return tt(!0,Ot)}),null}}function Pt(je,Qe){xe||(xe=!0,r._state==="writable"&&!bt(r)?s(yt(),function(){return tt(je,Qe)}):tt(je,Qe))}function tt(je,Qe){return En(Te),ve(fe),te!==void 0&&te.removeEventListener("abort",He),je?$e(Qe):We(void 0),null}})}var Et=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Ar(this))throw wr("desiredSize");return Yr(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!Ar(this))throw wr("close");if(!qt(this))throw new TypeError("The stream is not in a state that permits close");Ut(this)},e.prototype.enqueue=function(r){if(r===void 0&&(r=void 0),!Ar(this))throw wr("enqueue");if(!qt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Xt(this,r)},e.prototype.error=function(r){if(r===void 0&&(r=void 0),!Ar(this))throw wr("error");gt(this,r)},e.prototype[U]=function(r){ct(this);var f=this._cancelAlgorithm(r);return _r(this),f},e.prototype[W]=function(r){var f=this._controlledReadableStream;if(this._queue.length>0){var j=et(this);this._closeRequested&&this._queue.length===0?(_r(this),ar(f)):rr(this),r._chunkSteps(j)}else Me(f,r),rr(this)},e.prototype[D]=function(){},e}();Object.defineProperties(Et.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),E(Et.prototype.close,"close"),E(Et.prototype.enqueue,"enqueue"),E(Et.prototype.error,"error"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Et.prototype,n.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Ar(e){return!I(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Et}function rr(e){var r=Dn(e);if(r){if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;var f=e._pullAlgorithm();a(f,function(){return e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,rr(e)),null},function(j){return gt(e,j),null})}}function Dn(e){var r=e._controlledReadableStream;if(!qt(e)||!e._started)return!1;if(xt(r)&&Ve(r)>0)return!0;var f=Yr(e);return f>0}function _r(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ut(e){if(qt(e)){var r=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(_r(e),ar(r))}}function Xt(e,r){if(qt(e)){var f=e._controlledReadableStream;if(xt(f)&&Ve(f)>0)Ae(f,r,!1);else{var j=void 0;try{j=e._strategySizeAlgorithm(r)}catch(Y){throw gt(e,Y),Y}try{mt(e,r,j)}catch(Y){throw gt(e,Y),Y}}rr(e)}}function gt(e,r){var f=e._controlledReadableStream;f._state==="readable"&&(ct(e),_r(e),Wn(f,r))}function Yr(e){var r=e._controlledReadableStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function qa(e){return!Dn(e)}function qt(e){var r=e._controlledReadableStream._state;return!e._closeRequested&&r==="readable"}function Ln(e,r,f,j,Y,te,fe){r._controlledReadableStream=e,r._queue=void 0,r._queueTotalSize=void 0,ct(r),r._started=!1,r._closeRequested=!1,r._pullAgain=!1,r._pulling=!1,r._strategySizeAlgorithm=fe,r._strategyHWM=te,r._pullAlgorithm=j,r._cancelAlgorithm=Y,e._readableStreamController=r;var Te=f();a(c(Te),function(){return r._started=!0,rr(r),null},function(xe){return gt(r,xe),null})}function Ya(e,r,f,j){var Y=Object.create(Et.prototype),te,fe,Te;r.start!==void 0?te=function(){return r.start(Y)}:te=function(){},r.pull!==void 0?fe=function(){return r.pull(Y)}:fe=function(){return c(void 0)},r.cancel!==void 0?Te=function(xe){return r.cancel(xe)}:Te=function(){return c(void 0)},Ln(e,Y,te,fe,Te,f,j)}function wr(e){return new TypeError("ReadableStreamDefaultController.prototype.".concat(e," can only be used on a ReadableStreamDefaultController"))}function Ka(e,r){return Dt(e._readableStreamController)?Ja(e):Qa(e)}function Qa(e,r){var f=Ee(e),j=!1,Y=!1,te=!1,fe=!1,Te,xe,Pe,We,$e,He=L(function(ot){$e=ot});function it(){if(j)return Y=!0,c(void 0);j=!0;var ot={_chunkSteps:function(St){N(function(){Y=!1;var ht=St,Pt=St;te||Xt(Pe._readableStreamController,ht),fe||Xt(We._readableStreamController,Pt),j=!1,Y&&it()})},_closeSteps:function(){j=!1,te||Ut(Pe._readableStreamController),fe||Ut(We._readableStreamController),(!te||!fe)&&$e(void 0)},_errorSteps:function(){j=!1}};return ae(f,ot),c(void 0)}function dt(ot){if(te=!0,Te=ot,fe){var St=de([Te,xe]),ht=vt(e,St);$e(ht)}return He}function pt(ot){if(fe=!0,xe=ot,te){var St=de([Te,xe]),ht=vt(e,St);$e(ht)}return He}function yt(){}return Pe=nr(yt,it,dt),We=nr(yt,it,pt),m(f._closedPromise,function(ot){return gt(Pe._readableStreamController,ot),gt(We._readableStreamController,ot),(!te||!fe)&&$e(void 0),null}),[Pe,We]}function Ja(e){var r=Ee(e),f=!1,j=!1,Y=!1,te=!1,fe=!1,Te,xe,Pe,We,$e,He=L(function(tt){$e=tt});function it(tt){m(tt._closedPromise,function(je){return tt!==r||(ft(Pe._readableStreamController,je),ft(We._readableStreamController,je),(!te||!fe)&&$e(void 0)),null})}function dt(){Nt(r)&&(ve(r),r=Ee(e),it(r));var tt={_chunkSteps:function(je){N(function(){j=!1,Y=!1;var Qe=je,rt=je;if(!te&&!fe)try{rt=st(je)}catch(At){ft(Pe._readableStreamController,At),ft(We._readableStreamController,At),$e(vt(e,At));return}te||lr(Pe._readableStreamController,Qe),fe||lr(We._readableStreamController,rt),f=!1,j?yt():Y&&ot()})},_closeSteps:function(){f=!1,te||Qt(Pe._readableStreamController),fe||Qt(We._readableStreamController),Pe._readableStreamController._pendingPullIntos.length>0&&cr(Pe._readableStreamController,0),We._readableStreamController._pendingPullIntos.length>0&&cr(We._readableStreamController,0),(!te||!fe)&&$e(void 0)},_errorSteps:function(){f=!1}};ae(r,tt)}function pt(tt,je){we(r)&&(ve(r),r=fn(e),it(r));var Qe=je?We:Pe,rt=je?Pe:We,At={_chunkSteps:function(Ot){N(function(){j=!1,Y=!1;var Kt=je?fe:te,ir=je?te:fe;if(ir)Kt||ur(Qe._readableStreamController,Ot);else{var Jn=void 0;try{Jn=st(Ot)}catch(en){ft(Qe._readableStreamController,en),ft(rt._readableStreamController,en),$e(vt(e,en));return}Kt||ur(Qe._readableStreamController,Ot),lr(rt._readableStreamController,Jn)}f=!1,j?yt():Y&&ot()})},_closeSteps:function(Ot){f=!1;var Kt=je?fe:te,ir=je?te:fe;Kt||Qt(Qe._readableStreamController),ir||Qt(rt._readableStreamController),Ot!==void 0&&(Kt||ur(Qe._readableStreamController,Ot),!ir&&rt._readableStreamController._pendingPullIntos.length>0&&cr(rt._readableStreamController,0)),(!Kt||!ir)&&$e(void 0)},_errorSteps:function(){f=!1}};gn(r,tt,1,At)}function yt(){if(f)return j=!0,c(void 0);f=!0;var tt=Dr(Pe._readableStreamController);return tt===null?dt():pt(tt._view,!1),c(void 0)}function ot(){if(f)return Y=!0,c(void 0);f=!0;var tt=Dr(We._readableStreamController);return tt===null?dt():pt(tt._view,!0),c(void 0)}function St(tt){if(te=!0,Te=tt,fe){var je=de([Te,xe]),Qe=vt(e,je);$e(Qe)}return He}function ht(tt){if(fe=!0,xe=tt,te){var je=de([Te,xe]),Qe=vt(e,je);$e(Qe)}return He}function Pt(){}return Pe=Bn(Pt,yt,St),We=Bn(Pt,ot,ht),it(r),[Pe,We]}function Za(e){return I(e)&&typeof e.getReader<"u"}function ei(e){return Za(e)?ri(e.getReader()):ti(e)}function ti(e){var r,f=Se(e,"async"),j=v;function Y(){var fe;try{fe=ke(f)}catch(xe){return h(xe)}var Te=c(fe);return p(Te,function(xe){if(!I(xe))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");var Pe=Be(xe);if(Pe)Ut(r._readableStreamController);else{var We=Ge(xe);Xt(r._readableStreamController,We)}})}function te(fe){var Te=f.iterator,xe;try{xe=Ne(Te,"return")}catch($e){return h($e)}if(xe===void 0)return c(void 0);var Pe;try{Pe=M(xe,Te,[fe])}catch($e){return h($e)}var We=c(Pe);return p(We,function($e){if(!I($e))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return r=nr(j,Y,te,0),r}function ri(e){var r,f=v;function j(){var te;try{te=e.read()}catch(fe){return h(fe)}return p(te,function(fe){if(!I(fe))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(fe.done)Ut(r._readableStreamController);else{var Te=fe.value;Xt(r._readableStreamController,Te)}})}function Y(te){try{return c(e.cancel(te))}catch(fe){return h(fe)}}return r=nr(f,j,Y,0),r}function ni(e,r){B(e,r);var f=e,j=f?.autoAllocateChunkSize,Y=f?.cancel,te=f?.pull,fe=f?.start,Te=f?.type;return{autoAllocateChunkSize:j===void 0?void 0:ye(j,"".concat(r," has member 'autoAllocateChunkSize' that")),cancel:Y===void 0?void 0:ai(Y,f,"".concat(r," has member 'cancel' that")),pull:te===void 0?void 0:ii(te,f,"".concat(r," has member 'pull' that")),start:fe===void 0?void 0:si(fe,f,"".concat(r," has member 'start' that")),type:Te===void 0?void 0:oi(Te,"".concat(r," has member 'type' that"))}}function ai(e,r,f){return $(e,f),function(j){return Q(e,r,[j])}}function ii(e,r,f){return $(e,f),function(j){return Q(e,r,[j])}}function si(e,r,f){return $(e,f),function(j){return M(e,r,[j])}}function oi(e,r){if(e="".concat(e),e!=="bytes")throw new TypeError("".concat(r," '").concat(e,"' is not a valid enumeration value for ReadableStreamType"));return e}function li(e,r){B(e,r);var f=e?.preventCancel;return{preventCancel:!!f}}function Nn(e,r){B(e,r);var f=e?.preventAbort,j=e?.preventCancel,Y=e?.preventClose,te=e?.signal;return te!==void 0&&ci(te,"".concat(r," has member 'signal' that")),{preventAbort:!!f,preventCancel:!!j,preventClose:!!Y,signal:te}}function ci(e,r){if(!va(e))throw new TypeError("".concat(r," is not an AbortSignal."))}function ui(e,r){B(e,r);var f=e?.readable;ce(f,"readable","ReadableWritablePair"),_e(f,"".concat(r," has member 'readable' that"));var j=e?.writable;return ce(j,"writable","ReadableWritablePair"),bn(j,"".concat(r," has member 'writable' that")),{readable:f,writable:j}}var lt=function(){function e(r,f){r===void 0&&(r={}),f===void 0&&(f={}),r===void 0?r=null:re(r,"First parameter");var j=fr(f,"Second parameter"),Y=ni(r,"First parameter");if(Kr(this),Y.type==="bytes"){if(j.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");var te=Zt(j,0);aa(this,Y,te)}else{var fe=hr(j),te=Zt(j,1);Ya(this,Y,te,fe)}}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!kt(this))throw jt("locked");return xt(this)},enumerable:!1,configurable:!0}),e.prototype.cancel=function(r){return r===void 0&&(r=void 0),kt(this)?xt(this)?h(new TypeError("Cannot cancel a stream that already has a reader")):vt(this,r):h(jt("cancel"))},e.prototype.getReader=function(r){if(r===void 0&&(r=void 0),!kt(this))throw jt("getReader");var f=sa(r,"First parameter");return f.mode===void 0?Ee(this):fn(this)},e.prototype.pipeThrough=function(r,f){if(f===void 0&&(f={}),!kt(this))throw jt("pipeThrough");ie(r,1,"pipeThrough");var j=ui(r,"First parameter"),Y=Nn(f,"Second parameter");if(xt(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ht(j.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var te=In(this,j.writable,Y.preventClose,Y.preventAbort,Y.preventCancel,Y.signal);return T(te),j.readable},e.prototype.pipeTo=function(r,f){if(f===void 0&&(f={}),!kt(this))return h(jt("pipeTo"));if(r===void 0)return h("Parameter 1 is required in 'pipeTo'.");if(!$t(r))return h(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var j;try{j=Nn(f,"Second parameter")}catch(Y){return h(Y)}return xt(this)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ht(r)?h(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):In(this,r,j.preventClose,j.preventAbort,j.preventCancel,j.signal)},e.prototype.tee=function(){if(!kt(this))throw jt("tee");var r=Ka(this);return de(r)},e.prototype.values=function(r){if(r===void 0&&(r=void 0),!kt(this))throw jt("values");var f=li(r,"First parameter");return nt(this,f.preventCancel)},e.prototype[se]=function(r){return this.values(r)},e.from=function(r){return ei(r)},e}();Object.defineProperties(lt,{from:{enumerable:!0}}),Object.defineProperties(lt.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),E(lt.from,"from"),E(lt.prototype.cancel,"cancel"),E(lt.prototype.getReader,"getReader"),E(lt.prototype.pipeThrough,"pipeThrough"),E(lt.prototype.pipeTo,"pipeTo"),E(lt.prototype.tee,"tee"),E(lt.prototype.values,"values"),typeof n.toStringTag=="symbol"&&Object.defineProperty(lt.prototype,n.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(lt.prototype,se,{value:lt.prototype.values,writable:!0,configurable:!0});function nr(e,r,f,j,Y){j===void 0&&(j=1),Y===void 0&&(Y=function(){return 1});var te=Object.create(lt.prototype);Kr(te);var fe=Object.create(Et.prototype);return Ln(te,fe,e,r,f,j,Y),te}function Bn(e,r,f){var j=Object.create(lt.prototype);Kr(j);var Y=Object.create(_t.prototype);return hn(j,Y,e,r,f,0,void 0),j}function Kr(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function kt(e){return!I(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof lt}function xt(e){return e._reader!==void 0}function vt(e,r){if(e._disturbed=!0,e._state==="closed")return c(void 0);if(e._state==="errored")return h(e._storedError);ar(e);var f=e._reader;if(f!==void 0&&Nt(f)){var j=f._readIntoRequests;f._readIntoRequests=new X,j.forEach(function(te){te._closeSteps(void 0)})}var Y=e._readableStreamController[U](r);return p(Y,v)}function ar(e){e._state="closed";var r=e._reader;if(r!==void 0&&(l(r),we(r))){var f=r._readRequests;r._readRequests=new X,f.forEach(function(j){j._closeSteps()})}}function Wn(e,r){e._state="errored",e._storedError=r;var f=e._reader;f!==void 0&&(G(f,r),we(f)?De(f,r):vn(f,r))}function jt(e){return new TypeError("ReadableStream.prototype.".concat(e," can only be used on a ReadableStream"))}function Un(e,r){B(e,r);var f=e?.highWaterMark;return ce(f,"highWaterMark","QueuingStrategyInit"),{highWaterMark:oe(f)}}var jn=function(e){return e.byteLength};E(jn,"size");var Er=function(){function e(r){ie(r,1,"ByteLengthQueuingStrategy"),r=Un(r,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=r.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!zn(this))throw Gn("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!zn(this))throw Gn("size");return jn},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Er.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Er.prototype,n.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Gn(e){return new TypeError("ByteLengthQueuingStrategy.prototype.".concat(e," can only be used on a ByteLengthQueuingStrategy"))}function zn(e){return!I(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Er}var $n=function(){return 1};E($n,"size");var Pr=function(){function e(r){ie(r,1,"CountQueuingStrategy"),r=Un(r,"First parameter"),this._countQueuingStrategyHighWaterMark=r.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!Vn(this))throw Hn("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!Vn(this))throw Hn("size");return $n},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Pr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Pr.prototype,n.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Hn(e){return new TypeError("CountQueuingStrategy.prototype.".concat(e," can only be used on a CountQueuingStrategy"))}function Vn(e){return!I(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Pr}function di(e,r){B(e,r);var f=e?.cancel,j=e?.flush,Y=e?.readableType,te=e?.start,fe=e?.transform,Te=e?.writableType;return{cancel:f===void 0?void 0:mi(f,e,"".concat(r," has member 'cancel' that")),flush:j===void 0?void 0:hi(j,e,"".concat(r," has member 'flush' that")),readableType:Y,start:te===void 0?void 0:fi(te,e,"".concat(r," has member 'start' that")),transform:fe===void 0?void 0:pi(fe,e,"".concat(r," has member 'transform' that")),writableType:Te}}function hi(e,r,f){return $(e,f),function(j){return Q(e,r,[j])}}function fi(e,r,f){return $(e,f),function(j){return M(e,r,[j])}}function pi(e,r,f){return $(e,f),function(j,Y){return Q(e,r,[j,Y])}}function mi(e,r,f){return $(e,f),function(j){return Q(e,r,[j])}}var Tr=function(){function e(r,f,j){r===void 0&&(r={}),f===void 0&&(f={}),j===void 0&&(j={}),r===void 0&&(r=null);var Y=fr(f,"Second parameter"),te=fr(j,"Third parameter"),fe=di(r,"First parameter");if(fe.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(fe.writableType!==void 0)throw new RangeError("Invalid writableType specified");var Te=Zt(te,0),xe=hr(te),Pe=Zt(Y,1),We=hr(Y),$e,He=L(function(it){$e=it});gi(this,He,Pe,We,Te,xe),bi(this,fe),fe.start!==void 0?$e(fe.start(this._transformStreamController)):$e(void 0)}return Object.defineProperty(e.prototype,"readable",{get:function(){if(!Xn(this))throw Qn("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){if(!Xn(this))throw Qn("writable");return this._writable},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Tr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof n.toStringTag=="symbol"&&Object.defineProperty(Tr.prototype,n.toStringTag,{value:"TransformStream",configurable:!0});function gi(e,r,f,j,Y,te){function fe(){return r}function Te(He){return Ai(e,He)}function xe(He){return _i(e,He)}function Pe(){return wi(e)}e._writable=Sa(fe,Te,Pe,xe,f,j);function We(){return Ei(e)}function $e(He){return Pi(e,He)}e._readable=nr(fe,We,$e,Y,te),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Cr(e,!0),e._transformStreamController=void 0}function Xn(e){return!I(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Tr}function qn(e,r){gt(e._readable._readableStreamController,r),Qr(e,r)}function Qr(e,r){kr(e._transformStreamController),er(e._writable._writableStreamController,r),Jr(e)}function Jr(e){e._backpressure&&Cr(e,!1)}function Cr(e,r){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=L(function(f){e._backpressureChangePromise_resolve=f}),e._backpressure=r}var Ft=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!Rr(this))throw xr("desiredSize");var r=this._controlledTransformStream._readable._readableStreamController;return Yr(r)},enumerable:!1,configurable:!0}),e.prototype.enqueue=function(r){if(r===void 0&&(r=void 0),!Rr(this))throw xr("enqueue");Yn(this,r)},e.prototype.error=function(r){if(r===void 0&&(r=void 0),!Rr(this))throw xr("error");yi(this,r)},e.prototype.terminate=function(){if(!Rr(this))throw xr("terminate");Si(this)},e}();Object.defineProperties(Ft.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),E(Ft.prototype.enqueue,"enqueue"),E(Ft.prototype.error,"error"),E(Ft.prototype.terminate,"terminate"),typeof n.toStringTag=="symbol"&&Object.defineProperty(Ft.prototype,n.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Rr(e){return!I(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Ft}function vi(e,r,f,j,Y){r._controlledTransformStream=e,e._transformStreamController=r,r._transformAlgorithm=f,r._flushAlgorithm=j,r._cancelAlgorithm=Y,r._finishPromise=void 0,r._finishPromise_resolve=void 0,r._finishPromise_reject=void 0}function bi(e,r){var f=Object.create(Ft.prototype),j,Y,te;r.transform!==void 0?j=function(fe){return r.transform(fe,f)}:j=function(fe){try{return Yn(f,fe),c(void 0)}catch(Te){return h(Te)}},r.flush!==void 0?Y=function(){return r.flush(f)}:Y=function(){return c(void 0)},r.cancel!==void 0?te=function(fe){return r.cancel(fe)}:te=function(){return c(void 0)},vi(e,f,j,Y,te)}function kr(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0,e._cancelAlgorithm=void 0}function Yn(e,r){var f=e._controlledTransformStream,j=f._readable._readableStreamController;if(!qt(j))throw new TypeError("Readable side is not in a state that permits enqueue");try{Xt(j,r)}catch(te){throw Qr(f,te),f._readable._storedError}var Y=qa(j);Y!==f._backpressure&&Cr(f,!0)}function yi(e,r){qn(e._controlledTransformStream,r)}function Kn(e,r){var f=e._transformAlgorithm(r);return p(f,void 0,function(j){throw qn(e._controlledTransformStream,j),j})}function Si(e){var r=e._controlledTransformStream,f=r._readable._readableStreamController;Ut(f);var j=new TypeError("TransformStream terminated");Qr(r,j)}function Ai(e,r){var f=e._transformStreamController;if(e._backpressure){var j=e._backpressureChangePromise;return p(j,function(){var Y=e._writable,te=Y._state;if(te==="erroring")throw Y._storedError;return Kn(f,r)})}return Kn(f,r)}function _i(e,r){var f=e._transformStreamController;if(f._finishPromise!==void 0)return f._finishPromise;var j=e._readable;f._finishPromise=L(function(te,fe){f._finishPromise_resolve=te,f._finishPromise_reject=fe});var Y=f._cancelAlgorithm(r);return kr(f),a(Y,function(){return j._state==="errored"?Yt(f,j._storedError):(gt(j._readableStreamController,r),Zr(f)),null},function(te){return gt(j._readableStreamController,te),Yt(f,te),null}),f._finishPromise}function wi(e){var r=e._transformStreamController;if(r._finishPromise!==void 0)return r._finishPromise;var f=e._readable;r._finishPromise=L(function(Y,te){r._finishPromise_resolve=Y,r._finishPromise_reject=te});var j=r._flushAlgorithm();return kr(r),a(j,function(){return f._state==="errored"?Yt(r,f._storedError):(Ut(f._readableStreamController),Zr(r)),null},function(Y){return gt(f._readableStreamController,Y),Yt(r,Y),null}),r._finishPromise}function Ei(e){return Cr(e,!1),e._backpressureChangePromise}function Pi(e,r){var f=e._transformStreamController;if(f._finishPromise!==void 0)return f._finishPromise;var j=e._writable;f._finishPromise=L(function(te,fe){f._finishPromise_resolve=te,f._finishPromise_reject=fe});var Y=f._cancelAlgorithm(r);return kr(f),a(Y,function(){return j._state==="errored"?Yt(f,j._storedError):(er(j._writableStreamController,r),Jr(e),Zr(f)),null},function(te){return er(j._writableStreamController,te),Jr(e),Yt(f,te),null}),f._finishPromise}function xr(e){return new TypeError("TransformStreamDefaultController.prototype.".concat(e," can only be used on a TransformStreamDefaultController"))}function Zr(e){e._finishPromise_resolve!==void 0&&(e._finishPromise_resolve(),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function Yt(e,r){e._finishPromise_reject!==void 0&&(T(e._finishPromise),e._finishPromise_reject(r),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function Qn(e){return new TypeError("TransformStream.prototype.".concat(e," can only be used on a TransformStream"))}t.ByteLengthQueuingStrategy=Er,t.CountQueuingStrategy=Pr,t.ReadableByteStreamController=_t,t.ReadableStream=lt,t.ReadableStreamBYOBReader=Ct,t.ReadableStreamBYOBRequest=ut,t.ReadableStreamDefaultController=Et,t.ReadableStreamDefaultReader=Fe,t.TransformStream=Tr,t.TransformStreamDefaultController=Ft,t.WritableStream=Rt,t.WritableStreamDefaultController=Vt,t.WritableStreamDefaultWriter=wt})}(ponyfill$1,ponyfill$1.exports)),ponyfill$1.exports}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$7=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(i,t){module.exports=t()})(globalThis,()=>(()=>{var __webpack_modules__=[,(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.VerbosityLevel=i.Util=i.UnknownErrorException=i.UnexpectedResponseException=i.UNSUPPORTED_FEATURES=i.TextRenderingMode=i.StreamType=i.RenderingIntentFlag=i.PermissionFlag=i.PasswordResponses=i.PasswordException=i.PageActionEventType=i.OPS=i.MissingPDFException=i.LINE_FACTOR=i.LINE_DESCENT_FACTOR=i.InvalidPDFException=i.ImageKind=i.IDENTITY_MATRIX=i.FormatError=i.FontType=i.FeatureTest=i.FONT_IDENTITY_MATRIX=i.DocumentActionEventType=i.CMapCompressionType=i.BaseException=i.AnnotationType=i.AnnotationStateModelType=i.AnnotationReviewState=i.AnnotationReplyType=i.AnnotationMode=i.AnnotationMarkedState=i.AnnotationFlag=i.AnnotationFieldFlag=i.AnnotationEditorType=i.AnnotationEditorPrefix=i.AnnotationEditorParamsType=i.AnnotationBorderStyleType=i.AnnotationActionEventType=i.AbortException=void 0,i.arrayByteLength=ie,i.arraysToBytes=ce,i.assert=Ce,i.bytesToString=Z,i.createPromiseCapability=Le,i.createValidAbsoluteUrl=_,i.escapeString=Fe,i.getModificationDate=Re,i.getVerbosityLevel=D,i.info=J,i.isArrayBuffer=Ye,i.isArrayEqual=ge,i.isAscii=we,i.objectFromMap=me,i.objectSize=ue,i.setVerbosityLevel=W,i.shadow=P,i.string32=oe,i.stringToBytes=re,i.stringToPDFString=Ke,i.stringToUTF16BEString=ae,i.stringToUTF8String=be,i.unreachable=ve,i.utf8StringToString=De,i.warn=le,t(2);const n=[1,0,0,1,0,0];i.IDENTITY_MATRIX=n;const o=[.001,0,0,.001,0,0];i.FONT_IDENTITY_MATRIX=o;const g=1.35;i.LINE_FACTOR=g;const A=.35;i.LINE_DESCENT_FACTOR=A;const R={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};i.RenderingIntentFlag=R;const C={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};i.AnnotationMode=C;const y="pdfjs_internal_editor_";i.AnnotationEditorPrefix=y;const v={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};i.AnnotationEditorType=v;const I={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};i.AnnotationEditorParamsType=I;const u={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};i.PermissionFlag=u;const E={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};i.TextRenderingMode=E;const O={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};i.ImageKind=O;const S={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};i.AnnotationType=S;const x={MARKED:"Marked",REVIEW:"Review"};i.AnnotationStateModelType=x;const L={MARKED:"Marked",UNMARKED:"Unmarked"};i.AnnotationMarkedState=L;const c={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};i.AnnotationReviewState=c;const h={GROUP:"Group",REPLY:"R"};i.AnnotationReplyType=h;const d={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};i.AnnotationFlag=d;const a={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};i.AnnotationFieldFlag=a;const s={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};i.AnnotationBorderStyleType=s;const m={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};i.AnnotationActionEventType=m;const p={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};i.DocumentActionEventType=p;const T={O:"PageOpen",C:"PageClose"};i.PageActionEventType=T;const N={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};i.StreamType=N;const M={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};i.FontType=M;const Q={ERRORS:0,WARNINGS:1,INFOS:5};i.VerbosityLevel=Q;const q={NONE:0,BINARY:1,STREAM:2};i.CMapCompressionType=q;const X={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};i.OPS=X;const K={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};i.UNSUPPORTED_FEATURES=K;const H={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};i.PasswordResponses=H;let U=Q.WARNINGS;function W(de){Number.isInteger(de)&&(U=de)}function D(){return U}function J(de){U>=Q.INFOS&&console.log(`Info: ${de}`)}function le(de){U>=Q.WARNINGS&&console.log(`Warning: ${de}`)}function ve(de){throw new Error(de)}function Ce(de,ee){de||ve(ee)}function V(de){if(!de)return!1;switch(de.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _(de){let ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!de)return null;try{if(ne&&typeof de=="string"){if(ne.addDefaultProtocol&&de.startsWith("www.")){const Oe=de.match(/\./g);Oe&&Oe.length>=2&&(de=`http://${de}`)}if(ne.tryConvertEncoding)try{de=be(de)}catch{}}const pe=ee?new URL(de,ee):new URL(de);if(V(pe))return pe}catch{}return null}function P(de,ee,ne){return Object.defineProperty(de,ee,{value:ne,enumerable:!0,configurable:!0,writable:!1}),ne}const G=function(){function ee(ne,pe){this.constructor===ee&&ve("Cannot initialize BaseException."),this.message=ne,this.name=pe}return ee.prototype=new Error,ee.constructor=ee,ee}();i.BaseException=G;class z extends G{constructor(ee,ne){super(ee,"PasswordException"),this.code=ne}}i.PasswordException=z;class l extends G{constructor(ee,ne){super(ee,"UnknownErrorException"),this.details=ne}}i.UnknownErrorException=l;class b extends G{constructor(ee){super(ee,"InvalidPDFException")}}i.InvalidPDFException=b;class w extends G{constructor(ee){super(ee,"MissingPDFException")}}i.MissingPDFException=w;class F extends G{constructor(ee,ne){super(ee,"UnexpectedResponseException"),this.status=ne}}i.UnexpectedResponseException=F;class B extends G{constructor(ee){super(ee,"FormatError")}}i.FormatError=B;class $ extends G{constructor(ee){super(ee,"AbortException")}}i.AbortException=$;function Z(de){(typeof de!="object"||de===null||de.length===void 0)&&ve("Invalid argument for bytesToString");const ee=de.length,ne=8192;if(ee<ne)return String.fromCharCode.apply(null,de);const pe=[];for(let Oe=0;Oe<ee;Oe+=ne){const Ne=Math.min(Oe+ne,ee),he=de.subarray(Oe,Ne);pe.push(String.fromCharCode.apply(null,he))}return pe.join("")}function re(de){typeof de!="string"&&ve("Invalid argument for stringToBytes");const ee=de.length,ne=new Uint8Array(ee);for(let pe=0;pe<ee;++pe)ne[pe]=de.charCodeAt(pe)&255;return ne}function ie(de){if(de.length!==void 0)return de.length;if(de.byteLength!==void 0)return de.byteLength;ve("Invalid argument for arrayByteLength")}function ce(de){const ee=de.length;if(ee===1&&de[0]instanceof Uint8Array)return de[0];let ne=0;for(let Ne=0;Ne<ee;Ne++)ne+=ie(de[Ne]);let pe=0;const Oe=new Uint8Array(ne);for(let Ne=0;Ne<ee;Ne++){let he=de[Ne];he instanceof Uint8Array||(typeof he=="string"?he=re(he):he=new Uint8Array(he));const se=he.byteLength;Oe.set(he,pe),pe+=se}return Oe}function oe(de){return String.fromCharCode(de>>24&255,de>>16&255,de>>8&255,de&255)}function ue(de){return Object.keys(de).length}function me(de){const ee=Object.create(null);for(const[ne,pe]of de)ee[ne]=pe;return ee}function ye(){const de=new Uint8Array(4);return de[0]=1,new Uint32Array(de.buffer,0,1)[0]===1}function _e(){try{return new Function(""),!0}catch{return!1}}class Ee{static get isLittleEndian(){return P(this,"isLittleEndian",ye())}static get isEvalSupported(){return P(this,"isEvalSupported",_e())}static get isOffscreenCanvasSupported(){return P(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}i.FeatureTest=Ee;const Me=[...Array(256).keys()].map(de=>de.toString(16).padStart(2,"0"));class Ae{static makeHexColor(ee,ne,pe){return`#${Me[ee]}${Me[ne]}${Me[pe]}`}static scaleMinMax(ee,ne){let pe;ee[0]?(ee[0]<0&&(pe=ne[0],ne[0]=ne[1],ne[1]=pe),ne[0]*=ee[0],ne[1]*=ee[0],ee[3]<0&&(pe=ne[2],ne[2]=ne[3],ne[3]=pe),ne[2]*=ee[3],ne[3]*=ee[3]):(pe=ne[0],ne[0]=ne[2],ne[2]=pe,pe=ne[1],ne[1]=ne[3],ne[3]=pe,ee[1]<0&&(pe=ne[2],ne[2]=ne[3],ne[3]=pe),ne[2]*=ee[1],ne[3]*=ee[1],ee[2]<0&&(pe=ne[0],ne[0]=ne[1],ne[1]=pe),ne[0]*=ee[2],ne[1]*=ee[2]),ne[0]+=ee[4],ne[1]+=ee[4],ne[2]+=ee[5],ne[3]+=ee[5]}static transform(ee,ne){return[ee[0]*ne[0]+ee[2]*ne[1],ee[1]*ne[0]+ee[3]*ne[1],ee[0]*ne[2]+ee[2]*ne[3],ee[1]*ne[2]+ee[3]*ne[3],ee[0]*ne[4]+ee[2]*ne[5]+ee[4],ee[1]*ne[4]+ee[3]*ne[5]+ee[5]]}static applyTransform(ee,ne){const pe=ee[0]*ne[0]+ee[1]*ne[2]+ne[4],Oe=ee[0]*ne[1]+ee[1]*ne[3]+ne[5];return[pe,Oe]}static applyInverseTransform(ee,ne){const pe=ne[0]*ne[3]-ne[1]*ne[2],Oe=(ee[0]*ne[3]-ee[1]*ne[2]+ne[2]*ne[5]-ne[4]*ne[3])/pe,Ne=(-ee[0]*ne[1]+ee[1]*ne[0]+ne[4]*ne[1]-ne[5]*ne[0])/pe;return[Oe,Ne]}static getAxialAlignedBoundingBox(ee,ne){const pe=Ae.applyTransform(ee,ne),Oe=Ae.applyTransform(ee.slice(2,4),ne),Ne=Ae.applyTransform([ee[0],ee[3]],ne),he=Ae.applyTransform([ee[2],ee[1]],ne);return[Math.min(pe[0],Oe[0],Ne[0],he[0]),Math.min(pe[1],Oe[1],Ne[1],he[1]),Math.max(pe[0],Oe[0],Ne[0],he[0]),Math.max(pe[1],Oe[1],Ne[1],he[1])]}static inverseTransform(ee){const ne=ee[0]*ee[3]-ee[1]*ee[2];return[ee[3]/ne,-ee[1]/ne,-ee[2]/ne,ee[0]/ne,(ee[2]*ee[5]-ee[4]*ee[3])/ne,(ee[4]*ee[1]-ee[5]*ee[0])/ne]}static apply3dTransform(ee,ne){return[ee[0]*ne[0]+ee[1]*ne[1]+ee[2]*ne[2],ee[3]*ne[0]+ee[4]*ne[1]+ee[5]*ne[2],ee[6]*ne[0]+ee[7]*ne[1]+ee[8]*ne[2]]}static singularValueDecompose2dScale(ee){const ne=[ee[0],ee[2],ee[1],ee[3]],pe=ee[0]*ne[0]+ee[1]*ne[2],Oe=ee[0]*ne[1]+ee[1]*ne[3],Ne=ee[2]*ne[0]+ee[3]*ne[2],he=ee[2]*ne[1]+ee[3]*ne[3],se=(pe+he)/2,Se=Math.sqrt((pe+he)**2-4*(pe*he-Ne*Oe))/2,ke=se+Se||1,Be=se-Se||1;return[Math.sqrt(ke),Math.sqrt(Be)]}static normalizeRect(ee){const ne=ee.slice(0);return ee[0]>ee[2]&&(ne[0]=ee[2],ne[2]=ee[0]),ee[1]>ee[3]&&(ne[1]=ee[3],ne[3]=ee[1]),ne}static intersect(ee,ne){const pe=Math.max(Math.min(ee[0],ee[2]),Math.min(ne[0],ne[2])),Oe=Math.min(Math.max(ee[0],ee[2]),Math.max(ne[0],ne[2]));if(pe>Oe)return null;const Ne=Math.max(Math.min(ee[1],ee[3]),Math.min(ne[1],ne[3])),he=Math.min(Math.max(ee[1],ee[3]),Math.max(ne[1],ne[3]));return Ne>he?null:[pe,Ne,Oe,he]}static bezierBoundingBox(ee,ne,pe,Oe,Ne,he,se,Se){const ke=[],Be=[[],[]];let Ge,Ue,ze,Ie,qe,nt,Xe,Je;for(let et=0;et<2;++et){if(et===0?(Ue=6*ee-12*pe+6*Ne,Ge=-3*ee+9*pe-9*Ne+3*se,ze=3*pe-3*ee):(Ue=6*ne-12*Oe+6*he,Ge=-3*ne+9*Oe-9*he+3*Se,ze=3*Oe-3*ne),Math.abs(Ge)<1e-12){if(Math.abs(Ue)<1e-12)continue;Ie=-ze/Ue,0<Ie&&Ie<1&&ke.push(Ie);continue}Xe=Ue*Ue-4*ze*Ge,Je=Math.sqrt(Xe),!(Xe<0)&&(qe=(-Ue+Je)/(2*Ge),0<qe&&qe<1&&ke.push(qe),nt=(-Ue-Je)/(2*Ge),0<nt&&nt<1&&ke.push(nt))}let at=ke.length,Ze;const st=at;for(;at--;)Ie=ke[at],Ze=1-Ie,Be[0][at]=Ze*Ze*Ze*ee+3*Ze*Ze*Ie*pe+3*Ze*Ie*Ie*Ne+Ie*Ie*Ie*se,Be[1][at]=Ze*Ze*Ze*ne+3*Ze*Ze*Ie*Oe+3*Ze*Ie*Ie*he+Ie*Ie*Ie*Se;return Be[0][st]=ee,Be[1][st]=ne,Be[0][st+1]=se,Be[1][st+1]=Se,Be[0].length=Be[1].length=st+2,[Math.min(...Be[0]),Math.min(...Be[1]),Math.max(...Be[0]),Math.max(...Be[1])]}}i.Util=Ae;const Ve=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Ke(de){if(de[0]>="Ã¯"){let ne;if(de[0]==="Ã¾"&&de[1]==="Ã¿"?ne="utf-16be":de[0]==="Ã¿"&&de[1]==="Ã¾"?ne="utf-16le":de[0]==="Ã¯"&&de[1]==="Â»"&&de[2]==="Â¿"&&(ne="utf-8"),ne)try{const pe=new TextDecoder(ne,{fatal:!0}),Oe=re(de);return pe.decode(Oe)}catch(pe){le(`stringToPDFString: "${pe}".`)}}const ee=[];for(let ne=0,pe=de.length;ne<pe;ne++){const Oe=Ve[de.charCodeAt(ne)];ee.push(Oe?String.fromCharCode(Oe):de.charAt(ne))}return ee.join("")}function Fe(de){return de.replace(/([()\\\n\r])/g,ee=>ee===`
`?"\\n":ee==="\r"?"\\r":`\\${ee}`)}function we(de){return/^[\x00-\x7F]*$/.test(de)}function ae(de){const ee=["Ã¾Ã¿"];for(let ne=0,pe=de.length;ne<pe;ne++){const Oe=de.charCodeAt(ne);ee.push(String.fromCharCode(Oe>>8&255),String.fromCharCode(Oe&255))}return ee.join("")}function be(de){return decodeURIComponent(escape(de))}function De(de){return unescape(encodeURIComponent(de))}function Ye(de){return typeof de=="object"&&de!==null&&de.byteLength!==void 0}function ge(de,ee){if(de.length!==ee.length)return!1;for(let ne=0,pe=de.length;ne<pe;ne++)if(de[ne]!==ee[ne])return!1;return!0}function Re(){let de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Date;return[de.getUTCFullYear().toString(),(de.getUTCMonth()+1).toString().padStart(2,"0"),de.getUTCDate().toString().padStart(2,"0"),de.getUTCHours().toString().padStart(2,"0"),de.getUTCMinutes().toString().padStart(2,"0"),de.getUTCSeconds().toString().padStart(2,"0")].join("")}function Le(){const de=Object.create(null);let ee=!1;return Object.defineProperty(de,"settled",{get(){return ee}}),de.promise=new Promise(function(ne,pe){de.resolve=function(Oe){ee=!0,ne(Oe)},de.reject=function(Oe){ee=!0,pe(Oe)}}),de}},(k,i,t)=>{var n=t(3);globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,function(){globalThis.btoa||!n.isNodeJS||(globalThis.btoa=function(g){return Buffer.from(g,"binary").toString("base64")})}(),function(){globalThis.atob||!n.isNodeJS||(globalThis.atob=function(g){return Buffer.from(g,"base64").toString("binary")})}(),function(){globalThis.DOMMatrix||!n.isNodeJS||(globalThis.DOMMatrix=requireDommatrix())}(),function(){globalThis.ReadableStream||!n.isNodeJS||(globalThis.ReadableStream=requirePonyfill().ReadableStream)}(),function(){Array.prototype.at||t(4)}(),function(){Uint8Array.prototype.at||t(76)}(),function(){globalThis.structuredClone||t(86)}())},(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isNodeJS=void 0;const t=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");i.isNodeJS=t},(k,i,t)=>{t(5);var n=t(75);k.exports=n("Array","at")},(k,i,t)=>{var n=t(6),o=t(41),g=t(65),A=t(63),R=t(70);n({target:"Array",proto:!0},{at:function(y){var v=o(this),I=g(v),u=A(y),E=u>=0?u:I+u;return E<0||E>=I?void 0:v[E]}}),R("at")},(k,i,t)=>{var n=t(7),o=t(8).f,g=t(45),A=t(49),R=t(39),C=t(57),y=t(69);k.exports=function(v,I){var u=v.target,E=v.global,O=v.stat,S,x,L,c,h,d;if(E?x=n:O?x=n[u]||R(u,{}):x=(n[u]||{}).prototype,x)for(L in I){if(h=I[L],v.dontCallGetSet?(d=o(x,L),c=d&&d.value):c=x[L],S=y(E?L:u+(O?".":"#")+L,v.forced),!S&&c!==void 0){if(typeof h==typeof c)continue;C(h,c)}(v.sham||c&&c.sham)&&g(h,"sham",!0),A(x,L,h,v)}}},k=>{var i=function(t){return t&&t.Math==Math&&t};k.exports=i(typeof globalThis=="object"&&globalThis)||i(typeof window=="object"&&window)||i(typeof self=="object"&&self)||i(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||Function("return this")()},(k,i,t)=>{var n=t(9),o=t(11),g=t(13),A=t(14),R=t(15),C=t(20),y=t(40),v=t(43),I=Object.getOwnPropertyDescriptor;i.f=n?I:function(E,O){if(E=R(E),O=C(O),v)try{return I(E,O)}catch{}if(y(E,O))return A(!o(g.f,E,O),E[O])}},(k,i,t)=>{var n=t(10);k.exports=!n(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},k=>{k.exports=function(i){try{return!!i()}catch{return!0}}},(k,i,t)=>{var n=t(12),o=Function.prototype.call;k.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},(k,i,t)=>{var n=t(10);k.exports=!n(function(){var o=function(){}.bind();return typeof o!="function"||o.hasOwnProperty("prototype")})},(k,i)=>{var t={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!t.call({1:2},1);i.f=o?function(A){var R=n(this,A);return!!R&&R.enumerable}:t},k=>{k.exports=function(i,t){return{enumerable:!(i&1),configurable:!(i&2),writable:!(i&4),value:t}}},(k,i,t)=>{var n=t(16),o=t(19);k.exports=function(g){return n(o(g))}},(k,i,t)=>{var n=t(17),o=t(10),g=t(18),A=Object,R=n("".split);k.exports=o(function(){return!A("z").propertyIsEnumerable(0)})?function(C){return g(C)=="String"?R(C,""):A(C)}:A},(k,i,t)=>{var n=t(12),o=Function.prototype,g=o.bind,A=o.call,R=n&&g.bind(A,A);k.exports=n?function(C){return C&&R(C)}:function(C){return C&&function(){return A.apply(C,arguments)}}},(k,i,t)=>{var n=t(17),o=n({}.toString),g=n("".slice);k.exports=function(A){return g(o(A),8,-1)}},k=>{var i=TypeError;k.exports=function(t){if(t==null)throw i("Can't call method on "+t);return t}},(k,i,t)=>{var n=t(21),o=t(24);k.exports=function(g){var A=n(g,"string");return o(A)?A:A+""}},(k,i,t)=>{var n=t(11),o=t(22),g=t(24),A=t(31),R=t(34),C=t(35),y=TypeError,v=C("toPrimitive");k.exports=function(I,u){if(!o(I)||g(I))return I;var E=A(I,v),O;if(E){if(u===void 0&&(u="default"),O=n(E,I,u),!o(O)||g(O))return O;throw y("Can't convert object to primitive value")}return u===void 0&&(u="number"),R(I,u)}},(k,i,t)=>{var n=t(23);k.exports=function(o){return typeof o=="object"?o!==null:n(o)}},k=>{k.exports=function(i){return typeof i=="function"}},(k,i,t)=>{var n=t(25),o=t(23),g=t(26),A=t(27),R=Object;k.exports=A?function(C){return typeof C=="symbol"}:function(C){var y=n("Symbol");return o(y)&&g(y.prototype,R(C))}},(k,i,t)=>{var n=t(7),o=t(23),g=function(A){return o(A)?A:void 0};k.exports=function(A,R){return arguments.length<2?g(n[A]):n[A]&&n[A][R]}},(k,i,t)=>{var n=t(17);k.exports=n({}.isPrototypeOf)},(k,i,t)=>{var n=t(28);k.exports=n&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},(k,i,t)=>{var n=t(29),o=t(10);k.exports=!!Object.getOwnPropertySymbols&&!o(function(){var g=Symbol();return!String(g)||!(Object(g)instanceof Symbol)||!Symbol.sham&&n&&n<41})},(k,i,t)=>{var n=t(7),o=t(30),g=n.process,A=n.Deno,R=g&&g.versions||A&&A.version,C=R&&R.v8,y,v;C&&(y=C.split("."),v=y[0]>0&&y[0]<4?1:+(y[0]+y[1])),!v&&o&&(y=o.match(/Edge\/(\d+)/),(!y||y[1]>=74)&&(y=o.match(/Chrome\/(\d+)/),y&&(v=+y[1]))),k.exports=v},(k,i,t)=>{var n=t(25);k.exports=n("navigator","userAgent")||""},(k,i,t)=>{var n=t(32);k.exports=function(o,g){var A=o[g];return A==null?void 0:n(A)}},(k,i,t)=>{var n=t(23),o=t(33),g=TypeError;k.exports=function(A){if(n(A))return A;throw g(o(A)+" is not a function")}},k=>{var i=String;k.exports=function(t){try{return i(t)}catch{return"Object"}}},(k,i,t)=>{var n=t(11),o=t(23),g=t(22),A=TypeError;k.exports=function(R,C){var y,v;if(C==="string"&&o(y=R.toString)&&!g(v=n(y,R))||o(y=R.valueOf)&&!g(v=n(y,R))||C!=="string"&&o(y=R.toString)&&!g(v=n(y,R)))return v;throw A("Can't convert object to primitive value")}},(k,i,t)=>{var n=t(7),o=t(36),g=t(40),A=t(42),R=t(28),C=t(27),y=o("wks"),v=n.Symbol,I=v&&v.for,u=C?v:v&&v.withoutSetter||A;k.exports=function(E){if(!g(y,E)||!(R||typeof y[E]=="string")){var O="Symbol."+E;R&&g(v,E)?y[E]=v[E]:C&&I?y[E]=I(O):y[E]=u(O)}return y[E]}},(k,i,t)=>{var n=t(37),o=t(38);(k.exports=function(g,A){return o[g]||(o[g]=A!==void 0?A:{})})("versions",[]).push({version:"3.24.1",mode:n?"pure":"global",copyright:"Â© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"})},k=>{k.exports=!1},(k,i,t)=>{var n=t(7),o=t(39),g="__core-js_shared__",A=n[g]||o(g,{});k.exports=A},(k,i,t)=>{var n=t(7),o=Object.defineProperty;k.exports=function(g,A){try{o(n,g,{value:A,configurable:!0,writable:!0})}catch{n[g]=A}return A}},(k,i,t)=>{var n=t(17),o=t(41),g=n({}.hasOwnProperty);k.exports=Object.hasOwn||function(R,C){return g(o(R),C)}},(k,i,t)=>{var n=t(19),o=Object;k.exports=function(g){return o(n(g))}},(k,i,t)=>{var n=t(17),o=0,g=Math.random(),A=n(1 .toString);k.exports=function(R){return"Symbol("+(R===void 0?"":R)+")_"+A(++o+g,36)}},(k,i,t)=>{var n=t(9),o=t(10),g=t(44);k.exports=!n&&!o(function(){return Object.defineProperty(g("div"),"a",{get:function(){return 7}}).a!=7})},(k,i,t)=>{var n=t(7),o=t(22),g=n.document,A=o(g)&&o(g.createElement);k.exports=function(R){return A?g.createElement(R):{}}},(k,i,t)=>{var n=t(9),o=t(46),g=t(14);k.exports=n?function(A,R,C){return o.f(A,R,g(1,C))}:function(A,R,C){return A[R]=C,A}},(k,i,t)=>{var n=t(9),o=t(43),g=t(47),A=t(48),R=t(20),C=TypeError,y=Object.defineProperty,v=Object.getOwnPropertyDescriptor,I="enumerable",u="configurable",E="writable";i.f=n?g?function(S,x,L){if(A(S),x=R(x),A(L),typeof S=="function"&&x==="prototype"&&"value"in L&&E in L&&!L[E]){var c=v(S,x);c&&c[E]&&(S[x]=L.value,L={configurable:u in L?L[u]:c[u],enumerable:I in L?L[I]:c[I],writable:!1})}return y(S,x,L)}:y:function(S,x,L){if(A(S),x=R(x),A(L),o)try{return y(S,x,L)}catch{}if("get"in L||"set"in L)throw C("Accessors not supported");return"value"in L&&(S[x]=L.value),S}},(k,i,t)=>{var n=t(9),o=t(10);k.exports=n&&o(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},(k,i,t)=>{var n=t(22),o=String,g=TypeError;k.exports=function(A){if(n(A))return A;throw g(o(A)+" is not an object")}},(k,i,t)=>{var n=t(23),o=t(46),g=t(50),A=t(39);k.exports=function(R,C,y,v){v||(v={});var I=v.enumerable,u=v.name!==void 0?v.name:C;if(n(y)&&g(y,u,v),v.global)I?R[C]=y:A(C,y);else{try{v.unsafe?R[C]&&(I=!0):delete R[C]}catch{}I?R[C]=y:o.f(R,C,{value:y,enumerable:!1,configurable:!v.nonConfigurable,writable:!v.nonWritable})}return R}},(k,i,t)=>{var n=t(10),o=t(23),g=t(40),A=t(9),R=t(51).CONFIGURABLE,C=t(52),y=t(53),v=y.enforce,I=y.get,u=Object.defineProperty,E=A&&!n(function(){return u(function(){},"length",{value:8}).length!==8}),O=String(String).split("String"),S=k.exports=function(x,L,c){String(L).slice(0,7)==="Symbol("&&(L="["+String(L).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),c&&c.getter&&(L="get "+L),c&&c.setter&&(L="set "+L),(!g(x,"name")||R&&x.name!==L)&&(A?u(x,"name",{value:L,configurable:!0}):x.name=L),E&&c&&g(c,"arity")&&x.length!==c.arity&&u(x,"length",{value:c.arity});try{c&&g(c,"constructor")&&c.constructor?A&&u(x,"prototype",{writable:!1}):x.prototype&&(x.prototype=void 0)}catch{}var h=v(x);return g(h,"source")||(h.source=O.join(typeof L=="string"?L:"")),x};Function.prototype.toString=S(function(){return o(this)&&I(this).source||C(this)},"toString")},(k,i,t)=>{var n=t(9),o=t(40),g=Function.prototype,A=n&&Object.getOwnPropertyDescriptor,R=o(g,"name"),C=R&&function(){}.name==="something",y=R&&(!n||n&&A(g,"name").configurable);k.exports={EXISTS:R,PROPER:C,CONFIGURABLE:y}},(k,i,t)=>{var n=t(17),o=t(23),g=t(38),A=n(Function.toString);o(g.inspectSource)||(g.inspectSource=function(R){return A(R)}),k.exports=g.inspectSource},(k,i,t)=>{var n=t(54),o=t(7),g=t(17),A=t(22),R=t(45),C=t(40),y=t(38),v=t(55),I=t(56),u="Object already initialized",E=o.TypeError,O=o.WeakMap,S,x,L,c=function(T){return L(T)?x(T):S(T,{})},h=function(T){return function(N){var M;if(!A(N)||(M=x(N)).type!==T)throw E("Incompatible receiver, "+T+" required");return M}};if(n||y.state){var d=y.state||(y.state=new O),a=g(d.get),s=g(d.has),m=g(d.set);S=function(T,N){if(s(d,T))throw new E(u);return N.facade=T,m(d,T,N),N},x=function(T){return a(d,T)||{}},L=function(T){return s(d,T)}}else{var p=v("state");I[p]=!0,S=function(T,N){if(C(T,p))throw new E(u);return N.facade=T,R(T,p,N),N},x=function(T){return C(T,p)?T[p]:{}},L=function(T){return C(T,p)}}k.exports={set:S,get:x,has:L,enforce:c,getterFor:h}},(k,i,t)=>{var n=t(7),o=t(23),g=t(52),A=n.WeakMap;k.exports=o(A)&&/native code/.test(g(A))},(k,i,t)=>{var n=t(36),o=t(42),g=n("keys");k.exports=function(A){return g[A]||(g[A]=o(A))}},k=>{k.exports={}},(k,i,t)=>{var n=t(40),o=t(58),g=t(8),A=t(46);k.exports=function(R,C,y){for(var v=o(C),I=A.f,u=g.f,E=0;E<v.length;E++){var O=v[E];!n(R,O)&&!(y&&n(y,O))&&I(R,O,u(C,O))}}},(k,i,t)=>{var n=t(25),o=t(17),g=t(59),A=t(68),R=t(48),C=o([].concat);k.exports=n("Reflect","ownKeys")||function(v){var I=g.f(R(v)),u=A.f;return u?C(I,u(v)):I}},(k,i,t)=>{var n=t(60),o=t(67),g=o.concat("length","prototype");i.f=Object.getOwnPropertyNames||function(R){return n(R,g)}},(k,i,t)=>{var n=t(17),o=t(40),g=t(15),A=t(61).indexOf,R=t(56),C=n([].push);k.exports=function(y,v){var I=g(y),u=0,E=[],O;for(O in I)!o(R,O)&&o(I,O)&&C(E,O);for(;v.length>u;)o(I,O=v[u++])&&(~A(E,O)||C(E,O));return E}},(k,i,t)=>{var n=t(15),o=t(62),g=t(65),A=function(R){return function(C,y,v){var I=n(C),u=g(I),E=o(v,u),O;if(R&&y!=y){for(;u>E;)if(O=I[E++],O!=O)return!0}else for(;u>E;E++)if((R||E in I)&&I[E]===y)return R||E||0;return!R&&-1}};k.exports={includes:A(!0),indexOf:A(!1)}},(k,i,t)=>{var n=t(63),o=Math.max,g=Math.min;k.exports=function(A,R){var C=n(A);return C<0?o(C+R,0):g(C,R)}},(k,i,t)=>{var n=t(64);k.exports=function(o){var g=+o;return g!==g||g===0?0:n(g)}},k=>{var i=Math.ceil,t=Math.floor;k.exports=Math.trunc||function(o){var g=+o;return(g>0?t:i)(g)}},(k,i,t)=>{var n=t(66);k.exports=function(o){return n(o.length)}},(k,i,t)=>{var n=t(63),o=Math.min;k.exports=function(g){return g>0?o(n(g),9007199254740991):0}},k=>{k.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(k,i)=>{i.f=Object.getOwnPropertySymbols},(k,i,t)=>{var n=t(10),o=t(23),g=/#|\.prototype\./,A=function(I,u){var E=C[R(I)];return E==v?!0:E==y?!1:o(u)?n(u):!!u},R=A.normalize=function(I){return String(I).replace(g,".").toLowerCase()},C=A.data={},y=A.NATIVE="N",v=A.POLYFILL="P";k.exports=A},(k,i,t)=>{var n=t(35),o=t(71),g=t(46).f,A=n("unscopables"),R=Array.prototype;R[A]==null&&g(R,A,{configurable:!0,value:o(null)}),k.exports=function(C){R[A][C]=!0}},(k,i,t)=>{var n=t(48),o=t(72),g=t(67),A=t(56),R=t(74),C=t(44),y=t(55),v=">",I="<",u="prototype",E="script",O=y("IE_PROTO"),S=function(){},x=function(a){return I+E+v+a+I+"/"+E+v},L=function(a){a.write(x("")),a.close();var s=a.parentWindow.Object;return a=null,s},c=function(){var a=C("iframe"),s="java"+E+":",m;return a.style.display="none",R.appendChild(a),a.src=String(s),m=a.contentWindow.document,m.open(),m.write(x("document.F=Object")),m.close(),m.F},h,d=function(){try{h=new ActiveXObject("htmlfile")}catch{}d=typeof document<"u"?document.domain&&h?L(h):c():L(h);for(var a=g.length;a--;)delete d[u][g[a]];return d()};A[O]=!0,k.exports=Object.create||function(s,m){var p;return s!==null?(S[u]=n(s),p=new S,S[u]=null,p[O]=s):p=d(),m===void 0?p:o.f(p,m)}},(k,i,t)=>{var n=t(9),o=t(47),g=t(46),A=t(48),R=t(15),C=t(73);i.f=n&&!o?Object.defineProperties:function(v,I){A(v);for(var u=R(I),E=C(I),O=E.length,S=0,x;O>S;)g.f(v,x=E[S++],u[x]);return v}},(k,i,t)=>{var n=t(60),o=t(67);k.exports=Object.keys||function(A){return n(A,o)}},(k,i,t)=>{var n=t(25);k.exports=n("document","documentElement")},(k,i,t)=>{var n=t(7),o=t(17);k.exports=function(g,A){return o(n[g].prototype[A])}},(k,i,t)=>{t(77)},(k,i,t)=>{var n=t(78),o=t(65),g=t(63),A=n.aTypedArray,R=n.exportTypedArrayMethod;R("at",function(y){var v=A(this),I=o(v),u=g(y),E=u>=0?u:I+u;return E<0||E>=I?void 0:v[E]})},(k,i,t)=>{var n=t(79),o=t(9),g=t(7),A=t(23),R=t(22),C=t(40),y=t(80),v=t(33),I=t(45),u=t(49),E=t(46).f,O=t(26),S=t(82),x=t(84),L=t(35),c=t(42),h=t(53),d=h.enforce,a=h.get,s=g.Int8Array,m=s&&s.prototype,p=g.Uint8ClampedArray,T=p&&p.prototype,N=s&&S(s),M=m&&S(m),Q=Object.prototype,q=g.TypeError,X=L("toStringTag"),K=c("TYPED_ARRAY_TAG"),H="TypedArrayConstructor",U=n&&!!x&&y(g.opera)!=="Opera",W=!1,D,J,le,ve={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ce={BigInt64Array:8,BigUint64Array:8},V=function(F){if(!R(F))return!1;var B=y(F);return B==="DataView"||C(ve,B)||C(Ce,B)},_=function(w){var F=S(w);if(R(F)){var B=a(F);return B&&C(B,H)?B[H]:_(F)}},P=function(w){if(!R(w))return!1;var F=y(w);return C(ve,F)||C(Ce,F)},G=function(w){if(P(w))return w;throw q("Target is not a typed array")},z=function(w){if(A(w)&&(!x||O(N,w)))return w;throw q(v(w)+" is not a typed array constructor")},l=function(w,F,B,$){if(o){if(B)for(var Z in ve){var re=g[Z];if(re&&C(re.prototype,w))try{delete re.prototype[w]}catch{try{re.prototype[w]=F}catch{}}}(!M[w]||B)&&u(M,w,B?F:U&&m[w]||F,$)}},b=function(w,F,B){var $,Z;if(o){if(x){if(B){for($ in ve)if(Z=g[$],Z&&C(Z,w))try{delete Z[w]}catch{}}if(!N[w]||B)try{return u(N,w,B?F:U&&N[w]||F)}catch{}else return}for($ in ve)Z=g[$],Z&&(!Z[w]||B)&&u(Z,w,F)}};for(D in ve)J=g[D],le=J&&J.prototype,le?d(le)[H]=J:U=!1;for(D in Ce)J=g[D],le=J&&J.prototype,le&&(d(le)[H]=J);if((!U||!A(N)||N===Function.prototype)&&(N=function(){throw q("Incorrect invocation")},U))for(D in ve)g[D]&&x(g[D],N);if((!U||!M||M===Q)&&(M=N.prototype,U))for(D in ve)g[D]&&x(g[D].prototype,M);if(U&&S(T)!==M&&x(T,M),o&&!C(M,X)){W=!0,E(M,X,{get:function(){return R(this)?this[K]:void 0}});for(D in ve)g[D]&&I(g[D],K,D)}k.exports={NATIVE_ARRAY_BUFFER_VIEWS:U,TYPED_ARRAY_TAG:W&&K,aTypedArray:G,aTypedArrayConstructor:z,exportTypedArrayMethod:l,exportTypedArrayStaticMethod:b,getTypedArrayConstructor:_,isView:V,isTypedArray:P,TypedArray:N,TypedArrayPrototype:M}},k=>{k.exports=typeof ArrayBuffer<"u"&&typeof DataView<"u"},(k,i,t)=>{var n=t(81),o=t(23),g=t(18),A=t(35),R=A("toStringTag"),C=Object,y=g(function(){return arguments}())=="Arguments",v=function(I,u){try{return I[u]}catch{}};k.exports=n?g:function(I){var u,E,O;return I===void 0?"Undefined":I===null?"Null":typeof(E=v(u=C(I),R))=="string"?E:y?g(u):(O=g(u))=="Object"&&o(u.callee)?"Arguments":O}},(k,i,t)=>{var n=t(35),o=n("toStringTag"),g={};g[o]="z",k.exports=String(g)==="[object z]"},(k,i,t)=>{var n=t(40),o=t(23),g=t(41),A=t(55),R=t(83),C=A("IE_PROTO"),y=Object,v=y.prototype;k.exports=R?y.getPrototypeOf:function(I){var u=g(I);if(n(u,C))return u[C];var E=u.constructor;return o(E)&&u instanceof E?E.prototype:u instanceof y?v:null}},(k,i,t)=>{var n=t(10);k.exports=!n(function(){function o(){}return o.prototype.constructor=null,Object.getPrototypeOf(new o)!==o.prototype})},(k,i,t)=>{var n=t(17),o=t(48),g=t(85);k.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var A=!1,R={},C;try{C=n(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),C(R,[]),A=R instanceof Array}catch{}return function(v,I){return o(v),g(I),A?C(v,I):v.__proto__=I,v}}():void 0)},(k,i,t)=>{var n=t(23),o=String,g=TypeError;k.exports=function(A){if(typeof A=="object"||n(A))return A;throw g("Can't set "+o(A)+" as a prototype")}},(k,i,t)=>{t(87),t(93),t(95),t(117),t(119);var n=t(128);k.exports=n.structuredClone},(k,i,t)=>{var n=t(15),o=t(70),g=t(88),A=t(53),R=t(46).f,C=t(89),y=t(37),v=t(9),I="Array Iterator",u=A.set,E=A.getterFor(I);k.exports=C(Array,"Array",function(S,x){u(this,{type:I,target:n(S),index:0,kind:x})},function(){var S=E(this),x=S.target,L=S.kind,c=S.index++;return!x||c>=x.length?(S.target=void 0,{value:void 0,done:!0}):L=="keys"?{value:c,done:!1}:L=="values"?{value:x[c],done:!1}:{value:[c,x[c]],done:!1}},"values");var O=g.Arguments=g.Array;if(o("keys"),o("values"),o("entries"),!y&&v&&O.name!=="values")try{R(O,"name",{value:"values"})}catch{}},k=>{k.exports={}},(k,i,t)=>{var n=t(6),o=t(11),g=t(37),A=t(51),R=t(23),C=t(90),y=t(82),v=t(84),I=t(92),u=t(45),E=t(49),O=t(35),S=t(88),x=t(91),L=A.PROPER,c=A.CONFIGURABLE,h=x.IteratorPrototype,d=x.BUGGY_SAFARI_ITERATORS,a=O("iterator"),s="keys",m="values",p="entries",T=function(){return this};k.exports=function(N,M,Q,q,X,K,H){C(Q,M,q);var U=function(G){if(G===X&&ve)return ve;if(!d&&G in J)return J[G];switch(G){case s:return function(){return new Q(this,G)};case m:return function(){return new Q(this,G)};case p:return function(){return new Q(this,G)}}return function(){return new Q(this)}},W=M+" Iterator",D=!1,J=N.prototype,le=J[a]||J["@@iterator"]||X&&J[X],ve=!d&&le||U(X),Ce=M=="Array"&&J.entries||le,V,_,P;if(Ce&&(V=y(Ce.call(new N)),V!==Object.prototype&&V.next&&(!g&&y(V)!==h&&(v?v(V,h):R(V[a])||E(V,a,T)),I(V,W,!0,!0),g&&(S[W]=T))),L&&X==m&&le&&le.name!==m&&(!g&&c?u(J,"name",m):(D=!0,ve=function(){return o(le,this)})),X)if(_={values:U(m),keys:K?ve:U(s),entries:U(p)},H)for(P in _)(d||D||!(P in J))&&E(J,P,_[P]);else n({target:M,proto:!0,forced:d||D},_);return(!g||H)&&J[a]!==ve&&E(J,a,ve,{name:X}),S[M]=ve,_}},(k,i,t)=>{var n=t(91).IteratorPrototype,o=t(71),g=t(14),A=t(92),R=t(88),C=function(){return this};k.exports=function(y,v,I,u){var E=v+" Iterator";return y.prototype=o(n,{next:g(+!u,I)}),A(y,E,!1,!0),R[E]=C,y}},(k,i,t)=>{var n=t(10),o=t(23),g=t(71),A=t(82),R=t(49),C=t(35),y=t(37),v=C("iterator"),I=!1,u,E,O;[].keys&&(O=[].keys(),"next"in O?(E=A(A(O)),E!==Object.prototype&&(u=E)):I=!0);var S=u==null||n(function(){var x={};return u[v].call(x)!==x});S?u={}:y&&(u=g(u)),o(u[v])||R(u,v,function(){return this}),k.exports={IteratorPrototype:u,BUGGY_SAFARI_ITERATORS:I}},(k,i,t)=>{var n=t(46).f,o=t(40),g=t(35),A=g("toStringTag");k.exports=function(R,C,y){R&&!y&&(R=R.prototype),R&&!o(R,A)&&n(R,A,{configurable:!0,value:C})}},(k,i,t)=>{var n=t(81),o=t(49),g=t(94);n||o(Object.prototype,"toString",g,{unsafe:!0})},(k,i,t)=>{var n=t(81),o=t(80);k.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},(k,i,t)=>{t(96)},(k,i,t)=>{var n=t(97),o=t(114);n("Map",function(g){return function(){return g(this,arguments.length?arguments[0]:void 0)}},o)},(k,i,t)=>{var n=t(6),o=t(7),g=t(17),A=t(69),R=t(49),C=t(98),y=t(105),v=t(111),I=t(23),u=t(22),E=t(10),O=t(112),S=t(92),x=t(113);k.exports=function(L,c,h){var d=L.indexOf("Map")!==-1,a=L.indexOf("Weak")!==-1,s=d?"set":"add",m=o[L],p=m&&m.prototype,T=m,N={},M=function(W){var D=g(p[W]);R(p,W,W=="add"?function(le){return D(this,le===0?0:le),this}:W=="delete"?function(J){return a&&!u(J)?!1:D(this,J===0?0:J)}:W=="get"?function(le){return a&&!u(le)?void 0:D(this,le===0?0:le)}:W=="has"?function(le){return a&&!u(le)?!1:D(this,le===0?0:le)}:function(le,ve){return D(this,le===0?0:le,ve),this})},Q=A(L,!I(m)||!(a||p.forEach&&!E(function(){new m().entries().next()})));if(Q)T=h.getConstructor(c,L,d,s),C.enable();else if(A(L,!0)){var q=new T,X=q[s](a?{}:-0,1)!=q,K=E(function(){q.has(1)}),H=O(function(W){new m(W)}),U=!a&&E(function(){for(var W=new m,D=5;D--;)W[s](D,D);return!W.has(-0)});H||(T=c(function(W,D){v(W,p);var J=x(new m,W,T);return D!=null&&y(D,J[s],{that:J,AS_ENTRIES:d}),J}),T.prototype=p,p.constructor=T),(K||U)&&(M("delete"),M("has"),d&&M("get")),(U||X)&&M(s),a&&p.clear&&delete p.clear}return N[L]=T,n({global:!0,constructor:!0,forced:T!=m},N),S(T,L),a||h.setStrong(T,L,d),T}},(k,i,t)=>{var n=t(6),o=t(17),g=t(56),A=t(22),R=t(40),C=t(46).f,y=t(59),v=t(99),I=t(102),u=t(42),E=t(104),O=!1,S=u("meta"),x=0,L=function(m){C(m,S,{value:{objectID:"O"+x++,weakData:{}}})},c=function(m,p){if(!A(m))return typeof m=="symbol"?m:(typeof m=="string"?"S":"P")+m;if(!R(m,S)){if(!I(m))return"F";if(!p)return"E";L(m)}return m[S].objectID},h=function(m,p){if(!R(m,S)){if(!I(m))return!0;if(!p)return!1;L(m)}return m[S].weakData},d=function(m){return E&&O&&I(m)&&!R(m,S)&&L(m),m},a=function(){s.enable=function(){},O=!0;var m=y.f,p=o([].splice),T={};T[S]=1,m(T).length&&(y.f=function(N){for(var M=m(N),Q=0,q=M.length;Q<q;Q++)if(M[Q]===S){p(M,Q,1);break}return M},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:v.f}))},s=k.exports={enable:a,fastKey:c,getWeakData:h,onFreeze:d};g[S]=!0},(k,i,t)=>{var n=t(18),o=t(15),g=t(59).f,A=t(100),R=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],C=function(y){try{return g(y)}catch{return A(R)}};k.exports.f=function(v){return R&&n(v)=="Window"?C(v):g(o(v))}},(k,i,t)=>{var n=t(62),o=t(65),g=t(101),A=Array,R=Math.max;k.exports=function(C,y,v){for(var I=o(C),u=n(y,I),E=n(v===void 0?I:v,I),O=A(R(E-u,0)),S=0;u<E;u++,S++)g(O,S,C[u]);return O.length=S,O}},(k,i,t)=>{var n=t(20),o=t(46),g=t(14);k.exports=function(A,R,C){var y=n(R);y in A?o.f(A,y,g(0,C)):A[y]=C}},(k,i,t)=>{var n=t(10),o=t(22),g=t(18),A=t(103),R=Object.isExtensible,C=n(function(){});k.exports=C||A?function(v){return!o(v)||A&&g(v)=="ArrayBuffer"?!1:R?R(v):!0}:R},(k,i,t)=>{var n=t(10);k.exports=n(function(){if(typeof ArrayBuffer=="function"){var o=new ArrayBuffer(8);Object.isExtensible(o)&&Object.defineProperty(o,"a",{value:8})}})},(k,i,t)=>{var n=t(10);k.exports=!n(function(){return Object.isExtensible(Object.preventExtensions({}))})},(k,i,t)=>{var n=t(106),o=t(11),g=t(48),A=t(33),R=t(107),C=t(65),y=t(26),v=t(108),I=t(109),u=t(110),E=TypeError,O=function(x,L){this.stopped=x,this.result=L},S=O.prototype;k.exports=function(x,L,c){var h=c&&c.that,d=!!(c&&c.AS_ENTRIES),a=!!(c&&c.IS_RECORD),s=!!(c&&c.IS_ITERATOR),m=!!(c&&c.INTERRUPTED),p=n(L,h),T,N,M,Q,q,X,K,H=function(W){return T&&u(T,"normal",W),new O(!0,W)},U=function(W){return d?(g(W),m?p(W[0],W[1],H):p(W[0],W[1])):m?p(W,H):p(W)};if(a)T=x.iterator;else if(s)T=x;else{if(N=I(x),!N)throw E(A(x)+" is not iterable");if(R(N)){for(M=0,Q=C(x);Q>M;M++)if(q=U(x[M]),q&&y(S,q))return q;return new O(!1)}T=v(x,N)}for(X=a?x.next:T.next;!(K=o(X,T)).done;){try{q=U(K.value)}catch(W){u(T,"throw",W)}if(typeof q=="object"&&q&&y(S,q))return q}return new O(!1)}},(k,i,t)=>{var n=t(17),o=t(32),g=t(12),A=n(n.bind);k.exports=function(R,C){return o(R),C===void 0?R:g?A(R,C):function(){return R.apply(C,arguments)}}},(k,i,t)=>{var n=t(35),o=t(88),g=n("iterator"),A=Array.prototype;k.exports=function(R){return R!==void 0&&(o.Array===R||A[g]===R)}},(k,i,t)=>{var n=t(11),o=t(32),g=t(48),A=t(33),R=t(109),C=TypeError;k.exports=function(y,v){var I=arguments.length<2?R(y):v;if(o(I))return g(n(I,y));throw C(A(y)+" is not iterable")}},(k,i,t)=>{var n=t(80),o=t(31),g=t(88),A=t(35),R=A("iterator");k.exports=function(C){if(C!=null)return o(C,R)||o(C,"@@iterator")||g[n(C)]}},(k,i,t)=>{var n=t(11),o=t(48),g=t(31);k.exports=function(A,R,C){var y,v;o(A);try{if(y=g(A,"return"),!y){if(R==="throw")throw C;return C}y=n(y,A)}catch(I){v=!0,y=I}if(R==="throw")throw C;if(v)throw y;return o(y),C}},(k,i,t)=>{var n=t(26),o=TypeError;k.exports=function(g,A){if(n(A,g))return g;throw o("Incorrect invocation")}},(k,i,t)=>{var n=t(35),o=n("iterator"),g=!1;try{var A=0,R={next:function(){return{done:!!A++}},return:function(){g=!0}};R[o]=function(){return this},Array.from(R,function(){throw 2})}catch{}k.exports=function(C,y){if(!y&&!g)return!1;var v=!1;try{var I={};I[o]=function(){return{next:function(){return{done:v=!0}}}},C(I)}catch{}return v}},(k,i,t)=>{var n=t(23),o=t(22),g=t(84);k.exports=function(A,R,C){var y,v;return g&&n(y=R.constructor)&&y!==C&&o(v=y.prototype)&&v!==C.prototype&&g(A,v),A}},(k,i,t)=>{var n=t(46).f,o=t(71),g=t(115),A=t(106),R=t(111),C=t(105),y=t(89),v=t(116),I=t(9),u=t(98).fastKey,E=t(53),O=E.set,S=E.getterFor;k.exports={getConstructor:function(x,L,c,h){var d=x(function(T,N){R(T,a),O(T,{type:L,index:o(null),first:void 0,last:void 0,size:0}),I||(T.size=0),N!=null&&C(N,T[h],{that:T,AS_ENTRIES:c})}),a=d.prototype,s=S(L),m=function(T,N,M){var Q=s(T),q=p(T,N),X,K;return q?q.value=M:(Q.last=q={index:K=u(N,!0),key:N,value:M,previous:X=Q.last,next:void 0,removed:!1},Q.first||(Q.first=q),X&&(X.next=q),I?Q.size++:T.size++,K!=="F"&&(Q.index[K]=q)),T},p=function(T,N){var M=s(T),Q=u(N),q;if(Q!=="F")return M.index[Q];for(q=M.first;q;q=q.next)if(q.key==N)return q};return g(a,{clear:function(){for(var N=this,M=s(N),Q=M.index,q=M.first;q;)q.removed=!0,q.previous&&(q.previous=q.previous.next=void 0),delete Q[q.index],q=q.next;M.first=M.last=void 0,I?M.size=0:N.size=0},delete:function(T){var N=this,M=s(N),Q=p(N,T);if(Q){var q=Q.next,X=Q.previous;delete M.index[Q.index],Q.removed=!0,X&&(X.next=q),q&&(q.previous=X),M.first==Q&&(M.first=q),M.last==Q&&(M.last=X),I?M.size--:N.size--}return!!Q},forEach:function(N){for(var M=s(this),Q=A(N,arguments.length>1?arguments[1]:void 0),q;q=q?q.next:M.first;)for(Q(q.value,q.key,this);q&&q.removed;)q=q.previous},has:function(N){return!!p(this,N)}}),g(a,c?{get:function(N){var M=p(this,N);return M&&M.value},set:function(N,M){return m(this,N===0?0:N,M)}}:{add:function(N){return m(this,N=N===0?0:N,N)}}),I&&n(a,"size",{get:function(){return s(this).size}}),d},setStrong:function(x,L,c){var h=L+" Iterator",d=S(L),a=S(h);y(x,L,function(s,m){O(this,{type:h,target:s,state:d(s),kind:m,last:void 0})},function(){for(var s=a(this),m=s.kind,p=s.last;p&&p.removed;)p=p.previous;return!s.target||!(s.last=p=p?p.next:s.state.first)?(s.target=void 0,{value:void 0,done:!0}):m=="keys"?{value:p.key,done:!1}:m=="values"?{value:p.value,done:!1}:{value:[p.key,p.value],done:!1}},c?"entries":"values",!c,!0),v(L)}}},(k,i,t)=>{var n=t(49);k.exports=function(o,g,A){for(var R in g)n(o,R,g[R],A);return o}},(k,i,t)=>{var n=t(25),o=t(46),g=t(35),A=t(9),R=g("species");k.exports=function(C){var y=n(C),v=o.f;A&&y&&!y[R]&&v(y,R,{configurable:!0,get:function(){return this}})}},(k,i,t)=>{t(118)},(k,i,t)=>{var n=t(97),o=t(114);n("Set",function(g){return function(){return g(this,arguments.length?arguments[0]:void 0)}},o)},(k,i,t)=>{var n=t(37),o=t(6),g=t(7),A=t(25),R=t(17),C=t(10),y=t(42),v=t(23),I=t(120),u=t(22),E=t(24),O=t(105),S=t(48),x=t(80),L=t(40),c=t(101),h=t(45),d=t(65),a=t(121),s=t(122),m=t(124),p=t(29),T=t(125),N=t(126),M=t(127),Q=g.Object,q=g.Date,X=g.Error,K=g.EvalError,H=g.RangeError,U=g.ReferenceError,W=g.SyntaxError,D=g.TypeError,J=g.URIError,le=g.PerformanceMark,ve=g.WebAssembly,Ce=ve&&ve.CompileError||X,V=ve&&ve.LinkError||X,_=ve&&ve.RuntimeError||X,P=A("DOMException"),G=A("Set"),z=A("Map"),l=z.prototype,b=R(l.has),w=R(l.get),F=R(l.set),B=R(G.prototype.add),$=A("Object","keys"),Z=R([].push),re=R((!0).valueOf),ie=R(1 .valueOf),ce=R("".valueOf),oe=R(q.prototype.getTime),ue=y("structuredClone"),me="DataCloneError",ye="Transferring",_e=function(ge){return!C(function(){var Re=new g.Set([7]),Le=ge(Re),de=ge(Q(7));return Le==Re||!Le.has(7)||typeof de!="object"||de!=7})&&ge},Ee=function(ge,Re){return!C(function(){var Le=new Re,de=ge({a:Le,b:Le});return!(de&&de.a===de.b&&de.a instanceof Re&&de.a.stack===Le.stack)})},Me=function(ge){return!C(function(){var Re=ge(new g.AggregateError([1],ue,{cause:3}));return Re.name!="AggregateError"||Re.errors[0]!=1||Re.message!=ue||Re.cause!=3})},Ae=g.structuredClone,Ve=n||!Ee(Ae,X)||!Ee(Ae,P)||!Me(Ae),Ke=!Ae&&_e(function(ge){return new le(ue,{detail:ge}).detail}),Fe=_e(Ae)||Ke,we=function(ge){throw new P("Uncloneable type: "+ge,me)},ae=function(ge,Re){throw new P((Re||"Cloning")+" of "+ge+" cannot be properly polyfilled in this engine",me)},be=function(ge,Re){if(E(ge)&&we("Symbol"),!u(ge))return ge;if(Re){if(b(Re,ge))return w(Re,ge)}else Re=new z;var Le=x(ge),de=!1,ee,ne,pe,Oe,Ne,he,se,Se,ke,Be;switch(Le){case"Array":pe=[],de=!0;break;case"Object":pe={},de=!0;break;case"Map":pe=new z,de=!0;break;case"Set":pe=new G,de=!0;break;case"RegExp":pe=new RegExp(ge.source,s(ge));break;case"Error":switch(ne=ge.name,ne){case"AggregateError":pe=A("AggregateError")([]);break;case"EvalError":pe=K();break;case"RangeError":pe=H();break;case"ReferenceError":pe=U();break;case"SyntaxError":pe=W();break;case"TypeError":pe=D();break;case"URIError":pe=J();break;case"CompileError":pe=Ce();break;case"LinkError":pe=V();break;case"RuntimeError":pe=_();break;default:pe=X()}de=!0;break;case"DOMException":pe=new P(ge.message,ge.name),de=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":ee=g[Le],u(ee)||ae(Le),pe=new ee(be(ge.buffer,Re),ge.byteOffset,Le==="DataView"?ge.byteLength:ge.length);break;case"DOMQuad":try{pe=new DOMQuad(be(ge.p1,Re),be(ge.p2,Re),be(ge.p3,Re),be(ge.p4,Re))}catch{Fe?pe=Fe(ge):ae(Le)}break;case"FileList":if(ee=g.DataTransfer,I(ee)){for(Oe=new ee,Ne=0,he=d(ge);Ne<he;Ne++)Oe.items.add(be(ge[Ne],Re));pe=Oe.files}else Fe?pe=Fe(ge):ae(Le);break;case"ImageData":try{pe=new ImageData(be(ge.data,Re),ge.width,ge.height,{colorSpace:ge.colorSpace})}catch{Fe?pe=Fe(ge):ae(Le)}break;default:if(Fe)pe=Fe(ge);else switch(Le){case"BigInt":pe=Q(ge.valueOf());break;case"Boolean":pe=Q(re(ge));break;case"Number":pe=Q(ie(ge));break;case"String":pe=Q(ce(ge));break;case"Date":pe=new q(oe(ge));break;case"ArrayBuffer":ee=g.DataView,!ee&&typeof ge.slice!="function"&&ae(Le);try{if(typeof ge.slice=="function")pe=ge.slice(0);else for(he=ge.byteLength,pe=new ArrayBuffer(he),ke=new ee(ge),Be=new ee(pe),Ne=0;Ne<he;Ne++)Be.setUint8(Ne,ke.getUint8(Ne))}catch{throw new P("ArrayBuffer is detached",me)}break;case"SharedArrayBuffer":pe=ge;break;case"Blob":try{pe=ge.slice(0,ge.size,ge.type)}catch{ae(Le)}break;case"DOMPoint":case"DOMPointReadOnly":ee=g[Le];try{pe=ee.fromPoint?ee.fromPoint(ge):new ee(ge.x,ge.y,ge.z,ge.w)}catch{ae(Le)}break;case"DOMRect":case"DOMRectReadOnly":ee=g[Le];try{pe=ee.fromRect?ee.fromRect(ge):new ee(ge.x,ge.y,ge.width,ge.height)}catch{ae(Le)}break;case"DOMMatrix":case"DOMMatrixReadOnly":ee=g[Le];try{pe=ee.fromMatrix?ee.fromMatrix(ge):new ee(ge)}catch{ae(Le)}break;case"AudioData":case"VideoFrame":v(ge.clone)||ae(Le);try{pe=ge.clone()}catch{we(Le)}break;case"File":try{pe=new File([ge],ge.name,ge)}catch{ae(Le)}break;case"CryptoKey":case"GPUCompilationMessage":case"GPUCompilationInfo":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ae(Le);default:we(Le)}}if(F(Re,ge,pe),de)switch(Le){case"Array":case"Object":for(se=$(ge),Ne=0,he=d(se);Ne<he;Ne++)Se=se[Ne],c(pe,Se,be(ge[Se],Re));break;case"Map":ge.forEach(function(Ge,Ue){F(pe,be(Ue,Re),be(Ge,Re))});break;case"Set":ge.forEach(function(Ge){B(pe,be(Ge,Re))});break;case"Error":h(pe,"message",be(ge.message,Re)),L(ge,"cause")&&h(pe,"cause",be(ge.cause,Re)),ne=="AggregateError"&&(pe.errors=be(ge.errors,Re));case"DOMException":m&&h(pe,"stack",be(ge.stack,Re))}return pe},De=Ae&&!C(function(){if(N&&p>92||M&&p>94||T&&p>97)return!1;var ge=new ArrayBuffer(8),Re=Ae(ge,{transfer:[ge]});return ge.byteLength!=0||Re.byteLength!=8}),Ye=function(ge,Re){if(!u(ge))throw D("Transfer option cannot be converted to a sequence");var Le=[];O(ge,function(ke){Z(Le,S(ke))});var de=0,ee=d(Le),ne,pe,Oe,Ne,he,se,Se;if(De)for(Ne=Ae(Le,{transfer:Le});de<ee;)F(Re,Le[de],Ne[de++]);else for(;de<ee;){if(ne=Le[de++],b(Re,ne))throw new P("Duplicate transferable",me);switch(pe=x(ne),pe){case"ImageBitmap":Oe=g.OffscreenCanvas,I(Oe)||ae(pe,ye);try{se=new Oe(ne.width,ne.height),Se=se.getContext("bitmaprenderer"),Se.transferFromImageBitmap(ne),he=se.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":(!v(ne.clone)||!v(ne.close))&&ae(pe,ye);try{he=ne.clone(),ne.close()}catch{}break;case"ArrayBuffer":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":ae(pe,ye)}if(he===void 0)throw new P("This object cannot be transferred: "+pe,me);F(Re,ne,he)}};o({global:!0,enumerable:!0,sham:!De,forced:Ve},{structuredClone:function(Re){var Le=a(arguments.length,1)>1&&arguments[1]!=null?S(arguments[1]):void 0,de=Le?Le.transfer:void 0,ee;return de!==void 0&&(ee=new z,Ye(de,ee)),be(Re,ee)}})},(k,i,t)=>{var n=t(17),o=t(10),g=t(23),A=t(80),R=t(25),C=t(52),y=function(){},v=[],I=R("Reflect","construct"),u=/^\s*(?:class|function)\b/,E=n(u.exec),O=!u.exec(y),S=function(c){if(!g(c))return!1;try{return I(y,v,c),!0}catch{return!1}},x=function(c){if(!g(c))return!1;switch(A(c)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return O||!!E(u,C(c))}catch{return!0}};x.sham=!0,k.exports=!I||o(function(){var L;return S(S.call)||!S(Object)||!S(function(){L=!0})||L})?x:S},k=>{var i=TypeError;k.exports=function(t,n){if(t<n)throw i("Not enough arguments");return t}},(k,i,t)=>{var n=t(11),o=t(40),g=t(26),A=t(123),R=RegExp.prototype;k.exports=function(C){var y=C.flags;return y===void 0&&!("flags"in R)&&!o(C,"flags")&&g(R,C)?n(A,C):y}},(k,i,t)=>{var n=t(48);k.exports=function(){var o=n(this),g="";return o.hasIndices&&(g+="d"),o.global&&(g+="g"),o.ignoreCase&&(g+="i"),o.multiline&&(g+="m"),o.dotAll&&(g+="s"),o.unicode&&(g+="u"),o.unicodeSets&&(g+="v"),o.sticky&&(g+="y"),g}},(k,i,t)=>{var n=t(10),o=t(14);k.exports=!n(function(){var g=Error("a");return"stack"in g?(Object.defineProperty(g,"stack",o(1,7)),g.stack!==7):!0})},(k,i,t)=>{var n=t(126),o=t(127);k.exports=!n&&!o&&typeof window=="object"&&typeof document=="object"},k=>{k.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"},(k,i,t)=>{var n=t(18),o=t(7);k.exports=n(o.process)=="process"},(k,i,t)=>{var n=t(7);k.exports=n},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(130),_display_utils=__w_pdfjs_require__(133),_font_loader=__w_pdfjs_require__(136),_canvas=__w_pdfjs_require__(137),_worker_options=__w_pdfjs_require__(140),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(141),_metadata=__w_pdfjs_require__(142),_optional_content_config=__w_pdfjs_require__(143),_transport_stream=__w_pdfjs_require__(144),_xfa_text=__w_pdfjs_require__(145);function _classPrivateMethodInitSpec(k,i){_checkPrivateRedeclaration(k,i),i.add(k)}function _classPrivateMethodGet(k,i,t){if(!i.has(k))throw new TypeError("attempted to get private field on non-instance");return t}function _classPrivateFieldInitSpec(k,i,t){_checkPrivateRedeclaration(k,i),i.set(k,t)}function _checkPrivateRedeclaration(k,i){if(i.has(k))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(k,i,t){var n=_classExtractFieldDescriptor(k,i,"set");return _classApplyDescriptorSet(k,n,t),t}function _classPrivateFieldGet(k,i){var t=_classExtractFieldDescriptor(k,i,"get");return _classApplyDescriptorGet(k,t)}function _classExtractFieldDescriptor(k,i,t){if(!i.has(k))throw new TypeError("attempted to "+t+" private field on non-instance");return i.get(k)}function _classStaticPrivateFieldSpecSet(k,i,t,n){return _classCheckPrivateStaticAccess(k,i),_classCheckPrivateStaticFieldDescriptor(t,"set"),_classApplyDescriptorSet(k,t,n),n}function _classApplyDescriptorSet(k,i,t){if(i.set)i.set.call(k,t);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=t}}function _classStaticPrivateFieldSpecGet(k,i,t){return _classCheckPrivateStaticAccess(k,i),_classCheckPrivateStaticFieldDescriptor(t,"get"),_classApplyDescriptorGet(k,t)}function _classCheckPrivateStaticFieldDescriptor(k,i){if(k===void 0)throw new TypeError("attempted to "+i+" private static field before its declaration")}function _classCheckPrivateStaticAccess(k,i){if(k!==i)throw new TypeError("Private static access of wrong provenance")}function _classApplyDescriptorGet(k,i){return i.get?i.get.call(k):i.value}const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:k,NodeCMapReaderFactory:i,NodeStandardFontDataFactory:t}=__w_pdfjs_require__(146);exports.DefaultCanvasFactory=DefaultCanvasFactory=k,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=i,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=t}let createPDFNetworkStream;function setPDFNetworkStreamFactory(k){createPDFNetworkStream=k}function getDocument(k){const i=new PDFDocumentLoadingTask;let t;if(typeof k=="string"||k instanceof URL)t={url:k};else if((0,_util.isArrayBuffer)(k))t={data:k};else if(k instanceof PDFDataRangeTransport)t={range:k};else{if(typeof k!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!k.url&&!k.data&&!k.range)throw new Error("Invalid parameter object: need either .data, .range or .url");t=k}const n=Object.create(null);let o=null,g=null;for(const R in t){const C=t[R];switch(R){case"url":if(typeof window<"u")try{n[R]=new URL(C,window.location).href;continue}catch(y){(0,_util.warn)(`Cannot create valid URL: "${y}".`)}else if(typeof C=="string"||C instanceof URL){n[R]=C.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":o=C;continue;case"worker":g=C;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&C instanceof Buffer)n[R]=new Uint8Array(C);else{if(C instanceof Uint8Array)break;if(typeof C=="string")n[R]=(0,_util.stringToBytes)(C);else if(typeof C=="object"&&C!==null&&!isNaN(C.length))n[R]=new Uint8Array(C);else if((0,_util.isArrayBuffer)(C))n[R]=new Uint8Array(C);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}n[R]=C}if(n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory,n.StandardFontDataFactory=n.StandardFontDataFactory||DefaultStandardFontDataFactory,n.ignoreErrors=n.stopAtErrors!==!0,n.fontExtraProperties=n.fontExtraProperties===!0,n.pdfBug=n.pdfBug===!0,n.enableXfa=n.enableXfa===!0,(!Number.isInteger(n.rangeChunkSize)||n.rangeChunkSize<1)&&(n.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof n.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(n.docBaseUrl))&&(n.docBaseUrl=null),(!Number.isInteger(n.maxImageSize)||n.maxImageSize<-1)&&(n.maxImageSize=-1),typeof n.cMapUrl!="string"&&(n.cMapUrl=null),typeof n.standardFontDataUrl!="string"&&(n.standardFontDataUrl=null),typeof n.useWorkerFetch!="boolean"&&(n.useWorkerFetch=n.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&n.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof n.isEvalSupported!="boolean"&&(n.isEvalSupported=!0),typeof n.disableFontFace!="boolean"&&(n.disableFontFace=_is_node.isNodeJS),typeof n.useSystemFonts!="boolean"&&(n.useSystemFonts=!_is_node.isNodeJS&&!n.disableFontFace),(typeof n.ownerDocument!="object"||n.ownerDocument===null)&&(n.ownerDocument=globalThis.document),typeof n.disableRange!="boolean"&&(n.disableRange=!1),typeof n.disableStream!="boolean"&&(n.disableStream=!1),typeof n.disableAutoFetch!="boolean"&&(n.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(n.verbosity),!g){const R={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};g=R.port?PDFWorker.fromPort(R):new PDFWorker(R),i._worker=g}const A=i.docId;return g.promise.then(function(){if(i.destroyed)throw new Error("Loading aborted");const R=_fetchDocument(g,n,o,A),C=new Promise(function(y){let v;o?v=new _transport_stream.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,contentDispositionFilename:n.contentDispositionFilename,disableRange:n.disableRange,disableStream:n.disableStream},o):n.data||(v=createPDFNetworkStream({url:n.url,length:n.length,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream})),y(v)});return Promise.all([R,C]).then(function(y){let[v,I]=y;if(i.destroyed)throw new Error("Loading aborted");const u=new _message_handler.MessageHandler(A,v,g.port),E=new WorkerTransport(u,i,I,n);i._transport=E,u.send("Ready",null)})}).catch(i._capability.reject),i}async function _fetchDocument(k,i,t,n){if(k.destroyed)throw new Error("Worker was destroyed");t&&(i.length=t.length,i.initialData=t.initialData,i.progressiveDone=t.progressiveDone,i.contentDispositionFilename=t.contentDispositionFilename);const o=await k.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.16.105",source:{data:i.data,url:i.url,password:i.password,disableAutoFetch:i.disableAutoFetch,rangeChunkSize:i.rangeChunkSize,length:i.length},maxImageSize:i.maxImageSize,disableFontFace:i.disableFontFace,docBaseUrl:i.docBaseUrl,ignoreErrors:i.ignoreErrors,isEvalSupported:i.isEvalSupported,fontExtraProperties:i.fontExtraProperties,enableXfa:i.enableXfa,useSystemFonts:i.useSystemFonts,cMapUrl:i.useWorkerFetch?i.cMapUrl:null,standardFontDataUrl:i.useWorkerFetch?i.standardFontDataUrl:null});if(i.data&&(i.data=null),k.destroyed)throw new Error("Worker was destroyed");return o}class PDFDocumentLoadingTask{constructor(){var i,t;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_classStaticPrivateFieldSpecSet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId,(i=_classStaticPrivateFieldSpecGet(PDFDocumentLoadingTask,PDFDocumentLoadingTask,_docId),t=i++,i)),t}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var i;this.destroyed=!0,await((i=this._transport)===null||i===void 0?void 0:i.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;var _docId={writable:!0,value:0};class PDFDataRangeTransport{constructor(i,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this.length=i,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=o,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(i){this._rangeListeners.push(i)}addProgressListener(i){this._progressListeners.push(i)}addProgressiveReadListener(i){this._progressiveReadListeners.push(i)}addProgressiveDoneListener(i){this._progressiveDoneListeners.push(i)}onDataRange(i,t){for(const n of this._rangeListeners)n(i,t)}onDataProgress(i,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(i,t)})}onDataProgressiveRead(i){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(i)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const i of this._progressiveDoneListeners)i()})}transportReady(){this._readyCapability.resolve()}requestDataRange(i,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(i,t){this._pdfInfo=i,this._transport=t,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(i){return this._transport.getPage(i)}getPageIndex(i){return this._transport.getPageIndex(i)}getDestinations(){return this._transport.getDestinations()}getDestination(i){return this._transport.getDestination(i)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this._transport.startCleanup(i||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(i,t,n,o){let g=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;this._pageIndex=i,this._pageInfo=t,this._ownerDocument=o,this._transport=n,this._stats=g?new _display_utils.StatTimer:null,this._pdfBug=g,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:i,rotation:t=this.rotate,offsetX:n=0,offsetY:o=0,dontFlip:g=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:i,rotation:t,offsetX:n,offsetY:o,dontFlip:g})}getAnnotations(){let{intent:i="display"}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=this._transport.getRenderingIntent(i);let n=this._annotationPromises.get(t.cacheKey);return n||(n=this._transport.getAnnotations(this._pageIndex,t.renderingIntent),this._annotationPromises.set(t.cacheKey,n),n=n.then(o=>{for(const g of o)g.titleObj!==void 0&&Object.defineProperty(g,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),g.titleObj.str}}),g.contentsObj!==void 0&&Object.defineProperty(g,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),g.contentsObj.str}});return o})),n}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var i;return((i=this._transport._htmlForXfa)===null||i===void 0?void 0:i.children[this._pageIndex])||null}render(i){var t,n,o;let{canvasContext:g,viewport:A,intent:R="display",annotationMode:C=_util.AnnotationMode.ENABLE,transform:y=null,imageLayer:v=null,canvasFactory:I=null,background:u=null,optionalContentConfigPromise:E=null,annotationCanvasMap:O=null,pageColors:S=null,printAnnotationStorage:x=null}=i;((t=arguments[0])===null||t===void 0?void 0:t.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&C===_util.AnnotationMode.ENABLE&&(C=_util.AnnotationMode.ENABLE_FORMS)),((n=arguments[0])===null||n===void 0?void 0:n.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&C===_util.AnnotationMode.ENABLE&&(C=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const L=this._transport.getRenderingIntent(R,C,x);this.pendingCleanup=!1,E||(E=this._transport.getOptionalContentConfig());let c=this._intentStates.get(L.cacheKey);c||(c=Object.create(null),this._intentStates.set(L.cacheKey,c)),c.streamReaderCancelTimeout&&(clearTimeout(c.streamReaderCancelTimeout),c.streamReaderCancelTimeout=null);const h=I||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),d=!!(L.renderingIntent&_util.RenderingIntentFlag.PRINT);c.displayReadyCapability||(c.displayReadyCapability=(0,_util.createPromiseCapability)(),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(L));const a=p=>{c.renderTasks.delete(s),(this.cleanupAfterRender||d)&&(this.pendingCleanup=!0),this._tryCleanup(),p?(s.capability.reject(p),this._abortOperatorList({intentState:c,reason:p instanceof Error?p:new Error(p)})):s.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},s=new InternalRenderTask({callback:a,params:{canvasContext:g,viewport:A,transform:y,imageLayer:v,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:O,operatorList:c.operatorList,pageIndex:this._pageIndex,canvasFactory:h,useRequestAnimationFrame:!d,pdfBug:this._pdfBug,pageColors:S});((o=c).renderTasks||(o.renderTasks=new Set)).add(s);const m=s.task;return Promise.all([c.displayReadyCapability.promise,E]).then(p=>{let[T,N]=p;if(this.pendingCleanup){a();return}this._stats&&this._stats.time("Rendering"),s.initializeGraphics({transparency:T,optionalContentConfig:N}),s.operatorListChanged()}).catch(a),m}getOperatorList(){let{intent:i="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:n=null}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};function o(){A.operatorList.lastChunk&&(A.opListReadCapability.resolve(A.operatorList),A.renderTasks.delete(R))}const g=this._transport.getRenderingIntent(i,t,n,!0);let A=this._intentStates.get(g.cacheKey);A||(A=Object.create(null),this._intentStates.set(g.cacheKey,A));let R;if(!A.opListReadCapability){var C;R=Object.create(null),R.operatorListChanged=o,A.opListReadCapability=(0,_util.createPromiseCapability)(),((C=A).renderTasks||(C.renderTasks=new Set)).add(R),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(g)}return A.opListReadCapability.promise}streamTextContent(){let{disableCombineTextItems:i=!1,includeMarkedContent:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:i!==!0,includeMarkedContent:t===!0},{highWaterMark:100,size(o){return o.items.length}})}getTextContent(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(n=>_xfa_text.XfaText.textContent(n));const t=this.streamTextContent(i);return new Promise(function(n,o){function g(){A.read().then(function(C){let{value:y,done:v}=C;if(v){n(R);return}Object.assign(R.styles,y.styles),R.items.push(...y.items),g()},o)}const A=t.getReader(),R={items:[],styles:Object.create(null)};g()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const i=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)i.push(n.completed),n.cancel();this.objs.clear();for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(i)}cleanup(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return this.pendingCleanup=!0,this._tryCleanup(i)}_tryCleanup(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,i&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(i,t){const n=this._intentStates.get(t);n&&(this._stats&&this._stats.timeEnd("Page Request"),n.displayReadyCapability&&n.displayReadyCapability.resolve(i))}_renderPageChunk(i,t){for(let n=0,o=i.length;n<o;n++)t.operatorList.fnArray.push(i.fnArray[n]),t.operatorList.argsArray.push(i.argsArray[n]);t.operatorList.lastChunk=i.lastChunk,t.operatorList.separateAnnots=i.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();i.lastChunk&&this._tryCleanup()}_pumpOperatorList(i){let{renderingIntent:t,cacheKey:n,annotationStorageMap:o}=i;const A=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:o}).getReader(),R=this._intentStates.get(n);R.streamReader=A;const C=()=>{A.read().then(y=>{let{value:v,done:I}=y;if(I){R.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(v,R),C())},y=>{if(R.streamReader=null,!this._transport.destroyed){if(R.operatorList){R.operatorList.lastChunk=!0;for(const v of R.renderTasks)v.operatorListChanged();this._tryCleanup()}if(R.displayReadyCapability)R.displayReadyCapability.reject(y);else if(R.opListReadCapability)R.opListReadCapability.reject(y);else throw y}})};C()}_abortOperatorList(i){let{intentState:t,reason:n,force:o=!1}=i;if(t.streamReader){if(!o){if(t.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){t.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:t,reason:n,force:!0}),t.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(t.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[g,A]of this._intentStates)if(A===t){this._intentStates.delete(g);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(i,t){const n={data:structuredClone(i,t)};this._deferred.then(()=>{for(const o of this._listeners)o.call(this,n)})}addEventListener(i,t){this._listeners.push(t)}removeEventListener(i,t){const n=this._listeners.indexOf(t);this._listeners.splice(n,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){var _document,_document$currentScri;const k=(_document=document)===null||_document===void 0||(_document$currentScri=_document.currentScript)===null||_document$currentScri===void 0?void 0:_document$currentScri.src;k&&(PDFWorkerUtil.fallbackWorkerSrc=k.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(k,i){let t;try{if(t=new URL(k),!t.origin||t.origin==="null")return!1}catch{return!1}const n=new URL(i,t);return t.origin===n.origin},PDFWorkerUtil.createCDNWrapper=function(k){const i=`importScripts("${k}");`;return URL.createObjectURL(new Blob([i]))}}class PDFWorker{constructor(){let{name:k=null,port:i=null,verbosity:t=(0,_util.getVerbosityLevel)()}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(i&&_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).has(i))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=k,this.destroyed=!1,this.verbosity=t,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,i){_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).set(i,this),this._initializeFromPort(i);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(k){this._port=k,this._messageHandler=new _message_handler.MessageHandler("main","worker",k),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:k}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,k)||(k=PDFWorkerUtil.createCDNWrapper(new URL(k,window.location).href));const i=new Worker(k),t=new _message_handler.MessageHandler("main","worker",i),n=()=>{i.removeEventListener("error",o),t.destroy(),i.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},o=()=>{this._webWorker||n()};i.addEventListener("error",o),t.on("test",A=>{if(i.removeEventListener("error",o),this.destroyed){n();return}A?(this._messageHandler=t,this._port=i,this._webWorker=i,this._readyCapability.resolve(),t.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),t.destroy(),i.terminate())}),t.on("ready",A=>{if(i.removeEventListener("error",o),this.destroyed){n();return}try{g()}catch{this._setupFakeWorker()}});const g=()=>{const A=new Uint8Array;t.send("test",A,[A.buffer])};g();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(k=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const i=new LoopbackPort;this._port=i;const t=`fake${PDFWorkerUtil.fakeWorkerId++}`,n=new _message_handler.MessageHandler(t+"_worker",t,i);k.setup(n,i);const o=new _message_handler.MessageHandler(t,t+"_worker",i);this._messageHandler=o,this._readyCapability.resolve(),o.send("configure",{verbosity:this.verbosity})}).catch(k=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${k.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_classStaticPrivateFieldSpecGet(PDFWorker,PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(k){if(!(k!=null&&k.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return _classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).has(k.port)?_classStaticPrivateFieldSpecGet(this,PDFWorker,_workerPorts).get(k.port):new PDFWorker(k)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var k;return((k=globalThis.pdfjsWorker)===null||k===void 0?void 0:k.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;var _workerPorts={value:new WeakMap};PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(i,t,n,o){_classPrivateFieldInitSpec(this,_docStats,{writable:!0,value:null}),_classPrivateFieldInitSpec(this,_pageCache,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_pagePromises,{writable:!0,value:new Map}),_classPrivateFieldInitSpec(this,_metadataPromise,{writable:!0,value:null}),this.messageHandler=i,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:t.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:o.ownerDocument,styleElement:o.styleElement}),this._params=o,o.useWorkerFetch||(this.CMapReaderFactory=new o.CMapReaderFactory({baseUrl:o.cMapUrl,isCompressed:o.cMapPacked}),this.StandardFontDataFactory=new o.StandardFontDataFactory({baseUrl:o.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(this,_docStats)}getRenderingIntent(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:_util.AnnotationMode.ENABLE,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,g=_util.RenderingIntentFlag.DISPLAY,A=null;switch(i){case"any":g=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":g=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${i}`)}switch(t){case _util.AnnotationMode.DISABLE:g+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:g+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:g+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,A=(g&_util.RenderingIntentFlag.PRINT&&n instanceof _annotation_storage.PrintAnnotationStorage?n:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${t}`)}return o&&(g+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:g,cacheKey:`${g}_${_annotation_storage.AnnotationStorage.getHash(A)}`,annotationStorageMap:A}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const i=[];for(const n of _classPrivateFieldGet(this,_pageCache).values())i.push(n._destroy());_classPrivateFieldGet(this,_pageCache).clear(),_classPrivateFieldGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return i.push(t),Promise.all(i).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:i,loadingTask:t}=this;i.on("GetReader",(n,o)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=g=>{this._lastProgress={loaded:g.loaded,total:g.total}},o.onPull=()=>{this._fullReader.read().then(function(g){let{value:A,done:R}=g;if(R){o.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(A),"GetReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(A),1,[A])}).catch(g=>{o.error(g)})},o.onCancel=g=>{this._fullReader.cancel(g),o.ready.catch(A=>{if(!this.destroyed)throw A})}}),i.on("ReaderHeadersReady",n=>{const o=(0,_util.createPromiseCapability)(),g=this._fullReader;return g.headersReady.then(()=>{if(!g.isStreamingSupported||!g.isRangeSupported){if(this._lastProgress){var A;(A=t.onProgress)===null||A===void 0||A.call(t,this._lastProgress)}g.onProgress=R=>{var C;(C=t.onProgress)===null||C===void 0||C.call(t,{loaded:R.loaded,total:R.total})}}o.resolve({isStreamingSupported:g.isStreamingSupported,isRangeSupported:g.isRangeSupported,contentLength:g.contentLength})},o.reject),o.promise}),i.on("GetRangeReader",(n,o)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const g=this._networkStream.getRangeReader(n.begin,n.end);if(!g){o.close();return}o.onPull=()=>{g.read().then(function(A){let{value:R,done:C}=A;if(C){o.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(R),"GetRangeReader - expected an ArrayBuffer."),o.enqueue(new Uint8Array(R),1,[R])}).catch(A=>{o.error(A)})},o.onCancel=A=>{g.cancel(A),o.ready.catch(R=>{if(!this.destroyed)throw R})}}),i.on("GetDoc",n=>{let{pdfInfo:o}=n;this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(o,this))}),i.on("DocException",function(n){let o;switch(n.name){case"PasswordException":o=new _util.PasswordException(n.message,n.code);break;case"InvalidPDFException":o=new _util.InvalidPDFException(n.message);break;case"MissingPDFException":o=new _util.MissingPDFException(n.message);break;case"UnexpectedResponseException":o=new _util.UnexpectedResponseException(n.message,n.status);break;case"UnknownErrorException":o=new _util.UnknownErrorException(n.message,n.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(o)}),i.on("PasswordRequest",n=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),t.onPassword){const o=g=>{g instanceof Error?this._passwordCapability.reject(g):this._passwordCapability.resolve({password:g})};try{t.onPassword(o,n.code)}catch(g){this._passwordCapability.reject(g)}}else this._passwordCapability.reject(new _util.PasswordException(n.message,n.code));return this._passwordCapability.promise}),i.on("DataLoaded",n=>{var o;(o=t.onProgress)===null||o===void 0||o.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),i.on("StartRenderPage",n=>{if(this.destroyed)return;_classPrivateFieldGet(this,_pageCache).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),i.on("commonobj",n=>{var o;let[g,A,R]=n;if(!this.destroyed&&!this.commonObjs.has(g))switch(A){case"Font":const C=this._params;if("error"in R){const I=R.error;(0,_util.warn)(`Error during font loading: ${I}`),this.commonObjs.resolve(g,I);break}let y=null;C.pdfBug&&(o=globalThis.FontInspector)!==null&&o!==void 0&&o.enabled&&(y={registerFont(I,u){globalThis.FontInspector.fontAdded(I,u)}});const v=new _font_loader.FontFaceObject(R,{isEvalSupported:C.isEvalSupported,disableFontFace:C.disableFontFace,ignoreErrors:C.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:y});this.fontLoader.bind(v).catch(I=>i.sendWithPromise("FontFallback",{id:g})).finally(()=>{!C.fontExtraProperties&&v.data&&(v.data=null),this.commonObjs.resolve(g,v)});break;case"FontPath":case"Image":this.commonObjs.resolve(g,R);break;default:throw new Error(`Got unknown common object type ${A}`)}}),i.on("obj",n=>{let[o,g,A,R]=n;if(this.destroyed)return;const C=_classPrivateFieldGet(this,_pageCache).get(g);if(!C.objs.has(o))switch(A){case"Image":C.objs.resolve(o,R);const v=8e6;if(R){let I;if(R.bitmap){const{bitmap:u,width:E,height:O}=R;I=E*O*4,C._bitmaps.add(u)}else{var y;I=((y=R.data)===null||y===void 0?void 0:y.length)||0}I>v&&(C.cleanupAfterRender=!0)}break;case"Pattern":C.objs.resolve(o,R);break;default:throw new Error(`Got unknown object type ${A}`)}}),i.on("DocProgress",n=>{var o;this.destroyed||(o=t.onProgress)===null||o===void 0||o.call(t,{loaded:n.loaded,total:n.total})}),i.on("DocStats",n=>{this.destroyed||_classPrivateFieldSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(n.streamTypes),fontTypes:Object.freeze(n.fontTypes)}))}),i.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),i.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),i.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature(i){var t,n;let{featureId:o}=i;this.destroyed||(t=(n=this.loadingTask).onUnsupportedFeature)===null||t===void 0||t.call(n,o)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(i){if(!Number.isInteger(i)||i<=0||i>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=i-1,n=_classPrivateFieldGet(this,_pagePromises).get(t);if(n)return n;const o=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(g=>{if(this.destroyed)throw new Error("Transport destroyed");const A=new PDFPageProxy(t,g,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(this,_pageCache).set(t,A),A});return _classPrivateFieldGet(this,_pagePromises).set(t,o),o}getPageIndex(i){return typeof i!="object"||i===null||!Number.isInteger(i.num)||i.num<0||!Number.isInteger(i.gen)||i.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:i.num,gen:i.gen})}getAnnotations(i,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:i,intent:t})}saveDocument(){var i,t;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(i=(t=this._fullReader)===null||t===void 0?void 0:t.filename)!==null&&i!==void 0?i:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(i){return typeof i!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:i})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(i){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:i})}getStructTree(i){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:i})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(i=>new _optional_content_config.OptionalContentConfig(i))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(this,_metadataPromise)||_classPrivateFieldSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then(i=>{var t,n,o,g;return{info:i[0],metadata:i[1]?new _metadata.Metadata(i[1]):null,contentDispositionFilename:(t=(n=this._fullReader)===null||n===void 0?void 0:n.filename)!==null&&t!==void 0?t:null,contentLength:(o=(g=this._fullReader)===null||g===void 0?void 0:g.contentLength)!==null&&o!==void 0?o:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const t of _classPrivateFieldGet(this,_pageCache).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),i||this.fontLoader.clear(),_classPrivateFieldSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const i=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:i.disableAutoFetch,enableXfa:i.enableXfa})}}var _objs=new WeakMap,_ensureObj=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_ensureObj),_classPrivateFieldInitSpec(this,_objs,{writable:!0,value:Object.create(null)})}get(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(t){const o=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,i);return o.capability.promise.then(()=>t(o.data)),null}const n=_classPrivateFieldGet(this,_objs)[i];if(!(n!=null&&n.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${i}.`);return n.data}has(i){const t=_classPrivateFieldGet(this,_objs)[i];return t?.capability.settled||!1}resolve(i){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const n=_classPrivateMethodGet(this,_ensureObj,_ensureObj2).call(this,i);n.data=t,n.capability.resolve()}clear(){_classPrivateFieldSet(this,_objs,Object.create(null))}}function _ensureObj2(k){const i=_classPrivateFieldGet(this,_objs)[k];return i||(_classPrivateFieldGet(this,_objs)[k]={capability:(0,_util.createPromiseCapability)(),data:null})}var _internalRenderTask=new WeakMap;class RenderTask{constructor(i){_classPrivateFieldInitSpec(this,_internalRenderTask,{writable:!0,value:null}),_classPrivateFieldSet(this,_internalRenderTask,i),this.onContinue=null}get promise(){return _classPrivateFieldGet(this,_internalRenderTask).capability.promise}cancel(){_classPrivateFieldGet(this,_internalRenderTask).cancel()}get separateAnnots(){const{separateAnnots:i}=_classPrivateFieldGet(this,_internalRenderTask).operatorList;if(!i)return!1;const{annotationCanvasMap:t}=_classPrivateFieldGet(this,_internalRenderTask);return i.form||i.canvas&&t?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor(i){let{callback:t,params:n,objs:o,commonObjs:g,annotationCanvasMap:A,operatorList:R,pageIndex:C,canvasFactory:y,useRequestAnimationFrame:v=!1,pdfBug:I=!1,pageColors:u=null}=i;this.callback=t,this.params=n,this.objs=o,this.commonObjs=g,this.annotationCanvasMap=A,this.operatorListIdx=null,this.operatorList=R,this._pageIndex=C,this.canvasFactory=y,this._pdfBug=I,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=v===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(i){var t;let{transparency:n=!1,optionalContentConfig:o}=i;if(this.cancelled)return;if(this._canvas){if(_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).add(this._canvas)}this._pdfBug&&(t=globalThis.StepperManager)!==null&&t!==void 0&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:g,viewport:A,transform:R,imageLayer:C,background:y}=this.params;this.gfx=new _canvas.CanvasGraphics(g,this.commonObjs,this.objs,this.canvasFactory,C,o,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:R,viewport:A,transparency:n,background:y}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback(i||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&_classStaticPrivateFieldSpecGet(InternalRenderTask,InternalRenderTask,_canvasInUse).delete(this._canvas),this.callback())))}}var _canvasInUse={value:new WeakSet};const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PrintAnnotationStorage=i.AnnotationStorage=void 0;var n=t(1),o=t(131),g=t(135);function A(d,a,s){E(d,a),a.set(d,s)}function R(d,a){var s=v(d,a,"get");return C(d,s)}function C(d,a){return a.get?a.get.call(d):a.value}function y(d,a,s){var m=v(d,a,"set");return I(d,m,s),s}function v(d,a,s){if(!a.has(d))throw new TypeError("attempted to "+s+" private field on non-instance");return a.get(d)}function I(d,a,s){if(a.set)a.set.call(d,s);else{if(!a.writable)throw new TypeError("attempted to set read only private field");a.value=s}}function u(d,a){E(d,a),a.add(d)}function E(d,a){if(a.has(d))throw new TypeError("Cannot initialize the same private elements twice on an object")}function O(d,a,s){if(!a.has(d))throw new TypeError("attempted to get private field on non-instance");return s}var S=new WeakSet;class x{constructor(){u(this,S),this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(a,s){const m=this._storage.get(a);return m===void 0?s:Object.assign(s,m)}getRawValue(a){return this._storage.get(a)}remove(a){if(this._storage.delete(a),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const s of this._storage.values())if(s instanceof o.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(a,s){const m=this._storage.get(a);let p=!1;if(m!==void 0)for(const[T,N]of Object.entries(s))m[T]!==N&&(p=!0,m[T]=N);else p=!0,this._storage.set(a,s);p&&O(this,S,L).call(this),s instanceof o.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(s.constructor._type)}has(a){return this._storage.has(a)}getAll(){return this._storage.size>0?(0,n.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new h(this)}get serializable(){if(this._storage.size===0)return null;const a=new Map;for(const[s,m]of this._storage){const p=m instanceof o.AnnotationEditor?m.serialize():m;p&&a.set(s,p)}return a}static getHash(a){if(!a)return"";const s=new g.MurmurHash3_64;for(const[m,p]of a)s.update(`${m}:${JSON.stringify(p)}`);return s.hexdigest()}}i.AnnotationStorage=x;function L(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}var c=new WeakMap;class h extends x{constructor(a){super(),A(this,c,{writable:!0,value:null}),y(this,c,structuredClone(a.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return R(this,c)}}i.PrintAnnotationStorage=h},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditor=void 0;var n=t(132),o=t(1);function g(d,a,s){return a in d?Object.defineProperty(d,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):d[a]=s,d}function A(d,a,s){R(d,a),a.set(d,s)}function R(d,a){if(a.has(d))throw new TypeError("Cannot initialize the same private elements twice on an object")}function C(d,a,s){var m=I(d,a,"set");return y(d,m,s),s}function y(d,a,s){if(a.set)a.set.call(d,s);else{if(!a.writable)throw new TypeError("attempted to set read only private field");a.value=s}}function v(d,a){var s=I(d,a,"get");return u(d,s)}function I(d,a,s){if(!a.has(d))throw new TypeError("attempted to "+s+" private field on non-instance");return a.get(d)}function u(d,a){return a.get?a.get.call(d):a.value}var E=new WeakMap,O=new WeakMap,S=new WeakMap,x=new WeakMap,L=new WeakMap,c=new WeakMap;class h{constructor(a){A(this,E,{writable:!0,value:this.focusin.bind(this)}),A(this,O,{writable:!0,value:this.focusout.bind(this)}),A(this,S,{writable:!0,value:!1}),A(this,x,{writable:!0,value:!1}),A(this,L,{writable:!0,value:!1}),A(this,c,{writable:!0,value:h._zIndex++}),this.constructor===h&&(0,o.unreachable)("Cannot initialize AnnotationEditor."),this.parent=a.parent,this.id=a.id,this.width=this.height=null,this.pageIndex=a.parent.pageIndex,this.name=a.name,this.div=null;const[s,m]=this.parent.viewportBaseDimensions;this.x=a.x/s,this.y=a.y/m,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,o.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=v(this,c)}focusin(a){v(this,S)?C(this,S,!1):this.parent.setSelected(this)}focusout(a){if(!this.isAttachedToDOM)return;const s=a.relatedTarget;s!=null&&s.closest(`#${this.id}`)||(a.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(a){const s=this.parent.div.getBoundingClientRect();this.startX=a.clientX-s.x,this.startY=a.clientY-s.y,a.dataTransfer.setData("text/plain",this.id),a.dataTransfer.effectAllowed="move"}setAt(a,s,m,p){const[T,N]=this.parent.viewportBaseDimensions;[m,p]=this.screenToPageTranslation(m,p),this.x=(a+m)/T,this.y=(s+p)/N,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(a,s){const[m,p]=this.parent.viewportBaseDimensions;[a,s]=this.screenToPageTranslation(a,s),this.x+=a/m,this.y+=s/p,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(a,s){const{rotation:m}=this.parent.viewport;switch(m){case 90:return[s,-a];case 180:return[-a,-s];case 270:return[-s,a];default:return[a,s]}}setDims(a,s){const[m,p]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*a/m}%`,this.div.style.height=`${100*s/p}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",v(this,E)),this.div.addEventListener("focusout",v(this,O));const[a,s]=this.getInitialTranslation();return this.translate(a,s),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(a){const s=n.KeyboardManager.platform.isMac;if(a.button!==0||a.ctrlKey&&s){a.preventDefault();return}a.ctrlKey&&!s||a.shiftKey||a.metaKey&&s?this.parent.toggleSelected(this):this.parent.setSelected(this),C(this,S,!0)}getRect(a,s){const[m,p]=this.parent.viewportBaseDimensions,[T,N]=this.parent.pageDimensions,M=T*a/m,Q=N*s/p,q=this.x*T,X=this.y*N,K=this.width*T,H=this.height*N;switch(this.rotation){case 0:return[q+M,N-X-Q-H,q+M+K,N-X-Q];case 90:return[q+Q,N-X+M,q+Q+H,N-X+M+K];case 180:return[q-M-K,N-X+Q,q-M,N-X+Q+H];case 270:return[q-Q-H,N-X-M-K,q-Q,N-X-M];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(a,s){const[m,p,T,N]=a,M=T-m,Q=N-p;switch(this.rotation){case 0:return[m,s-N,M,Q];case 90:return[m,s-p,Q,M];case 180:return[T,s-p,M,Q];case 270:return[T,s-N,Q,M];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){C(this,L,!0)}disableEditMode(){C(this,L,!1)}isInEditMode(){return v(this,L)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var a;(a=this.div)===null||a===void 0||a.addEventListener("focusin",v(this,E))}serialize(){(0,o.unreachable)("An editor must be serializable")}static deserialize(a,s){const m=new this.prototype.constructor({parent:s,id:s.getNextId()});m.rotation=a.rotation;const[p,T]=s.pageDimensions,[N,M,Q,q]=m.getRectInCurrentCoords(a.rect,T);return m.x=N/p,m.y=M/T,m.width=Q/p,m.height=q/T,m}remove(){this.div.removeEventListener("focusin",v(this,E)),this.div.removeEventListener("focusout",v(this,O)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var a;(a=this.div)===null||a===void 0||a.classList.add("selectedEditor")}unselect(){var a;(a=this.div)===null||a===void 0||a.classList.remove("selectedEditor")}updateParams(a,s){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return v(this,x)}set isEditing(a){C(this,x,a),a?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}i.AnnotationEditor=h,g(h,"_colorManager",new n.ColorManager),g(h,"_zIndex",1)},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardManager=i.CommandManager=i.ColorManager=i.AnnotationEditorUIManager=void 0,i.bindEvents=S,i.opacityToHex=x;var n=t(1),o=t(133);function g(we,ae,be){return ae in we?Object.defineProperty(we,ae,{value:be,enumerable:!0,configurable:!0,writable:!0}):we[ae]=be,we}function A(we,ae){y(we,ae),ae.add(we)}function R(we,ae,be){if(!ae.has(we))throw new TypeError("attempted to get private field on non-instance");return be}function C(we,ae,be){y(we,ae),ae.set(we,be)}function y(we,ae){if(ae.has(we))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(we,ae,be){var De=E(we,ae,"set");return I(we,De,be),be}function I(we,ae,be){if(ae.set)ae.set.call(we,be);else{if(!ae.writable)throw new TypeError("attempted to set read only private field");ae.value=be}}function u(we,ae){var be=E(we,ae,"get");return O(we,be)}function E(we,ae,be){if(!ae.has(we))throw new TypeError("attempted to "+be+" private field on non-instance");return ae.get(we)}function O(we,ae){return ae.get?ae.get.call(we):ae.value}function S(we,ae,be){for(const De of be)ae.addEventListener(De,we[De].bind(we))}function x(we){return Math.round(Math.min(255,Math.max(1,255*we))).toString(16).padStart(2,"0")}var L=new WeakMap;class c{constructor(){C(this,L,{writable:!0,value:0})}getId(){var ae,be;return`${n.AnnotationEditorPrefix}${v(this,L,(ae=u(this,L),be=ae++,ae)),be}`}}var h=new WeakMap,d=new WeakMap,a=new WeakMap,s=new WeakMap;class m{constructor(){let ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:128;C(this,h,{writable:!0,value:[]}),C(this,d,{writable:!0,value:!1}),C(this,a,{writable:!0,value:void 0}),C(this,s,{writable:!0,value:-1}),v(this,a,ae)}add(ae){let{cmd:be,undo:De,mustExec:Ye,type:ge=NaN,overwriteIfSameType:Re=!1,keepUndo:Le=!1}=ae;if(Ye&&be(),u(this,d))return;const de={cmd:be,undo:De,type:ge};if(u(this,s)===-1){u(this,h).length>0&&(u(this,h).length=0),v(this,s,0),u(this,h).push(de);return}if(Re&&u(this,h)[u(this,s)].type===ge){Le&&(de.undo=u(this,h)[u(this,s)].undo),u(this,h)[u(this,s)]=de;return}const ee=u(this,s)+1;ee===u(this,a)?u(this,h).splice(0,1):(v(this,s,ee),ee<u(this,h).length&&u(this,h).splice(ee)),u(this,h).push(de)}undo(){u(this,s)!==-1&&(v(this,d,!0),u(this,h)[u(this,s)].undo(),v(this,d,!1),v(this,s,u(this,s)-1))}redo(){u(this,s)<u(this,h).length-1&&(v(this,s,u(this,s)+1),v(this,d,!0),u(this,h)[u(this,s)].cmd(),v(this,d,!1))}hasSomethingToUndo(){return u(this,s)!==-1}hasSomethingToRedo(){return u(this,s)<u(this,h).length-1}destroy(){v(this,h,null)}}i.CommandManager=m;var p=new WeakSet;class T{constructor(ae){A(this,p),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const be=T.platform.isMac;for(const[De,Ye]of ae)for(const ge of De){const Re=ge.startsWith("mac+");be&&Re?(this.callbacks.set(ge.slice(4),Ye),this.allKeys.add(ge.split("+").at(-1))):!be&&!Re&&(this.callbacks.set(ge,Ye),this.allKeys.add(ge.split("+").at(-1)))}}static get platform(){const ae=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:ae.includes("Win"),isMac:ae.includes("Mac")})}exec(ae,be){if(!this.allKeys.has(be.key))return;const De=this.callbacks.get(R(this,p,N).call(this,be));De&&(De.bind(ae)(),be.stopPropagation(),be.preventDefault())}}i.KeyboardManager=T;function N(we){we.altKey&&this.buffer.push("alt"),we.ctrlKey&&this.buffer.push("ctrl"),we.metaKey&&this.buffer.push("meta"),we.shiftKey&&this.buffer.push("shift"),this.buffer.push(we.key);const ae=this.buffer.join("+");return this.buffer.length=0,ae}var M=new WeakMap;class Q{constructor(){C(this,M,{writable:!0,value:null})}copy(ae){ae&&(Array.isArray(ae)?v(this,M,ae.map(be=>be.serialize())):v(this,M,[ae.serialize()]),v(this,M,u(this,M).filter(be=>!!be)),u(this,M).length===0&&v(this,M,null))}paste(){return u(this,M)}isEmpty(){return u(this,M)===null}destroy(){v(this,M,null)}}class q{get _colors(){const ae=new Map([["CanvasText",null],["Canvas",null]]);return(0,o.getColorValues)(ae),(0,n.shadow)(this,"_colors",ae)}convert(ae){const be=(0,o.getRGB)(ae);if(!window.matchMedia("(forced-colors: active)").matches)return be;for(const[De,Ye]of this._colors)if(Ye.every((ge,Re)=>ge===be[Re]))return q._colorsMapping.get(De);return be}getHexCode(ae){const be=this._colors.get(ae);return be?n.Util.makeHexColor(...be):ae}}i.ColorManager=q,g(q,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var X=new WeakMap,K=new WeakMap,H=new WeakMap,U=new WeakMap,W=new WeakMap,D=new WeakMap,J=new WeakMap,le=new WeakMap,ve=new WeakMap,Ce=new WeakMap,V=new WeakMap,_=new WeakMap,P=new WeakMap,G=new WeakMap,z=new WeakMap,l=new WeakMap,b=new WeakMap,w=new WeakSet,F=new WeakSet,B=new WeakSet,$=new WeakSet,Z=new WeakSet,re=new WeakSet,ie=new WeakSet,ce=new WeakSet,oe=new WeakSet;class ue{constructor(ae,be){A(this,oe),A(this,ce),A(this,ie),A(this,re),A(this,Z),A(this,$),A(this,B),A(this,F),A(this,w),C(this,X,{writable:!0,value:null}),C(this,K,{writable:!0,value:new Map}),C(this,H,{writable:!0,value:new Map}),C(this,U,{writable:!0,value:new Q}),C(this,W,{writable:!0,value:new m}),C(this,D,{writable:!0,value:0}),C(this,J,{writable:!0,value:null}),C(this,le,{writable:!0,value:null}),C(this,ve,{writable:!0,value:new c}),C(this,Ce,{writable:!0,value:!1}),C(this,V,{writable:!0,value:n.AnnotationEditorType.NONE}),C(this,_,{writable:!0,value:new Set}),C(this,P,{writable:!0,value:this.keydown.bind(this)}),C(this,G,{writable:!0,value:this.onEditingAction.bind(this)}),C(this,z,{writable:!0,value:this.onPageChanging.bind(this)}),C(this,l,{writable:!0,value:{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}}),C(this,b,{writable:!0,value:null}),v(this,b,ae),v(this,le,be),u(this,le)._on("editingaction",u(this,G)),u(this,le)._on("pagechanging",u(this,z))}destroy(){R(this,F,ye).call(this),u(this,le)._off("editingaction",u(this,G)),u(this,le)._off("pagechanging",u(this,z));for(const ae of u(this,H).values())ae.destroy();u(this,H).clear(),u(this,K).clear(),v(this,X,null),u(this,_).clear(),u(this,U).destroy(),u(this,W).destroy()}onPageChanging(ae){let{pageNumber:be}=ae;v(this,D,be-1)}focusMainContainer(){u(this,b).focus()}keydown(ae){var be;(be=this.getActive())!==null&&be!==void 0&&be.shouldGetKeyboardEvents()||ue._keyboardManager.exec(this,ae)}onEditingAction(ae){["undo","redo","cut","copy","paste","delete","selectAll"].includes(ae.name)&&this[ae.name]()}setEditingState(ae){ae?(R(this,w,me).call(this),R(this,B,_e).call(this,{isEditing:u(this,V)!==n.AnnotationEditorType.NONE,isEmpty:R(this,ce,Ke).call(this),hasSomethingToUndo:u(this,W).hasSomethingToUndo(),hasSomethingToRedo:u(this,W).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:u(this,U).isEmpty()})):(R(this,F,ye).call(this),R(this,B,_e).call(this,{isEditing:!1}))}registerEditorTypes(ae){v(this,J,ae);for(const be of u(this,J))R(this,$,Ee).call(this,be.defaultPropertiesToUpdate)}getId(){return u(this,ve).getId()}addLayer(ae){u(this,H).set(ae.pageIndex,ae),u(this,Ce)?ae.enable():ae.disable()}removeLayer(ae){u(this,H).delete(ae.pageIndex)}updateMode(ae){if(v(this,V,ae),ae===n.AnnotationEditorType.NONE)this.setEditingState(!1),R(this,re,Ae).call(this);else{this.setEditingState(!0),R(this,Z,Me).call(this);for(const be of u(this,H).values())be.updateMode(ae)}}updateToolbar(ae){ae!==u(this,V)&&u(this,le).dispatch("switchannotationeditormode",{source:this,mode:ae})}updateParams(ae,be){for(const De of u(this,_))De.updateParams(ae,be);for(const De of u(this,J))De.updateDefaultParams(ae,be)}getEditors(ae){const be=[];for(const De of u(this,K).values())De.pageIndex===ae&&be.push(De);return be}getEditor(ae){return u(this,K).get(ae)}addEditor(ae){u(this,K).set(ae.id,ae)}removeEditor(ae){u(this,K).delete(ae.id),this.unselect(ae)}setActiveEditor(ae){u(this,X)!==ae&&(v(this,X,ae),ae&&R(this,$,Ee).call(this,ae.propertiesToUpdate))}toggleSelected(ae){if(u(this,_).has(ae)){u(this,_).delete(ae),ae.unselect(),R(this,B,_e).call(this,{hasSelectedEditor:this.hasSelection});return}u(this,_).add(ae),ae.select(),R(this,$,Ee).call(this,ae.propertiesToUpdate),R(this,B,_e).call(this,{hasSelectedEditor:!0})}setSelected(ae){for(const be of u(this,_))be!==ae&&be.unselect();u(this,_).clear(),u(this,_).add(ae),ae.select(),R(this,$,Ee).call(this,ae.propertiesToUpdate),R(this,B,_e).call(this,{hasSelectedEditor:!0})}isSelected(ae){return u(this,_).has(ae)}unselect(ae){ae.unselect(),u(this,_).delete(ae),R(this,B,_e).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return u(this,_).size!==0}undo(){u(this,W).undo(),R(this,B,_e).call(this,{hasSomethingToUndo:u(this,W).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:R(this,ce,Ke).call(this)})}redo(){u(this,W).redo(),R(this,B,_e).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:u(this,W).hasSomethingToRedo(),isEmpty:R(this,ce,Ke).call(this)})}addCommands(ae){u(this,W).add(ae),R(this,B,_e).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:R(this,ce,Ke).call(this)})}delete(){if(u(this,X)&&u(this,X).commitOrRemove(),!this.hasSelection)return;const ae=[...u(this,_)],be=()=>{for(const Ye of ae)Ye.remove()},De=()=>{for(const Ye of ae)R(this,ie,Ve).call(this,Ye)};this.addCommands({cmd:be,undo:De,mustExec:!0})}copy(){if(u(this,X)&&u(this,X).commitOrRemove(),this.hasSelection){const ae=[];for(const be of u(this,_))be.isEmpty()||ae.push(be);if(ae.length===0)return;u(this,U).copy(ae),R(this,B,_e).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(u(this,U).isEmpty())return;this.unselectAll();const ae=u(this,H).get(u(this,D)),be=u(this,U).paste().map(ge=>ae.deserialize(ge)),De=()=>{for(const ge of be)R(this,ie,Ve).call(this,ge);R(this,oe,Fe).call(this,be)},Ye=()=>{for(const ge of be)ge.remove()};this.addCommands({cmd:De,undo:Ye,mustExec:!0})}selectAll(){for(const ae of u(this,_))ae.commit();R(this,oe,Fe).call(this,u(this,K).values())}unselectAll(){if(u(this,X)){u(this,X).commitOrRemove();return}if(R(this,oe,Fe).size!==0){for(const ae of u(this,_))ae.unselect();u(this,_).clear(),R(this,B,_e).call(this,{hasSelectedEditor:!1})}}isActive(ae){return u(this,X)===ae}getActive(){return u(this,X)}getMode(){return u(this,V)}}i.AnnotationEditorUIManager=ue;function me(){u(this,b).addEventListener("keydown",u(this,P))}function ye(){u(this,b).removeEventListener("keydown",u(this,P))}function _e(we){Object.entries(we).some(be=>{let[De,Ye]=be;return u(this,l)[De]!==Ye})&&u(this,le).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(u(this,l),we)})}function Ee(we){u(this,le).dispatch("annotationeditorparamschanged",{source:this,details:we})}function Me(){if(!u(this,Ce)){v(this,Ce,!0);for(const we of u(this,H).values())we.enable()}}function Ae(){if(this.unselectAll(),u(this,Ce)){v(this,Ce,!1);for(const we of u(this,H).values())we.disable()}}function Ve(we){const ae=u(this,H).get(we.pageIndex);ae?ae.addOrRebuild(we):this.addEditor(we)}function Ke(){if(u(this,K).size===0)return!0;if(u(this,K).size===1)for(const we of u(this,K).values())return we.isEmpty();return!1}function Fe(we){u(this,_).clear();for(const ae of we)ae.isEmpty()||(u(this,_).add(ae),ae.select());R(this,B,_e).call(this,{hasSelectedEditor:!0})}g(ue,"_keyboardManager",new T([[["ctrl+a","mac+meta+a"],ue.prototype.selectAll],[["ctrl+c","mac+meta+c"],ue.prototype.copy],[["ctrl+v","mac+meta+v"],ue.prototype.paste],[["ctrl+x","mac+meta+x"],ue.prototype.cut],[["ctrl+z","mac+meta+z"],ue.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],ue.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],ue.prototype.delete],[["Escape","mac+Escape"],ue.prototype.unselectAll]]))},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.StatTimer=i.RenderingCancelledException=i.PixelsPerInch=i.PageViewport=i.PDFDateString=i.DOMStandardFontDataFactory=i.DOMSVGFactory=i.DOMCanvasFactory=i.DOMCMapReaderFactory=i.AnnotationPrefix=void 0,i.deprecated=m,i.getColorValues=Q,i.getCurrentTransform=q,i.getCurrentTransformInverse=X,i.getFilenameFromUrl=c,i.getPdfFilenameFromUrl=h,i.getRGB=M,i.getXfaPageViewport=N,i.isDataScheme=x,i.isPdfFile=L,i.isValidFetchUrl=a,i.loadScript=s;var n=t(134),o=t(1);function g(K,H,U){return H in K?Object.defineProperty(K,H,{value:U,enumerable:!0,configurable:!0,writable:!0}):K[H]=U,K}const A="http://www.w3.org/2000/svg",R="pdfjs_internal_id_";i.AnnotationPrefix=R;class C{}i.PixelsPerInch=C,g(C,"CSS",96),g(C,"PDF",72),g(C,"PDF_TO_CSS_UNITS",C.CSS/C.PDF);class y extends n.BaseCanvasFactory{constructor(){let{ownerDocument:H=globalThis.document}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this._document=H}_createCanvas(H,U){const W=this._document.createElement("canvas");return W.width=H,W.height=U,W}}i.DOMCanvasFactory=y;async function v(K){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(a(K,document.baseURI)){const U=await fetch(K);if(!U.ok)throw new Error(U.statusText);return H?new Uint8Array(await U.arrayBuffer()):(0,o.stringToBytes)(await U.text())}return new Promise((U,W)=>{const D=new XMLHttpRequest;D.open("GET",K,!0),H&&(D.responseType="arraybuffer"),D.onreadystatechange=()=>{if(D.readyState===XMLHttpRequest.DONE){if(D.status===200||D.status===0){let J;if(H&&D.response?J=new Uint8Array(D.response):!H&&D.responseText&&(J=(0,o.stringToBytes)(D.responseText)),J){U(J);return}}W(new Error(D.statusText))}},D.send(null)})}class I extends n.BaseCMapReaderFactory{_fetchData(H,U){return v(H,this.isCompressed).then(W=>({cMapData:W,compressionType:U}))}}i.DOMCMapReaderFactory=I;class u extends n.BaseStandardFontDataFactory{_fetchData(H){return v(H,!0)}}i.DOMStandardFontDataFactory=u;class E extends n.BaseSVGFactory{_createSVG(H){return document.createElementNS(A,H)}}i.DOMSVGFactory=E;class O{constructor(H){let{viewBox:U,scale:W,rotation:D,offsetX:J=0,offsetY:le=0,dontFlip:ve=!1}=H;this.viewBox=U,this.scale=W,this.rotation=D,this.offsetX=J,this.offsetY=le;const Ce=(U[2]+U[0])/2,V=(U[3]+U[1])/2;let _,P,G,z;switch(D%=360,D<0&&(D+=360),D){case 180:_=-1,P=0,G=0,z=1;break;case 90:_=0,P=1,G=1,z=0;break;case 270:_=0,P=-1,G=-1,z=0;break;case 0:_=1,P=0,G=0,z=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ve&&(G=-G,z=-z);let l,b,w,F;_===0?(l=Math.abs(V-U[1])*W+J,b=Math.abs(Ce-U[0])*W+le,w=Math.abs(U[3]-U[1])*W,F=Math.abs(U[2]-U[0])*W):(l=Math.abs(Ce-U[0])*W+J,b=Math.abs(V-U[1])*W+le,w=Math.abs(U[2]-U[0])*W,F=Math.abs(U[3]-U[1])*W),this.transform=[_*W,P*W,G*W,z*W,l-_*W*Ce-G*W*V,b-P*W*Ce-z*W*V],this.width=w,this.height=F}clone(){let{scale:H=this.scale,rotation:U=this.rotation,offsetX:W=this.offsetX,offsetY:D=this.offsetY,dontFlip:J=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new O({viewBox:this.viewBox.slice(),scale:H,rotation:U,offsetX:W,offsetY:D,dontFlip:J})}convertToViewportPoint(H,U){return o.Util.applyTransform([H,U],this.transform)}convertToViewportRectangle(H){const U=o.Util.applyTransform([H[0],H[1]],this.transform),W=o.Util.applyTransform([H[2],H[3]],this.transform);return[U[0],U[1],W[0],W[1]]}convertToPdfPoint(H,U){return o.Util.applyInverseTransform([H,U],this.transform)}}i.PageViewport=O;class S extends o.BaseException{constructor(H,U){super(H,"RenderingCancelledException"),this.type=U}}i.RenderingCancelledException=S;function x(K){const H=K.length;let U=0;for(;U<H&&K[U].trim()==="";)U++;return K.substring(U,U+5).toLowerCase()==="data:"}function L(K){return typeof K=="string"&&/\.pdf$/i.test(K)}function c(K){const H=K.indexOf("#"),U=K.indexOf("?"),W=Math.min(H>0?H:K.length,U>0?U:K.length);return K.substring(K.lastIndexOf("/",W)+1,W)}function h(K){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"document.pdf";if(typeof K!="string")return H;if(x(K))return(0,o.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),H;const U=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,W=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,D=U.exec(K);let J=W.exec(D[1])||W.exec(D[2])||W.exec(D[3]);if(J&&(J=J[0],J.includes("%")))try{J=W.exec(decodeURIComponent(J))[0]}catch{}return J||H}class d{constructor(){this.started=Object.create(null),this.times=[]}time(H){H in this.started&&(0,o.warn)(`Timer is already running for ${H}`),this.started[H]=Date.now()}timeEnd(H){H in this.started||(0,o.warn)(`Timer has not been started for ${H}`),this.times.push({name:H,start:this.started[H],end:Date.now()}),delete this.started[H]}toString(){const H=[];let U=0;for(const W of this.times){const D=W.name;D.length>U&&(U=D.length)}for(const W of this.times){const D=W.end-W.start;H.push(`${W.name.padEnd(U)} ${D}ms
`)}return H.join("")}}i.StatTimer=d;function a(K,H){try{const{protocol:U}=H?new URL(K,H):new URL(K);return U==="http:"||U==="https:"}catch{return!1}}function s(K){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return new Promise((U,W)=>{const D=document.createElement("script");D.src=K,D.onload=function(J){H&&D.remove(),U(J)},D.onerror=function(){W(new Error(`Cannot load script at: ${D.src}`))},(document.head||document.documentElement).append(D)})}function m(K){console.log("Deprecated API usage: "+K)}let p;class T{static toDateObject(H){if(!H||typeof H!="string")return null;p||(p=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const U=p.exec(H);if(!U)return null;const W=parseInt(U[1],10);let D=parseInt(U[2],10);D=D>=1&&D<=12?D-1:0;let J=parseInt(U[3],10);J=J>=1&&J<=31?J:1;let le=parseInt(U[4],10);le=le>=0&&le<=23?le:0;let ve=parseInt(U[5],10);ve=ve>=0&&ve<=59?ve:0;let Ce=parseInt(U[6],10);Ce=Ce>=0&&Ce<=59?Ce:0;const V=U[7]||"Z";let _=parseInt(U[8],10);_=_>=0&&_<=23?_:0;let P=parseInt(U[9],10)||0;return P=P>=0&&P<=59?P:0,V==="-"?(le+=_,ve+=P):V==="+"&&(le-=_,ve-=P),new Date(Date.UTC(W,D,J,le,ve,Ce))}}i.PDFDateString=T;function N(K,H){let{scale:U=1,rotation:W=0}=H;const{width:D,height:J}=K.attributes.style,le=[0,0,parseInt(D),parseInt(J)];return new O({viewBox:le,scale:U,rotation:W})}function M(K){if(K.startsWith("#")){const H=parseInt(K.slice(1),16);return[(H&16711680)>>16,(H&65280)>>8,H&255]}return K.startsWith("rgb(")?K.slice(4,-1).split(",").map(H=>parseInt(H)):K.startsWith("rgba(")?K.slice(5,-1).split(",").map(H=>parseInt(H)).slice(0,3):((0,o.warn)(`Not a valid color format: "${K}"`),[0,0,0])}function Q(K){const H=document.createElement("span");H.style.visibility="hidden",document.body.append(H);for(const U of K.keys()){H.style.color=U;const W=window.getComputedStyle(H).color;K.set(U,M(W))}H.remove()}function q(K){const{a:H,b:U,c:W,d:D,e:J,f:le}=K.getTransform();return[H,U,W,D,J,le]}function X(K){const{a:H,b:U,c:W,d:D,e:J,f:le}=K.getTransform().invertSelf();return[H,U,W,D,J,le]}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseStandardFontDataFactory=i.BaseSVGFactory=i.BaseCanvasFactory=i.BaseCMapReaderFactory=void 0;var n=t(1);class o{constructor(){this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(y,v){if(y<=0||v<=0)throw new Error("Invalid canvas size");const I=this._createCanvas(y,v);return{canvas:I,context:I.getContext("2d")}}reset(y,v,I){if(!y.canvas)throw new Error("Canvas is not specified");if(v<=0||I<=0)throw new Error("Invalid canvas size");y.canvas.width=v,y.canvas.height=I}destroy(y){if(!y.canvas)throw new Error("Canvas is not specified");y.canvas.width=0,y.canvas.height=0,y.canvas=null,y.context=null}_createCanvas(y,v){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}i.BaseCanvasFactory=o;class g{constructor(y){let{baseUrl:v=null,isCompressed:I=!1}=y;this.constructor===g&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=v,this.isCompressed=I}async fetch(y){let{name:v}=y;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!v)throw new Error("CMap name must be specified.");const I=this.baseUrl+v+(this.isCompressed?".bcmap":""),u=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(I,u).catch(E=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${I}`)})}_fetchData(y,v){(0,n.unreachable)("Abstract method `_fetchData` called.")}}i.BaseCMapReaderFactory=g;class A{constructor(y){let{baseUrl:v=null}=y;this.constructor===A&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=v}async fetch(y){let{filename:v}=y;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!v)throw new Error("Font filename must be specified.");const I=`${this.baseUrl}${v}`;return this._fetchData(I).catch(u=>{throw new Error(`Unable to load font data at: ${I}`)})}_fetchData(y){(0,n.unreachable)("Abstract method `_fetchData` called.")}}i.BaseStandardFontDataFactory=A;class R{constructor(){this.constructor===R&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(y,v){let I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(y<=0||v<=0)throw new Error("Invalid SVG dimensions");const u=this._createSVG("svg:svg");return u.setAttribute("version","1.1"),I||(u.setAttribute("width",`${y}px`),u.setAttribute("height",`${v}px`)),u.setAttribute("preserveAspectRatio","none"),u.setAttribute("viewBox",`0 0 ${y} ${v}`),u}createElement(y){if(typeof y!="string")throw new Error("Invalid SVG element type");return this._createSVG(y)}_createSVG(y){(0,n.unreachable)("Abstract method `_createSVG` called.")}}i.BaseSVGFactory=R},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MurmurHash3_64=void 0;var n=t(1);const o=3285377520,g=4294901760,A=65535;class R{constructor(y){this.h1=y?y&4294967295:o,this.h2=y?y&4294967295:o}update(y){let v,I;if(typeof y=="string"){v=new Uint8Array(y.length*2),I=0;for(let m=0,p=y.length;m<p;m++){const T=y.charCodeAt(m);T<=255?v[I++]=T:(v[I++]=T>>>8,v[I++]=T&255)}}else if((0,n.isArrayBuffer)(y))v=y.slice(),I=v.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const u=I>>2,E=I-u*4,O=new Uint32Array(v.buffer,0,u);let S=0,x=0,L=this.h1,c=this.h2;const h=3432918353,d=461845907,a=h&A,s=d&A;for(let m=0;m<u;m++)m&1?(S=O[m],S=S*h&g|S*a&A,S=S<<15|S>>>17,S=S*d&g|S*s&A,L^=S,L=L<<13|L>>>19,L=L*5+3864292196):(x=O[m],x=x*h&g|x*a&A,x=x<<15|x>>>17,x=x*d&g|x*s&A,c^=x,c=c<<13|c>>>19,c=c*5+3864292196);switch(S=0,E){case 3:S^=v[u*4+2]<<16;case 2:S^=v[u*4+1]<<8;case 1:S^=v[u*4],S=S*h&g|S*a&A,S=S<<15|S>>>17,S=S*d&g|S*s&A,u&1?L^=S:c^=S}this.h1=L,this.h2=c}hexdigest(){let y=this.h1,v=this.h2;y^=v>>>1,y=y*3981806797&g|y*36045&A,v=v*4283543511&g|((v<<16|y>>>16)*2950163797&g)>>>16,y^=v>>>1,y=y*444984403&g|y*60499&A,v=v*3301882366&g|((v<<16|y>>>16)*3120437893&g)>>>16,y^=v>>>1;const I=(y>>>0).toString(16),u=(v>>>0).toString(16);return I.padStart(8,"0")+u.padStart(8,"0")}}i.MurmurHash3_64=R},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FontLoader=i.FontFaceObject=void 0;var n=t(1);class o{constructor(C){let{docId:y,onUnsupportedFeature:v,ownerDocument:I=globalThis.document,styleElement:u=null}=C;this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseFontLoader."),this.docId=y,this._onUnsupportedFeature=v,this._document=I,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(C){this.nativeFontFaces.push(C),this._document.fonts.add(C)}insertRule(C){let y=this.styleElement;y||(y=this.styleElement=this._document.createElement("style"),y.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(y));const v=y.sheet;v.insertRule(C,v.cssRules.length)}clear(){for(const C of this.nativeFontFaces)this._document.fonts.delete(C);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(C){if(C.attached||C.missingFile)return;if(C.attached=!0,this.isFontLoadingAPISupported){const v=C.createNativeFontFace();if(v){this.addNativeFontFace(v);try{await v.loaded}catch(I){throw this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${v.family}': '${I}'.`),C.disableFontFace=!0,I}}return}const y=C.createFontFaceRule();if(y){if(this.insertRule(y),this.isSyncFontLoadingSupported)return;await new Promise(v=>{const I=this._queueLoadingCallback(v);this._prepareFontLoadEvent([y],[C],I)})}}_queueLoadingCallback(C){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var C;const y=!!((C=this._document)!==null&&C!==void 0&&C.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",y)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(C,y,v){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let g;i.FontLoader=g,i.FontLoader=g=class extends o{constructor(C){super(C),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let C=!1;if(typeof navigator>"u")C=!0;else{const y=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);y?.[1]>=14&&(C=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",C)}_queueLoadingCallback(C){function y(){for((0,n.assert)(!I.done,"completeRequest() cannot be called twice."),I.done=!0;v.requests.length>0&&v.requests[0].done;){const u=v.requests.shift();setTimeout(u.callback,0)}}const v=this.loadingContext,I={id:`pdfjs-font-loading-${v.nextRequestId++}`,done:!1,complete:y,callback:C};return v.requests.push(I),I}get _loadTestFont(){const C=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,n.shadow)(this,"_loadTestFont",C())}_prepareFontLoadEvent(C,y,v){function I(q,X){return q.charCodeAt(X)<<24|q.charCodeAt(X+1)<<16|q.charCodeAt(X+2)<<8|q.charCodeAt(X+3)&255}function u(q,X,K,H){const U=q.substring(0,X),W=q.substring(X+K);return U+H+W}let E,O;const S=this._document.createElement("canvas");S.width=1,S.height=1;const x=S.getContext("2d");let L=0;function c(q,X){if(L++,L>30){(0,n.warn)("Load test font never loaded."),X();return}if(x.font="30px "+q,x.fillText(".",0,20),x.getImageData(0,0,1,1).data[3]>0){X();return}setTimeout(c.bind(null,q,X))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=u(d,976,h.length,h);const s=16,m=1482184792;let p=I(d,s);for(E=0,O=h.length-3;E<O;E+=4)p=p-m+I(h,E)|0;E<h.length&&(p=p-m+I(h+"XXX",E)|0),d=u(d,s,4,(0,n.string32)(p));const T=`url(data:font/opentype;base64,${btoa(d)});`,N=`@font-face {font-family:"${h}";src:${T}}`;this.insertRule(N);const M=[];for(const q of y)M.push(q.loadedName);M.push(h);const Q=this._document.createElement("div");Q.style.visibility="hidden",Q.style.width=Q.style.height="10px",Q.style.position="absolute",Q.style.top=Q.style.left="0px";for(const q of M){const X=this._document.createElement("span");X.textContent="Hi",X.style.fontFamily=q,Q.append(X)}this._document.body.append(Q),c(h,()=>{Q.remove(),v.complete()})}};class A{constructor(C,y){let{isEvalSupported:v=!0,disableFontFace:I=!1,ignoreErrors:u=!1,onUnsupportedFeature:E,fontRegistry:O=null}=y;this.compiledGlyphs=Object.create(null);for(const S in C)this[S]=C[S];this.isEvalSupported=v!==!1,this.disableFontFace=I===!0,this.ignoreErrors=u===!0,this._onUnsupportedFeature=E,this.fontRegistry=O}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let C;if(!this.cssFontInfo)C=new FontFace(this.loadedName,this.data,{});else{const y={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(y.style=`oblique ${this.cssFontInfo.italicAngle}deg`),C=new FontFace(this.cssFontInfo.fontFamily,this.data,y)}return this.fontRegistry&&this.fontRegistry.registerFont(this),C}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const C=(0,n.bytesToString)(this.data),y=`url(data:${this.mimetype};base64,${btoa(C)});`;let v;if(!this.cssFontInfo)v=`@font-face {font-family:"${this.loadedName}";src:${y}}`;else{let I=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(I+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),v=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${I}src:${y}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,y),v}getPathGenerator(C,y){if(this.compiledGlyphs[y]!==void 0)return this.compiledGlyphs[y];let v;try{v=C.get(this.loadedName+"_path_"+y)}catch(I){if(!this.ignoreErrors)throw I;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${I}".`),this.compiledGlyphs[y]=function(u,E){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const I=[];for(const u of v){const E=u.args!==void 0?u.args.join(","):"";I.push("c.",u.cmd,"(",E,`);
`)}return this.compiledGlyphs[y]=new Function("c","size",I.join(""))}return this.compiledGlyphs[y]=function(I,u){for(const E of v)E.cmd==="scale"&&(E.args=[u,-u]),I[E.cmd].apply(I,E.args)}}}i.FontFaceObject=A},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasGraphics=void 0;var n=t(133),o=t(1),g=t(138),A=t(139),R=t(3);function C(V,_){y(V,_),_.add(V)}function y(V,_){if(_.has(V))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(V,_,P){if(!_.has(V))throw new TypeError("attempted to get private field on non-instance");return P}const I=16,u=100,E=4096,O=15,S=10,x=R.isNodeJS&&typeof Path2D>"u"?-1:1e3,L=16;function c(V,_){if(V._removeMirroring)throw new Error("Context is already forwarding operations.");V.__originalSave=V.save,V.__originalRestore=V.restore,V.__originalRotate=V.rotate,V.__originalScale=V.scale,V.__originalTranslate=V.translate,V.__originalTransform=V.transform,V.__originalSetTransform=V.setTransform,V.__originalResetTransform=V.resetTransform,V.__originalClip=V.clip,V.__originalMoveTo=V.moveTo,V.__originalLineTo=V.lineTo,V.__originalBezierCurveTo=V.bezierCurveTo,V.__originalRect=V.rect,V.__originalClosePath=V.closePath,V.__originalBeginPath=V.beginPath,V._removeMirroring=()=>{V.save=V.__originalSave,V.restore=V.__originalRestore,V.rotate=V.__originalRotate,V.scale=V.__originalScale,V.translate=V.__originalTranslate,V.transform=V.__originalTransform,V.setTransform=V.__originalSetTransform,V.resetTransform=V.__originalResetTransform,V.clip=V.__originalClip,V.moveTo=V.__originalMoveTo,V.lineTo=V.__originalLineTo,V.bezierCurveTo=V.__originalBezierCurveTo,V.rect=V.__originalRect,V.closePath=V.__originalClosePath,V.beginPath=V.__originalBeginPath,delete V._removeMirroring},V.save=function(){_.save(),this.__originalSave()},V.restore=function(){_.restore(),this.__originalRestore()},V.translate=function(G,z){_.translate(G,z),this.__originalTranslate(G,z)},V.scale=function(G,z){_.scale(G,z),this.__originalScale(G,z)},V.transform=function(G,z,l,b,w,F){_.transform(G,z,l,b,w,F),this.__originalTransform(G,z,l,b,w,F)},V.setTransform=function(G,z,l,b,w,F){_.setTransform(G,z,l,b,w,F),this.__originalSetTransform(G,z,l,b,w,F)},V.resetTransform=function(){_.resetTransform(),this.__originalResetTransform()},V.rotate=function(G){_.rotate(G),this.__originalRotate(G)},V.clip=function(G){_.clip(G),this.__originalClip(G)},V.moveTo=function(P,G){_.moveTo(P,G),this.__originalMoveTo(P,G)},V.lineTo=function(P,G){_.lineTo(P,G),this.__originalLineTo(P,G)},V.bezierCurveTo=function(P,G,z,l,b,w){_.bezierCurveTo(P,G,z,l,b,w),this.__originalBezierCurveTo(P,G,z,l,b,w)},V.rect=function(P,G,z,l){_.rect(P,G,z,l),this.__originalRect(P,G,z,l)},V.closePath=function(){_.closePath(),this.__originalClosePath()},V.beginPath=function(){_.beginPath(),this.__originalBeginPath()}}class h{constructor(_){this.canvasFactory=_,this.cache=Object.create(null)}getCanvas(_,P,G){let z;return this.cache[_]!==void 0?(z=this.cache[_],this.canvasFactory.reset(z,P,G)):(z=this.canvasFactory.create(P,G),this.cache[_]=z),z}delete(_){delete this.cache[_]}clear(){for(const _ in this.cache){const P=this.cache[_];this.canvasFactory.destroy(P),delete this.cache[_]}}}function d(V,_,P,G,z,l,b,w,F,B){const[$,Z,re,ie,ce,oe]=(0,n.getCurrentTransform)(V);if(Z===0&&re===0){const ye=b*$+ce,_e=Math.round(ye),Ee=w*ie+oe,Me=Math.round(Ee),Ae=(b+F)*$+ce,Ve=Math.abs(Math.round(Ae)-_e)||1,Ke=(w+B)*ie+oe,Fe=Math.abs(Math.round(Ke)-Me)||1;return V.setTransform(Math.sign($),0,0,Math.sign(ie),_e,Me),V.drawImage(_,P,G,z,l,0,0,Ve,Fe),V.setTransform($,Z,re,ie,ce,oe),[Ve,Fe]}if($===0&&ie===0){const ye=w*re+ce,_e=Math.round(ye),Ee=b*Z+oe,Me=Math.round(Ee),Ae=(w+B)*re+ce,Ve=Math.abs(Math.round(Ae)-_e)||1,Ke=(b+F)*Z+oe,Fe=Math.abs(Math.round(Ke)-Me)||1;return V.setTransform(0,Math.sign(Z),Math.sign(re),0,_e,Me),V.drawImage(_,P,G,z,l,0,0,Fe,Ve),V.setTransform($,Z,re,ie,ce,oe),[Fe,Ve]}V.drawImage(_,P,G,z,l,b,w,F,B);const ue=Math.hypot($,Z),me=Math.hypot(re,ie);return[ue*F,me*B]}function a(V){const{width:_,height:P}=V;if(_>x||P>x)return null;const G=1e3,z=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),l=_+1;let b=new Uint8Array(l*(P+1)),w,F,B;const $=_+7&-8;let Z=new Uint8Array($*P),re=0;for(const me of V.data){let ye=128;for(;ye>0;)Z[re++]=me&ye?0:255,ye>>=1}let ie=0;for(re=0,Z[re]!==0&&(b[0]=1,++ie),F=1;F<_;F++)Z[re]!==Z[re+1]&&(b[F]=Z[re]?2:1,++ie),re++;for(Z[re]!==0&&(b[F]=2,++ie),w=1;w<P;w++){re=w*$,B=w*l,Z[re-$]!==Z[re]&&(b[B]=Z[re]?1:8,++ie);let me=(Z[re]?4:0)+(Z[re-$]?8:0);for(F=1;F<_;F++)me=(me>>2)+(Z[re+1]?4:0)+(Z[re-$+1]?8:0),z[me]&&(b[B+F]=z[me],++ie),re++;if(Z[re-$]!==Z[re]&&(b[B+F]=Z[re]?2:4,++ie),ie>G)return null}for(re=$*(P-1),B=w*l,Z[re]!==0&&(b[B]=8,++ie),F=1;F<_;F++)Z[re]!==Z[re+1]&&(b[B+F]=Z[re]?4:8,++ie),re++;if(Z[re]!==0&&(b[B+F]=4,++ie),ie>G)return null;const ce=new Int32Array([0,l,-1,0,-l,0,0,0,1]),oe=new Path2D;for(w=0;ie&&w<=P;w++){let me=w*l;const ye=me+_;for(;me<ye&&!b[me];)me++;if(me===ye)continue;oe.moveTo(me%l,w);const _e=me;let Ee=b[me];do{const Me=ce[Ee];do me+=Me;while(!b[me]);const Ae=b[me];Ae!==5&&Ae!==10?(Ee=Ae,b[me]=0):(Ee=Ae&51*Ee>>4,b[me]&=Ee>>2|Ee<<2),oe.lineTo(me%l,me/l|0),b[me]||--ie}while(_e!==me);--w}return Z=null,b=null,function(me){me.save(),me.scale(1/_,-1/P),me.translate(0,-P),me.fill(oe),me.beginPath(),me.restore()}}class s{constructor(_,P){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,_,P])}clone(){const _=Object.create(this);return _.clipBox=this.clipBox.slice(),_}setCurrentPoint(_,P){this.x=_,this.y=P}updatePathMinMax(_,P,G){[P,G]=o.Util.applyTransform([P,G],_),this.minX=Math.min(this.minX,P),this.minY=Math.min(this.minY,G),this.maxX=Math.max(this.maxX,P),this.maxY=Math.max(this.maxY,G)}updateRectMinMax(_,P){const G=o.Util.applyTransform(P,_),z=o.Util.applyTransform(P.slice(2),_);this.minX=Math.min(this.minX,G[0],z[0]),this.minY=Math.min(this.minY,G[1],z[1]),this.maxX=Math.max(this.maxX,G[0],z[0]),this.maxY=Math.max(this.maxY,G[1],z[1])}updateScalingPathMinMax(_,P){o.Util.scaleMinMax(_,P),this.minX=Math.min(this.minX,P[0]),this.maxX=Math.max(this.maxX,P[1]),this.minY=Math.min(this.minY,P[2]),this.maxY=Math.max(this.maxY,P[3])}updateCurvePathMinMax(_,P,G,z,l,b,w,F,B,$){const Z=o.Util.bezierBoundingBox(P,G,z,l,b,w,F,B);if($){$[0]=Math.min($[0],Z[0],Z[2]),$[1]=Math.max($[1],Z[0],Z[2]),$[2]=Math.min($[2],Z[1],Z[3]),$[3]=Math.max($[3],Z[1],Z[3]);return}this.updateRectMinMax(_,Z)}getPathBoundingBox(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.PathType.FILL,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const G=[this.minX,this.minY,this.maxX,this.maxY];if(_===g.PathType.STROKE){P||(0,o.unreachable)("Stroke bounding box must include transform.");const z=o.Util.singularValueDecompose2dScale(P),l=z[0]*this.lineWidth/2,b=z[1]*this.lineWidth/2;G[0]-=l,G[1]-=b,G[2]+=l,G[3]+=b}return G}updateClipFromPath(){const _=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(_||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(_){this.clipBox=_,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g.PathType.FILL,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return o.Util.intersect(this.clipBox,this.getPathBoundingBox(_,P))}}function m(V,_){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(typeof ImageData<"u"&&_ instanceof ImageData){V.putImageData(_,0,0);return}const G=_.height,z=_.width,l=G%L,b=(G-l)/L,w=l===0?b:b+1,F=V.createImageData(z,L);let B=0,$;const Z=_.data,re=F.data;let ie,ce,oe,ue,me,ye,_e,Ee;if(P)switch(P.length){case 1:me=P[0],ye=P[0],_e=P[0],Ee=P[0];break;case 4:me=P[0],ye=P[1],_e=P[2],Ee=P[3];break}if(_.kind===o.ImageKind.GRAYSCALE_1BPP){const Me=Z.byteLength,Ae=new Uint32Array(re.buffer,0,re.byteLength>>2),Ve=Ae.length,Ke=z+7>>3;let Fe=4294967295,we=o.FeatureTest.isLittleEndian?4278190080:255;for(Ee&&Ee[0]===255&&Ee[255]===0&&([Fe,we]=[we,Fe]),ie=0;ie<w;ie++){for(oe=ie<b?L:l,$=0,ce=0;ce<oe;ce++){const ae=Me-B;let be=0;const De=ae>Ke?z:ae*8-7,Ye=De&-8;let ge=0,Re=0;for(;be<Ye;be+=8)Re=Z[B++],Ae[$++]=Re&128?Fe:we,Ae[$++]=Re&64?Fe:we,Ae[$++]=Re&32?Fe:we,Ae[$++]=Re&16?Fe:we,Ae[$++]=Re&8?Fe:we,Ae[$++]=Re&4?Fe:we,Ae[$++]=Re&2?Fe:we,Ae[$++]=Re&1?Fe:we;for(;be<De;be++)ge===0&&(Re=Z[B++],ge=128),Ae[$++]=Re&ge?Fe:we,ge>>=1}for(;$<Ve;)Ae[$++]=0;V.putImageData(F,0,ie*L)}}else if(_.kind===o.ImageKind.RGBA_32BPP){const Me=!!(me||ye||_e);for(ce=0,ue=z*L*4,ie=0;ie<b;ie++){if(re.set(Z.subarray(B,B+ue)),B+=ue,Me)for(let Ae=0;Ae<ue;Ae+=4)me&&(re[Ae+0]=me[re[Ae+0]]),ye&&(re[Ae+1]=ye[re[Ae+1]]),_e&&(re[Ae+2]=_e[re[Ae+2]]);V.putImageData(F,0,ce),ce+=L}if(ie<w){if(ue=z*l*4,re.set(Z.subarray(B,B+ue)),Me)for(let Ae=0;Ae<ue;Ae+=4)me&&(re[Ae+0]=me[re[Ae+0]]),ye&&(re[Ae+1]=ye[re[Ae+1]]),_e&&(re[Ae+2]=_e[re[Ae+2]]);V.putImageData(F,0,ce)}}else if(_.kind===o.ImageKind.RGB_24BPP){const Me=!!(me||ye||_e);for(oe=L,ue=z*oe,ie=0;ie<w;ie++){for(ie>=b&&(oe=l,ue=z*oe),$=0,ce=ue;ce--;)re[$++]=Z[B++],re[$++]=Z[B++],re[$++]=Z[B++],re[$++]=255;if(Me)for(let Ae=0;Ae<$;Ae+=4)me&&(re[Ae+0]=me[re[Ae+0]]),ye&&(re[Ae+1]=ye[re[Ae+1]]),_e&&(re[Ae+2]=_e[re[Ae+2]]);V.putImageData(F,0,ie*L)}}else throw new Error(`bad image kind: ${_.kind}`)}function p(V,_){if(_.bitmap){V.drawImage(_.bitmap,0,0);return}const P=_.height,G=_.width,z=P%L,l=(P-z)/L,b=z===0?l:l+1,w=V.createImageData(G,L);let F=0;const B=_.data,$=w.data;for(let Z=0;Z<b;Z++){const re=Z<l?L:z;({srcPos:F}=(0,A.applyMaskImageData)({src:B,srcPos:F,dest:$,width:G,height:re})),V.putImageData(w,0,Z*L)}}function T(V,_){const P=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let G=0,z=P.length;G<z;G++){const l=P[G];V[l]!==void 0&&(_[l]=V[l])}V.setLineDash!==void 0&&(_.setLineDash(V.getLineDash()),_.lineDashOffset=V.lineDashOffset)}function N(V,_){V.strokeStyle=V.fillStyle=_||"#000000",V.fillRule="nonzero",V.globalAlpha=1,V.lineWidth=1,V.lineCap="butt",V.lineJoin="miter",V.miterLimit=10,V.globalCompositeOperation="source-over",V.font="10px sans-serif",V.setLineDash!==void 0&&(V.setLineDash([]),V.lineDashOffset=0)}function M(V,_,P,G){const z=V.length;for(let l=3;l<z;l+=4){const b=V[l];if(b===0)V[l-3]=_,V[l-2]=P,V[l-1]=G;else if(b<255){const w=255-b;V[l-3]=V[l-3]*b+_*w>>8,V[l-2]=V[l-2]*b+P*w>>8,V[l-1]=V[l-1]*b+G*w>>8}}}function Q(V,_,P){const G=V.length,z=1/255;for(let l=3;l<G;l+=4){const b=P?P[V[l]]:V[l];_[l]=_[l]*b*z|0}}function q(V,_,P){const G=V.length;for(let z=3;z<G;z+=4){const l=V[z-3]*77+V[z-2]*152+V[z-1]*28;_[z]=P?_[z]*P[l>>8]>>8:_[z]*l>>16}}function X(V,_,P,G,z,l,b,w,F,B,$){const Z=!!l,re=Z?l[0]:0,ie=Z?l[1]:0,ce=Z?l[2]:0;let oe;z==="Luminosity"?oe=q:oe=Q;const me=Math.min(G,Math.ceil(1048576/P));for(let ye=0;ye<G;ye+=me){const _e=Math.min(me,G-ye),Ee=V.getImageData(w-B,ye+(F-$),P,_e),Me=_.getImageData(w,ye+F,P,_e);Z&&M(Ee.data,re,ie,ce),oe(Ee.data,Me.data,b),_.putImageData(Me,w,ye+F)}}function K(V,_,P,G){const z=G[0],l=G[1],b=G[2]-z,w=G[3]-l;b===0||w===0||(X(_.context,P,b,w,_.subtype,_.backdrop,_.transferMap,z,l,_.offsetX,_.offsetY),V.save(),V.globalAlpha=1,V.globalCompositeOperation="source-over",V.setTransform(1,0,0,1,0,0),V.drawImage(P.canvas,0,0),V.restore())}function H(V,_){const P=o.Util.singularValueDecompose2dScale(V);P[0]=Math.fround(P[0]),P[1]=Math.fround(P[1]);const G=Math.fround((globalThis.devicePixelRatio||1)*n.PixelsPerInch.PDF_TO_CSS_UNITS);return _!==void 0?_:P[0]<=G||P[1]<=G}const U=["butt","round","square"],W=["miter","round","bevel"],D={},J={};var le=new WeakSet;class ve{constructor(_,P,G,z,l,b,w,F){C(this,le),this.ctx=_,this.current=new s(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=P,this.objs=G,this.canvasFactory=z,this.imageLayer=l,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=b,this.cachedCanvases=new h(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=w,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=F?.background||null,this.foregroundColor=F?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(_){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return typeof _=="string"?_.startsWith("g_")?this.commonObjs.get(_):this.objs.get(_):P}beginDrawing(_){let{transform:P,viewport:G,transparency:z=!1,background:l=null}=_;const b=this.ctx.canvas.width,w=this.ctx.canvas.height,F=l||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const B=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const $=this.backgroundColor=this.ctx.fillStyle;let Z=!0,re=F;if(this.ctx.fillStyle=F,re=this.ctx.fillStyle,Z=typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re),B==="#000000"&&$==="#ffffff"||B===$||!Z)this.foregroundColor=this.backgroundColor=null;else{const[ie,ce,oe]=(0,n.getRGB)(re),ue=ye=>(ye/=255,ye<=.03928?ye/12.92:((ye+.055)/1.055)**2.4),me=Math.round(.2126*ue(ie)+.7152*ue(ce)+.0722*ue(oe));this.selectColor=(ye,_e,Ee)=>{const Me=.2126*ue(ye)+.7152*ue(_e)+.0722*ue(Ee);return Math.round(Me)===me?$:B}}}if(this.ctx.fillStyle=this.backgroundColor||F,this.ctx.fillRect(0,0,b,w),this.ctx.restore(),z){const B=this.cachedCanvases.getCanvas("transparent",b,w);this.compositeCtx=this.ctx,this.transparentCanvas=B.canvas,this.ctx=B.context,this.ctx.save(),this.ctx.transform(...(0,n.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),N(this.ctx,this.foregroundColor),P&&(this.ctx.transform(...P),this.outputScaleX=P[0],this.outputScaleY=P[0]),this.ctx.transform(...G.transform),this.viewportScale=G.scale,this.baseTransform=(0,n.getCurrentTransform)(this.ctx),this.imageLayer&&((0,n.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(_,P,G,z){const l=_.argsArray,b=_.fnArray;let w=P||0;const F=l.length;if(F===w)return w;const B=F-w>S&&typeof G=="function",$=B?Date.now()+O:0;let Z=0;const re=this.commonObjs,ie=this.objs;let ce;for(;;){if(z!==void 0&&w===z.nextBreakPoint)return z.breakIt(w,G),w;if(ce=b[w],ce!==o.OPS.dependency)this[ce].apply(this,l[w]);else for(const oe of l[w]){const ue=oe.startsWith("g_")?re:ie;if(!ue.has(oe))return ue.get(oe,G),w}if(w++,w===F)return w;if(B&&++Z>S){if(Date.now()>$)return G(),w;Z=0}}}endDrawing(){v(this,le,Ce).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const _ of this._cachedBitmapsMap.values()){for(const P of _.values())typeof HTMLCanvasElement<"u"&&P instanceof HTMLCanvasElement&&(P.width=P.height=0);_.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(_,P){const G=_.width,z=_.height;let l=Math.max(Math.hypot(P[0],P[1]),1),b=Math.max(Math.hypot(P[2],P[3]),1),w=G,F=z,B="prescale1",$,Z;for(;l>2&&w>1||b>2&&F>1;){let re=w,ie=F;l>2&&w>1&&(re=Math.ceil(w/2),l/=w/re),b>2&&F>1&&(ie=Math.ceil(F/2),b/=F/ie),$=this.cachedCanvases.getCanvas(B,re,ie),Z=$.context,Z.clearRect(0,0,re,ie),Z.drawImage(_,0,0,w,F,0,0,re,ie),_=$.canvas,w=re,F=ie,B=B==="prescale1"?"prescale2":"prescale1"}return{img:_,paintWidth:w,paintHeight:F}}_createMaskCanvas(_){const P=this.ctx,{width:G,height:z}=_,l=this.current.fillColor,b=this.current.patternFill,w=(0,n.getCurrentTransform)(P);let F,B,$,Z;if((_.bitmap||_.data)&&_.count>1){const Ve=_.bitmap||_.data.buffer,Ke=w.slice(0,4);B=JSON.stringify(b?Ke:[Ke,l]),F=this._cachedBitmapsMap.get(Ve),F||(F=new Map,this._cachedBitmapsMap.set(Ve,F));const Fe=F.get(B);if(Fe&&!b){const we=Math.round(Math.min(w[0],w[2])+w[4]),ae=Math.round(Math.min(w[1],w[3])+w[5]);return{canvas:Fe,offsetX:we,offsetY:ae}}$=Fe}$||(Z=this.cachedCanvases.getCanvas("maskCanvas",G,z),p(Z.context,_));let re=o.Util.transform(w,[1/G,0,0,-1/z,0,0]);re=o.Util.transform(re,[1,0,0,1,0,-z]);const ie=o.Util.applyTransform([0,0],re),ce=o.Util.applyTransform([G,z],re),oe=o.Util.normalizeRect([ie[0],ie[1],ce[0],ce[1]]),ue=Math.round(oe[2]-oe[0])||1,me=Math.round(oe[3]-oe[1])||1,ye=this.cachedCanvases.getCanvas("fillCanvas",ue,me),_e=ye.context,Ee=Math.min(ie[0],ce[0]),Me=Math.min(ie[1],ce[1]);_e.translate(-Ee,-Me),_e.transform(...re),$||($=this._scaleImage(Z.canvas,(0,n.getCurrentTransformInverse)(_e)),$=$.img,F&&b&&F.set(B,$)),_e.imageSmoothingEnabled=H((0,n.getCurrentTransform)(_e),_.interpolate),d(_e,$,0,0,$.width,$.height,0,0,G,z),_e.globalCompositeOperation="source-in";const Ae=o.Util.transform((0,n.getCurrentTransformInverse)(_e),[1,0,0,1,-Ee,-Me]);return _e.fillStyle=b?l.getPattern(P,this,Ae,g.PathType.FILL):l,_e.fillRect(0,0,G,z),F&&!b&&(this.cachedCanvases.delete("fillCanvas"),F.set(B,ye.canvas)),{canvas:ye.canvas,offsetX:Math.round(Ee),offsetY:Math.round(Me)}}setLineWidth(_){_!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=_,this.ctx.lineWidth=_}setLineCap(_){this.ctx.lineCap=U[_]}setLineJoin(_){this.ctx.lineJoin=W[_]}setMiterLimit(_){this.ctx.miterLimit=_}setDash(_,P){const G=this.ctx;G.setLineDash!==void 0&&(G.setLineDash(_),G.lineDashOffset=P)}setRenderingIntent(_){}setFlatness(_){}setGState(_){for(let P=0,G=_.length;P<G;P++){const z=_[P],l=z[0],b=z[1];switch(l){case"LW":this.setLineWidth(b);break;case"LC":this.setLineCap(b);break;case"LJ":this.setLineJoin(b);break;case"ML":this.setMiterLimit(b);break;case"D":this.setDash(b[0],b[1]);break;case"RI":this.setRenderingIntent(b);break;case"FL":this.setFlatness(b);break;case"Font":this.setFont(b[0],b[1]);break;case"CA":this.current.strokeAlpha=z[1];break;case"ca":this.current.fillAlpha=z[1],this.ctx.globalAlpha=z[1];break;case"BM":this.ctx.globalCompositeOperation=b;break;case"SMask":this.current.activeSMask=b?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=b}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const _=this.inSMaskMode;this.current.activeSMask&&!_?this.beginSMaskMode():!this.current.activeSMask&&_&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const _=this.ctx.canvas.width,P=this.ctx.canvas.height,G="smaskGroupAt"+this.groupLevel,z=this.cachedCanvases.getCanvas(G,_,P);this.suspendedCtx=this.ctx,this.ctx=z.context;const l=this.ctx;l.setTransform(...(0,n.getCurrentTransform)(this.suspendedCtx)),T(this.suspendedCtx,l),c(l,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),T(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(_){if(!this.current.activeSMask)return;_?(_[0]=Math.floor(_[0]),_[1]=Math.floor(_[1]),_[2]=Math.ceil(_[2]),_[3]=Math.ceil(_[3])):_=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const P=this.current.activeSMask,G=this.suspendedCtx;K(G,P,this.ctx,_),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(T(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const _=this.current;this.stateStack.push(_),this.current=_.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),T(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(_,P,G,z,l,b){this.ctx.transform(_,P,G,z,l,b),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(_,P,G){const z=this.ctx,l=this.current;let b=l.x,w=l.y,F,B;const $=(0,n.getCurrentTransform)(z),Z=$[0]===0&&$[3]===0||$[1]===0&&$[2]===0,re=Z?G.slice(0):null;for(let ie=0,ce=0,oe=_.length;ie<oe;ie++)switch(_[ie]|0){case o.OPS.rectangle:b=P[ce++],w=P[ce++];const ue=P[ce++],me=P[ce++],ye=b+ue,_e=w+me;z.moveTo(b,w),ue===0||me===0?z.lineTo(ye,_e):(z.lineTo(ye,w),z.lineTo(ye,_e),z.lineTo(b,_e)),Z||l.updateRectMinMax($,[b,w,ye,_e]),z.closePath();break;case o.OPS.moveTo:b=P[ce++],w=P[ce++],z.moveTo(b,w),Z||l.updatePathMinMax($,b,w);break;case o.OPS.lineTo:b=P[ce++],w=P[ce++],z.lineTo(b,w),Z||l.updatePathMinMax($,b,w);break;case o.OPS.curveTo:F=b,B=w,b=P[ce+4],w=P[ce+5],z.bezierCurveTo(P[ce],P[ce+1],P[ce+2],P[ce+3],b,w),l.updateCurvePathMinMax($,F,B,P[ce],P[ce+1],P[ce+2],P[ce+3],b,w,re),ce+=6;break;case o.OPS.curveTo2:F=b,B=w,z.bezierCurveTo(b,w,P[ce],P[ce+1],P[ce+2],P[ce+3]),l.updateCurvePathMinMax($,F,B,b,w,P[ce],P[ce+1],P[ce+2],P[ce+3],re),b=P[ce+2],w=P[ce+3],ce+=4;break;case o.OPS.curveTo3:F=b,B=w,b=P[ce+2],w=P[ce+3],z.bezierCurveTo(P[ce],P[ce+1],b,w,b,w),l.updateCurvePathMinMax($,F,B,P[ce],P[ce+1],b,w,b,w,re),ce+=4;break;case o.OPS.closePath:z.closePath();break}Z&&l.updateScalingPathMinMax($,re),l.setCurrentPoint(b,w)}closePath(){this.ctx.closePath()}stroke(_){_=typeof _<"u"?_:!0;const P=this.ctx,G=this.current.strokeColor;P.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof G=="object"&&G!==null&&G!==void 0&&G.getPattern?(P.save(),P.strokeStyle=G.getPattern(P,this,(0,n.getCurrentTransformInverse)(P),g.PathType.STROKE),this.rescaleAndStroke(!1),P.restore()):this.rescaleAndStroke(!0)),_&&this.consumePath(this.current.getClippedPathBoundingBox()),P.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(_){_=typeof _<"u"?_:!0;const P=this.ctx,G=this.current.fillColor,z=this.current.patternFill;let l=!1;z&&(P.save(),P.fillStyle=G.getPattern(P,this,(0,n.getCurrentTransformInverse)(P),g.PathType.FILL),l=!0);const b=this.current.getClippedPathBoundingBox();this.contentVisible&&b!==null&&(this.pendingEOFill?(P.fill("evenodd"),this.pendingEOFill=!1):P.fill()),l&&P.restore(),_&&this.consumePath(b)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=D}eoClip(){this.pendingClip=J}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const _=this.pendingTextPaths,P=this.ctx;if(_===void 0){P.beginPath();return}P.save(),P.beginPath();for(const G of _)P.setTransform(...G.transform),P.translate(G.x,G.y),G.addToPath(P,G.fontSize);P.restore(),P.clip(),P.beginPath(),delete this.pendingTextPaths}setCharSpacing(_){this.current.charSpacing=_}setWordSpacing(_){this.current.wordSpacing=_}setHScale(_){this.current.textHScale=_/100}setLeading(_){this.current.leading=-_}setFont(_,P){const G=this.commonObjs.get(_),z=this.current;if(!G)throw new Error(`Can't find font for ${_}`);if(z.fontMatrix=G.fontMatrix||o.FONT_IDENTITY_MATRIX,(z.fontMatrix[0]===0||z.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+_),P<0?(P=-P,z.fontDirection=-1):z.fontDirection=1,this.current.font=G,this.current.fontSize=P,G.isType3Font)return;const l=G.loadedName||"sans-serif";let b="normal";G.black?b="900":G.bold&&(b="bold");const w=G.italic?"italic":"normal",F=`"${l}", ${G.fallbackName}`;let B=P;P<I?B=I:P>u&&(B=u),this.current.fontSizeScale=P/B,this.ctx.font=`${w} ${b} ${B}px ${F}`}setTextRenderingMode(_){this.current.textRenderingMode=_}setTextRise(_){this.current.textRise=_}moveText(_,P){this.current.x=this.current.lineX+=_,this.current.y=this.current.lineY+=P}setLeadingMoveText(_,P){this.setLeading(-P),this.moveText(_,P)}setTextMatrix(_,P,G,z,l,b){this.current.textMatrix=[_,P,G,z,l,b],this.current.textMatrixScale=Math.hypot(_,P),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(_,P,G,z){const l=this.ctx,b=this.current,w=b.font,F=b.textRenderingMode,B=b.fontSize/b.fontSizeScale,$=F&o.TextRenderingMode.FILL_STROKE_MASK,Z=!!(F&o.TextRenderingMode.ADD_TO_PATH_FLAG),re=b.patternFill&&!w.missingFile;let ie;(w.disableFontFace||Z||re)&&(ie=w.getPathGenerator(this.commonObjs,_)),w.disableFontFace||re?(l.save(),l.translate(P,G),l.beginPath(),ie(l,B),z&&l.setTransform(...z),($===o.TextRenderingMode.FILL||$===o.TextRenderingMode.FILL_STROKE)&&l.fill(),($===o.TextRenderingMode.STROKE||$===o.TextRenderingMode.FILL_STROKE)&&l.stroke(),l.restore()):(($===o.TextRenderingMode.FILL||$===o.TextRenderingMode.FILL_STROKE)&&l.fillText(_,P,G),($===o.TextRenderingMode.STROKE||$===o.TextRenderingMode.FILL_STROKE)&&l.strokeText(_,P,G)),Z&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,n.getCurrentTransform)(l),x:P,y:G,fontSize:B,addToPath:ie})}get isFontSubpixelAAEnabled(){const{context:_}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);_.scale(1.5,1),_.fillText("I",0,10);const P=_.getImageData(0,0,10,10).data;let G=!1;for(let z=3;z<P.length;z+=4)if(P[z]>0&&P[z]<255){G=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",G)}showText(_){const P=this.current,G=P.font;if(G.isType3Font)return this.showType3Text(_);const z=P.fontSize;if(z===0)return;const l=this.ctx,b=P.fontSizeScale,w=P.charSpacing,F=P.wordSpacing,B=P.fontDirection,$=P.textHScale*B,Z=_.length,re=G.vertical,ie=re?1:-1,ce=G.defaultVMetrics,oe=z*P.fontMatrix[0],ue=P.textRenderingMode===o.TextRenderingMode.FILL&&!G.disableFontFace&&!P.patternFill;l.save(),l.transform(...P.textMatrix),l.translate(P.x,P.y+P.textRise),B>0?l.scale($,-1):l.scale($,1);let me;if(P.patternFill){l.save();const Ae=P.fillColor.getPattern(l,this,(0,n.getCurrentTransformInverse)(l),g.PathType.FILL);me=(0,n.getCurrentTransform)(l),l.restore(),l.fillStyle=Ae}let ye=P.lineWidth;const _e=P.textMatrixScale;if(_e===0||ye===0){const Ae=P.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(Ae===o.TextRenderingMode.STROKE||Ae===o.TextRenderingMode.FILL_STROKE)&&(ye=this.getSinglePixelWidth())}else ye/=_e;b!==1&&(l.scale(b,b),ye/=b),l.lineWidth=ye;let Ee=0,Me;for(Me=0;Me<Z;++Me){const Ae=_[Me];if(typeof Ae=="number"){Ee+=ie*Ae*z/1e3;continue}let Ve=!1;const Ke=(Ae.isSpace?F:0)+w,Fe=Ae.fontChar,we=Ae.accent;let ae,be,De=Ae.width;if(re){const ge=Ae.vmetric||ce,Re=-(Ae.vmetric?ge[1]:De*.5)*oe,Le=ge[2]*oe;De=ge?-ge[0]:De,ae=Re/b,be=(Ee+Le)/b}else ae=Ee/b,be=0;if(G.remeasure&&De>0){const ge=l.measureText(Fe).width*1e3/z*b;if(De<ge&&this.isFontSubpixelAAEnabled){const Re=De/ge;Ve=!0,l.save(),l.scale(Re,1),ae/=Re}else De!==ge&&(ae+=(De-ge)/2e3*z/b)}if(this.contentVisible&&(Ae.isInFont||G.missingFile)){if(ue&&!we)l.fillText(Fe,ae,be);else if(this.paintChar(Fe,ae,be,me),we){const ge=ae+z*we.offset.x/b,Re=be-z*we.offset.y/b;this.paintChar(we.fontChar,ge,Re,me)}}let Ye;re?Ye=De*oe-Ke*B:Ye=De*oe+Ke*B,Ee+=Ye,Ve&&l.restore()}re?P.y-=Ee:P.x+=Ee*$,l.restore(),this.compose()}showType3Text(_){const P=this.ctx,G=this.current,z=G.font,l=G.fontSize,b=G.fontDirection,w=z.vertical?1:-1,F=G.charSpacing,B=G.wordSpacing,$=G.textHScale*b,Z=G.fontMatrix||o.FONT_IDENTITY_MATRIX,re=_.length,ie=G.textRenderingMode===o.TextRenderingMode.INVISIBLE;let ce,oe,ue,me;if(!(ie||l===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,P.save(),P.transform(...G.textMatrix),P.translate(G.x,G.y),P.scale($,b),ce=0;ce<re;++ce){if(oe=_[ce],typeof oe=="number"){me=w*oe*l/1e3,this.ctx.translate(me,0),G.x+=me*$;continue}const ye=(oe.isSpace?B:0)+F,_e=z.charProcOperatorList[oe.operatorListId];if(!_e){(0,o.warn)(`Type3 character "${oe.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=oe,this.save(),P.scale(l,l),P.transform(...Z),this.executeOperatorList(_e),this.restore()),ue=o.Util.applyTransform([oe.width,0],Z)[0]*l+ye,P.translate(ue,0),G.x+=ue*$}P.restore(),this.processingType3=null}}setCharWidth(_,P){}setCharWidthAndBounds(_,P,G,z,l,b){this.ctx.rect(G,z,l-G,b-z),this.ctx.clip(),this.endPath()}getColorN_Pattern(_){let P;if(_[0]==="TilingPattern"){const G=_[1],z=this.baseTransform||(0,n.getCurrentTransform)(this.ctx),l={createCanvasGraphics:b=>new ve(b,this.commonObjs,this.objs,this.canvasFactory)};P=new g.TilingPattern(_,G,this.ctx,l,z)}else P=this._getPattern(_[1],_[2]);return P}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(_,P,G){var z;const l=((z=this.selectColor)===null||z===void 0?void 0:z.call(this,_,P,G))||o.Util.makeHexColor(_,P,G);this.ctx.strokeStyle=l,this.current.strokeColor=l}setFillRGBColor(_,P,G){var z;const l=((z=this.selectColor)===null||z===void 0?void 0:z.call(this,_,P,G))||o.Util.makeHexColor(_,P,G);this.ctx.fillStyle=l,this.current.fillColor=l,this.current.patternFill=!1}_getPattern(_){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,G;return this.cachedPatterns.has(_)?G=this.cachedPatterns.get(_):(G=(0,g.getShadingPattern)(this.objs.get(_)),this.cachedPatterns.set(_,G)),P&&(G.matrix=P),G}shadingFill(_){if(!this.contentVisible)return;const P=this.ctx;this.save();const G=this._getPattern(_);P.fillStyle=G.getPattern(P,this,(0,n.getCurrentTransformInverse)(P),g.PathType.SHADING);const z=(0,n.getCurrentTransformInverse)(P);if(z){const l=P.canvas,b=l.width,w=l.height,F=o.Util.applyTransform([0,0],z),B=o.Util.applyTransform([0,w],z),$=o.Util.applyTransform([b,0],z),Z=o.Util.applyTransform([b,w],z),re=Math.min(F[0],B[0],$[0],Z[0]),ie=Math.min(F[1],B[1],$[1],Z[1]),ce=Math.max(F[0],B[0],$[0],Z[0]),oe=Math.max(F[1],B[1],$[1],Z[1]);this.ctx.fillRect(re,ie,ce-re,oe-ie)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(_,P){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(_)&&_.length===6&&this.transform(..._),this.baseTransform=(0,n.getCurrentTransform)(this.ctx),P)){const G=P[2]-P[0],z=P[3]-P[1];this.ctx.rect(P[0],P[1],G,z),this.current.updateRectMinMax((0,n.getCurrentTransform)(this.ctx),P),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(_){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const P=this.ctx;_.isolated||(0,o.info)("TODO: Support non-isolated groups."),_.knockout&&(0,o.warn)("Knockout groups not supported.");const G=(0,n.getCurrentTransform)(P);if(_.matrix&&P.transform(..._.matrix),!_.bbox)throw new Error("Bounding box is required.");let z=o.Util.getAxialAlignedBoundingBox(_.bbox,(0,n.getCurrentTransform)(P));const l=[0,0,P.canvas.width,P.canvas.height];z=o.Util.intersect(z,l)||[0,0,0,0];const b=Math.floor(z[0]),w=Math.floor(z[1]);let F=Math.max(Math.ceil(z[2])-b,1),B=Math.max(Math.ceil(z[3])-w,1),$=1,Z=1;F>E&&($=F/E,F=E),B>E&&(Z=B/E,B=E),this.current.startNewPathAndClipBox([0,0,F,B]);let re="groupAt"+this.groupLevel;_.smask&&(re+="_smask_"+this.smaskCounter++%2);const ie=this.cachedCanvases.getCanvas(re,F,B),ce=ie.context;ce.scale(1/$,1/Z),ce.translate(-b,-w),ce.transform(...G),_.smask?this.smaskStack.push({canvas:ie.canvas,context:ce,offsetX:b,offsetY:w,scaleX:$,scaleY:Z,subtype:_.smask.subtype,backdrop:_.smask.backdrop,transferMap:_.smask.transferMap||null,startTransformInverse:null}):(P.setTransform(1,0,0,1,0,0),P.translate(b,w),P.scale($,Z),P.save()),T(P,ce),this.ctx=ce,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(P),this.groupLevel++}endGroup(_){if(!this.contentVisible)return;this.groupLevel--;const P=this.ctx,G=this.groupStack.pop();if(this.ctx=G,this.ctx.imageSmoothingEnabled=!1,_.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const z=(0,n.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...z);const l=o.Util.getAxialAlignedBoundingBox([0,0,P.canvas.width,P.canvas.height],z);this.ctx.drawImage(P.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(_,P,G,z,l){if(v(this,le,Ce).call(this),N(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(P)&&P.length===4){const b=P[2]-P[0],w=P[3]-P[1];if(l&&this.annotationCanvasMap){G=G.slice(),G[4]-=P[0],G[5]-=P[1],P=P.slice(),P[0]=P[1]=0,P[2]=b,P[3]=w;const[F,B]=o.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(this.ctx)),{viewportScale:$}=this,Z=Math.ceil(b*this.outputScaleX*$),re=Math.ceil(w*this.outputScaleY*$);this.annotationCanvas=this.canvasFactory.create(Z,re);const{canvas:ie,context:ce}=this.annotationCanvas;this.annotationCanvasMap.set(_,ie),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ce,this.ctx.setTransform(F,0,0,-B,0,w*B),N(this.ctx,this.foregroundColor)}else N(this.ctx,this.foregroundColor),this.ctx.rect(P[0],P[1],b,w),this.ctx.clip(),this.endPath()}this.current=new s(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...G),this.transform(...z)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(_){if(!this.contentVisible)return;const P=_.count;_=this.getObject(_.data,_),_.count=P;const G=this.ctx,z=this.processingType3;if(z&&(z.compiled===void 0&&(z.compiled=a(_)),z.compiled)){z.compiled(G);return}const l=this._createMaskCanvas(_),b=l.canvas;G.save(),G.setTransform(1,0,0,1,0,0),G.drawImage(b,l.offsetX,l.offsetY),G.restore(),this.compose()}paintImageMaskXObjectRepeat(_,P){let G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4?arguments[4]:void 0,b=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;_=this.getObject(_.data,_);const w=this.ctx;w.save();const F=(0,n.getCurrentTransform)(w);w.transform(P,G,z,l,0,0);const B=this._createMaskCanvas(_);w.setTransform(1,0,0,1,0,0);for(let $=0,Z=b.length;$<Z;$+=2){const re=o.Util.transform(F,[P,G,z,l,b[$],b[$+1]]),[ie,ce]=o.Util.applyTransform([0,0],re);w.drawImage(B.canvas,ie,ce)}w.restore(),this.compose()}paintImageMaskXObjectGroup(_){if(!this.contentVisible)return;const P=this.ctx,G=this.current.fillColor,z=this.current.patternFill;for(const l of _){const{data:b,width:w,height:F,transform:B}=l,$=this.cachedCanvases.getCanvas("maskCanvas",w,F),Z=$.context;Z.save();const re=this.getObject(b,l);p(Z,re),Z.globalCompositeOperation="source-in",Z.fillStyle=z?G.getPattern(Z,this,(0,n.getCurrentTransformInverse)(P),g.PathType.FILL):G,Z.fillRect(0,0,w,F),Z.restore(),P.save(),P.transform(...B),P.scale(1,-1),d(P,$.canvas,0,0,w,F,0,-1,1,1),P.restore()}this.compose()}paintImageXObject(_){if(!this.contentVisible)return;const P=this.getObject(_);if(!P){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(P)}paintImageXObjectRepeat(_,P,G,z){if(!this.contentVisible)return;const l=this.getObject(_);if(!l){(0,o.warn)("Dependent image isn't ready yet");return}const b=l.width,w=l.height,F=[];for(let B=0,$=z.length;B<$;B+=2)F.push({transform:[P,0,0,G,z[B],z[B+1]],x:0,y:0,w:b,h:w});this.paintInlineImageXObjectGroup(l,F)}paintInlineImageXObject(_){if(!this.contentVisible)return;const P=_.width,G=_.height,z=this.ctx;this.save(),z.scale(1/P,-1/G);let l;if(typeof HTMLElement=="function"&&_ instanceof HTMLElement||!_.data)l=_;else{const B=this.cachedCanvases.getCanvas("inlineImage",P,G),$=B.context;m($,_,this.current.transferMaps),l=B.canvas}const b=this._scaleImage(l,(0,n.getCurrentTransformInverse)(z));z.imageSmoothingEnabled=H((0,n.getCurrentTransform)(z),_.interpolate);const[w,F]=d(z,b.img,0,0,b.paintWidth,b.paintHeight,0,-G,P,G);if(this.imageLayer){const[B,$]=o.Util.applyTransform([0,-G],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:_,left:B,top:$,width:w,height:F})}this.compose(),this.restore()}paintInlineImageXObjectGroup(_,P){if(!this.contentVisible)return;const G=this.ctx,z=_.width,l=_.height,b=this.cachedCanvases.getCanvas("inlineImage",z,l),w=b.context;m(w,_,this.current.transferMaps);for(const F of P){if(G.save(),G.transform(...F.transform),G.scale(1,-1),d(G,b.canvas,F.x,F.y,F.w,F.h,0,-1,1,1),this.imageLayer){const[B,$]=o.Util.applyTransform([F.x,F.y],(0,n.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:_,left:B,top:$,width:z,height:l})}G.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(_){}markPointProps(_,P){}beginMarkedContent(_){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(_,P){_==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(P)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(_){const P=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(_);const G=this.ctx;this.pendingClip&&(P||(this.pendingClip===J?G.clip("evenodd"):G.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),G.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const _=(0,n.getCurrentTransform)(this.ctx);if(_[1]===0&&_[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(_[0]),Math.abs(_[3]));else{const P=Math.abs(_[0]*_[3]-_[2]*_[1]),G=Math.hypot(_[0],_[2]),z=Math.hypot(_[1],_[3]);this._cachedGetSinglePixelWidth=Math.max(G,z)/P}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:_}=this.current,P=(0,n.getCurrentTransform)(this.ctx);let G,z;if(P[1]===0&&P[2]===0){const l=Math.abs(P[0]),b=Math.abs(P[3]);if(_===0)G=1/l,z=1/b;else{const w=l*_,F=b*_;G=w<1?1/w:1,z=F<1?1/F:1}}else{const l=Math.abs(P[0]*P[3]-P[2]*P[1]),b=Math.hypot(P[0],P[1]),w=Math.hypot(P[2],P[3]);if(_===0)G=w/l,z=b/l;else{const F=_*l;G=w>F?w/F:1,z=b>F?b/F:1}}this._cachedScaleForStroking=[G,z]}return this._cachedScaleForStroking}rescaleAndStroke(_){const{ctx:P}=this,{lineWidth:G}=this.current,[z,l]=this.getScaleForStroking();if(P.lineWidth=G||1,z===1&&l===1){P.stroke();return}let b,w,F;_&&(b=(0,n.getCurrentTransform)(P),w=P.getLineDash().slice(),F=P.lineDashOffset),P.scale(z,l);const B=Math.max(z,l);P.setLineDash(P.getLineDash().map($=>$/B)),P.lineDashOffset/=B,P.stroke(),_&&(P.setTransform(...b),P.setLineDash(w),P.lineDashOffset=F)}isContentVisible(){for(let _=this.markedContentStack.length-1;_>=0;_--)if(!this.markedContentStack[_].visible)return!1;return!0}}i.CanvasGraphics=ve;function Ce(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}for(const V in o.OPS)ve.prototype[V]!==void 0&&(ve.prototype[o.OPS[V]]=ve.prototype[V])},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TilingPattern=i.PathType=void 0,i.getShadingPattern=O;var n=t(1),o=t(133),g=t(3);const A={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};i.PathType=A;function R(L,c){if(!c||g.isNodeJS)return;const h=c[2]-c[0],d=c[3]-c[1],a=new Path2D;a.rect(c[0],c[1],h,d),L.clip(a)}class C{constructor(){this.constructor===C&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class y extends C{constructor(c){super(),this._type=c[1],this._bbox=c[2],this._colorStops=c[3],this._p0=c[4],this._p1=c[5],this._r0=c[6],this._r1=c[7],this.matrix=null}_createGradient(c){let h;this._type==="axial"?h=c.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(h=c.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const d of this._colorStops)h.addColorStop(d[0],d[1]);return h}getPattern(c,h,d,a){let s;if(a===A.STROKE||a===A.FILL){const m=h.current.getClippedPathBoundingBox(a,(0,o.getCurrentTransform)(c))||[0,0,0,0],p=Math.ceil(m[2]-m[0])||1,T=Math.ceil(m[3]-m[1])||1,N=h.cachedCanvases.getCanvas("pattern",p,T,!0),M=N.context;M.clearRect(0,0,M.canvas.width,M.canvas.height),M.beginPath(),M.rect(0,0,M.canvas.width,M.canvas.height),M.translate(-m[0],-m[1]),d=n.Util.transform(d,[1,0,0,1,m[0],m[1]]),M.transform(...h.baseTransform),this.matrix&&M.transform(...this.matrix),R(M,this._bbox),M.fillStyle=this._createGradient(M),M.fill(),s=c.createPattern(N.canvas,"no-repeat");const Q=new DOMMatrix(d);try{s.setTransform(Q)}catch(q){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${q?.message}".`)}}else R(c,this._bbox),s=this._createGradient(c);return s}}function v(L,c,h,d,a,s,m,p){const T=c.coords,N=c.colors,M=L.data,Q=L.width*4;let q;T[h+1]>T[d+1]&&(q=h,h=d,d=q,q=s,s=m,m=q),T[d+1]>T[a+1]&&(q=d,d=a,a=q,q=m,m=p,p=q),T[h+1]>T[d+1]&&(q=h,h=d,d=q,q=s,s=m,m=q);const X=(T[h]+c.offsetX)*c.scaleX,K=(T[h+1]+c.offsetY)*c.scaleY,H=(T[d]+c.offsetX)*c.scaleX,U=(T[d+1]+c.offsetY)*c.scaleY,W=(T[a]+c.offsetX)*c.scaleX,D=(T[a+1]+c.offsetY)*c.scaleY;if(K>=D)return;const J=N[s],le=N[s+1],ve=N[s+2],Ce=N[m],V=N[m+1],_=N[m+2],P=N[p],G=N[p+1],z=N[p+2],l=Math.round(K),b=Math.round(D);let w,F,B,$,Z,re,ie,ce;for(let oe=l;oe<=b;oe++){if(oe<U){let Ee;oe<K?Ee=0:Ee=(K-oe)/(K-U),w=X-(X-H)*Ee,F=J-(J-Ce)*Ee,B=le-(le-V)*Ee,$=ve-(ve-_)*Ee}else{let Ee;oe>D?Ee=1:U===D?Ee=0:Ee=(U-oe)/(U-D),w=H-(H-W)*Ee,F=Ce-(Ce-P)*Ee,B=V-(V-G)*Ee,$=_-(_-z)*Ee}let ue;oe<K?ue=0:oe>D?ue=1:ue=(K-oe)/(K-D),Z=X-(X-W)*ue,re=J-(J-P)*ue,ie=le-(le-G)*ue,ce=ve-(ve-z)*ue;const me=Math.round(Math.min(w,Z)),ye=Math.round(Math.max(w,Z));let _e=Q*oe+me*4;for(let Ee=me;Ee<=ye;Ee++)ue=(w-Ee)/(w-Z),ue<0?ue=0:ue>1&&(ue=1),M[_e++]=F-(F-re)*ue|0,M[_e++]=B-(B-ie)*ue|0,M[_e++]=$-($-ce)*ue|0,M[_e++]=255}}function I(L,c,h){const d=c.coords,a=c.colors;let s,m;switch(c.type){case"lattice":const p=c.verticesPerRow,T=Math.floor(d.length/p)-1,N=p-1;for(s=0;s<T;s++){let M=s*p;for(let Q=0;Q<N;Q++,M++)v(L,h,d[M],d[M+1],d[M+p],a[M],a[M+1],a[M+p]),v(L,h,d[M+p+1],d[M+1],d[M+p],a[M+p+1],a[M+1],a[M+p])}break;case"triangles":for(s=0,m=d.length;s<m;s+=3)v(L,h,d[s],d[s+1],d[s+2],a[s],a[s+1],a[s+2]);break;default:throw new Error("illegal figure")}}class u extends C{constructor(c){super(),this._coords=c[2],this._colors=c[3],this._figures=c[4],this._bounds=c[5],this._bbox=c[7],this._background=c[8],this.matrix=null}_createMeshCanvas(c,h,d){const p=Math.floor(this._bounds[0]),T=Math.floor(this._bounds[1]),N=Math.ceil(this._bounds[2])-p,M=Math.ceil(this._bounds[3])-T,Q=Math.min(Math.ceil(Math.abs(N*c[0]*1.1)),3e3),q=Math.min(Math.ceil(Math.abs(M*c[1]*1.1)),3e3),X=N/Q,K=M/q,H={coords:this._coords,colors:this._colors,offsetX:-p,offsetY:-T,scaleX:1/X,scaleY:1/K},U=Q+2*2,W=q+2*2,D=d.getCanvas("mesh",U,W,!1),J=D.context,le=J.createImageData(Q,q);if(h){const Ce=le.data;for(let V=0,_=Ce.length;V<_;V+=4)Ce[V]=h[0],Ce[V+1]=h[1],Ce[V+2]=h[2],Ce[V+3]=255}for(const Ce of this._figures)I(le,Ce,H);return J.putImageData(le,2,2),{canvas:D.canvas,offsetX:p-2*X,offsetY:T-2*K,scaleX:X,scaleY:K}}getPattern(c,h,d,a){R(c,this._bbox);let s;if(a===A.SHADING)s=n.Util.singularValueDecompose2dScale((0,o.getCurrentTransform)(c));else if(s=n.Util.singularValueDecompose2dScale(h.baseTransform),this.matrix){const p=n.Util.singularValueDecompose2dScale(this.matrix);s=[s[0]*p[0],s[1]*p[1]]}const m=this._createMeshCanvas(s,a===A.SHADING?null:this._background,h.cachedCanvases);return a!==A.SHADING&&(c.setTransform(...h.baseTransform),this.matrix&&c.transform(...this.matrix)),c.translate(m.offsetX,m.offsetY),c.scale(m.scaleX,m.scaleY),c.createPattern(m.canvas,"no-repeat")}}class E extends C{getPattern(){return"hotpink"}}function O(L){switch(L[0]){case"RadialAxial":return new y(L);case"Mesh":return new u(L);case"Dummy":return new E}throw new Error(`Unknown IR type: ${L[0]}`)}const S={COLORED:1,UNCOLORED:2};class x{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(c,h,d,a,s){this.operatorList=c[2],this.matrix=c[3]||[1,0,0,1,0,0],this.bbox=c[4],this.xstep=c[5],this.ystep=c[6],this.paintType=c[7],this.tilingType=c[8],this.color=h,this.ctx=d,this.canvasGraphicsFactory=a,this.baseTransform=s}createPatternCanvas(c){const h=this.operatorList,d=this.bbox,a=this.xstep,s=this.ystep,m=this.paintType,p=this.tilingType,T=this.color,N=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+p);const M=d[0],Q=d[1],q=d[2],X=d[3],K=n.Util.singularValueDecompose2dScale(this.matrix),H=n.Util.singularValueDecompose2dScale(this.baseTransform),U=[K[0]*H[0],K[1]*H[1]],W=this.getSizeAndScale(a,this.ctx.canvas.width,U[0]),D=this.getSizeAndScale(s,this.ctx.canvas.height,U[1]),J=c.cachedCanvases.getCanvas("pattern",W.size,D.size,!0),le=J.context,ve=N.createCanvasGraphics(le);ve.groupLevel=c.groupLevel,this.setFillAndStrokeStyleToContext(ve,m,T);let Ce=M,V=Q,_=q,P=X;return M<0&&(Ce=0,_+=Math.abs(M)),Q<0&&(V=0,P+=Math.abs(Q)),le.translate(-(W.scale*Ce),-(D.scale*V)),ve.transform(W.scale,0,0,D.scale,0,0),le.save(),this.clipBbox(ve,Ce,V,_,P),ve.baseTransform=(0,o.getCurrentTransform)(ve.ctx),ve.executeOperatorList(h),ve.endDrawing(),{canvas:J.canvas,scaleX:W.scale,scaleY:D.scale,offsetX:Ce,offsetY:V}}getSizeAndScale(c,h,d){c=Math.abs(c);const a=Math.max(x.MAX_PATTERN_SIZE,h);let s=Math.ceil(c*d);return s>=a?s=a:d=s/c,{scale:d,size:s}}clipBbox(c,h,d,a,s){const m=a-h,p=s-d;c.ctx.rect(h,d,m,p),c.current.updateRectMinMax((0,o.getCurrentTransform)(c.ctx),[h,d,a,s]),c.clip(),c.endPath()}setFillAndStrokeStyleToContext(c,h,d){const a=c.ctx,s=c.current;switch(h){case S.COLORED:const m=this.ctx;a.fillStyle=m.fillStyle,a.strokeStyle=m.strokeStyle,s.fillColor=m.fillStyle,s.strokeColor=m.strokeStyle;break;case S.UNCOLORED:const p=n.Util.makeHexColor(d[0],d[1],d[2]);a.fillStyle=p,a.strokeStyle=p,s.fillColor=p,s.strokeColor=p;break;default:throw new n.FormatError(`Unsupported paint type: ${h}`)}}getPattern(c,h,d,a){let s=d;a!==A.SHADING&&(s=n.Util.transform(s,h.baseTransform),this.matrix&&(s=n.Util.transform(s,this.matrix)));const m=this.createPatternCanvas(h);let p=new DOMMatrix(s);p=p.translate(m.offsetX,m.offsetY),p=p.scale(1/m.scaleX,1/m.scaleY);const T=c.createPattern(m.canvas,"repeat");try{T.setTransform(p)}catch(N){(0,n.warn)(`TilingPattern.getPattern: "${N?.message}".`)}return T}}i.TilingPattern=x},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.applyMaskImageData=o;var n=t(1);function o(g){let{src:A,srcPos:R=0,dest:C,destPos:y=0,width:v,height:I,inverseDecode:u=!1}=g;const E=n.FeatureTest.isLittleEndian?4278190080:255,[O,S]=u?[0,E]:[E,0],x=v>>3,L=v&7,c=A.length;C=new Uint32Array(C.buffer);for(let h=0;h<I;h++){for(const a=R+x;R<a;R++){const s=R<c?A[R]:255;C[y++]=s&128?S:O,C[y++]=s&64?S:O,C[y++]=s&32?S:O,C[y++]=s&16?S:O,C[y++]=s&8?S:O,C[y++]=s&4?S:O,C[y++]=s&2?S:O,C[y++]=s&1?S:O}if(L===0)continue;const d=R<c?A[R++]:255;for(let a=0;a<L;a++)C[y++]=d&1<<7-a?S:O}return{srcPos:R,destPos:y}}},(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlobalWorkerOptions=void 0;const t=Object.create(null);i.GlobalWorkerOptions=t,t.workerPort=t.workerPort===void 0?null:t.workerPort,t.workerSrc=t.workerSrc===void 0?"":t.workerSrc},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MessageHandler=void 0;var n=t(1);const o={DATA:1,ERROR:2},g={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function A(C){switch(C instanceof Error||typeof C=="object"&&C!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),C.name){case"AbortException":return new n.AbortException(C.message);case"MissingPDFException":return new n.MissingPDFException(C.message);case"PasswordException":return new n.PasswordException(C.message,C.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(C.message,C.status);case"UnknownErrorException":return new n.UnknownErrorException(C.message,C.details);default:return new n.UnknownErrorException(C.message,C.toString())}}class R{constructor(y,v,I){this.sourceName=y,this.targetName=v,this.comObj=I,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=u=>{const E=u.data;if(E.targetName!==this.sourceName)return;if(E.stream){this._processStreamMessage(E);return}if(E.callback){const S=E.callbackId,x=this.callbackCapabilities[S];if(!x)throw new Error(`Cannot resolve callback ${S}`);if(delete this.callbackCapabilities[S],E.callback===o.DATA)x.resolve(E.data);else if(E.callback===o.ERROR)x.reject(A(E.reason));else throw new Error("Unexpected callback case");return}const O=this.actionHandler[E.action];if(!O)throw new Error(`Unknown action from worker: ${E.action}`);if(E.callbackId){const S=this.sourceName,x=E.sourceName;new Promise(function(L){L(O(E.data))}).then(function(L){I.postMessage({sourceName:S,targetName:x,callback:o.DATA,callbackId:E.callbackId,data:L})},function(L){I.postMessage({sourceName:S,targetName:x,callback:o.ERROR,callbackId:E.callbackId,reason:A(L)})});return}if(E.streamId){this._createStreamSink(E);return}O(E.data)},I.addEventListener("message",this._onComObjOnMessage)}on(y,v){const I=this.actionHandler;if(I[y])throw new Error(`There is already an actionName called "${y}"`);I[y]=v}send(y,v,I){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:v},I)}sendWithPromise(y,v,I){const u=this.callbackId++,E=(0,n.createPromiseCapability)();this.callbackCapabilities[u]=E;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:u,data:v},I)}catch(O){E.reject(O)}return E.promise}sendWithStream(y,v,I,u){const E=this.streamId++,O=this.sourceName,S=this.targetName,x=this.comObj;return new ReadableStream({start:L=>{const c=(0,n.createPromiseCapability)();return this.streamControllers[E]={controller:L,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},x.postMessage({sourceName:O,targetName:S,action:y,streamId:E,data:v,desiredSize:L.desiredSize},u),c.promise},pull:L=>{const c=(0,n.createPromiseCapability)();return this.streamControllers[E].pullCall=c,x.postMessage({sourceName:O,targetName:S,stream:g.PULL,streamId:E,desiredSize:L.desiredSize}),c.promise},cancel:L=>{(0,n.assert)(L instanceof Error,"cancel must have a valid reason");const c=(0,n.createPromiseCapability)();return this.streamControllers[E].cancelCall=c,this.streamControllers[E].isClosed=!0,x.postMessage({sourceName:O,targetName:S,stream:g.CANCEL,streamId:E,reason:A(L)}),c.promise}},I)}_createStreamSink(y){const v=y.streamId,I=this.sourceName,u=y.sourceName,E=this.comObj,O=this,S=this.actionHandler[y.action],x={enqueue(L){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,h=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=c,d>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),E.postMessage({sourceName:I,targetName:u,stream:g.ENQUEUE,streamId:v,chunk:L},h)},close(){this.isCancelled||(this.isCancelled=!0,E.postMessage({sourceName:I,targetName:u,stream:g.CLOSE,streamId:v}),delete O.streamSinks[v])},error(L){(0,n.assert)(L instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,E.postMessage({sourceName:I,targetName:u,stream:g.ERROR,streamId:v,reason:A(L)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};x.sinkCapability.resolve(),x.ready=x.sinkCapability.promise,this.streamSinks[v]=x,new Promise(function(L){L(S(y.data,x))}).then(function(){E.postMessage({sourceName:I,targetName:u,stream:g.START_COMPLETE,streamId:v,success:!0})},function(L){E.postMessage({sourceName:I,targetName:u,stream:g.START_COMPLETE,streamId:v,reason:A(L)})})}_processStreamMessage(y){const v=y.streamId,I=this.sourceName,u=y.sourceName,E=this.comObj,O=this.streamControllers[v],S=this.streamSinks[v];switch(y.stream){case g.START_COMPLETE:y.success?O.startCall.resolve():O.startCall.reject(A(y.reason));break;case g.PULL_COMPLETE:y.success?O.pullCall.resolve():O.pullCall.reject(A(y.reason));break;case g.PULL:if(!S){E.postMessage({sourceName:I,targetName:u,stream:g.PULL_COMPLETE,streamId:v,success:!0});break}S.desiredSize<=0&&y.desiredSize>0&&S.sinkCapability.resolve(),S.desiredSize=y.desiredSize,new Promise(function(x){x(S.onPull&&S.onPull())}).then(function(){E.postMessage({sourceName:I,targetName:u,stream:g.PULL_COMPLETE,streamId:v,success:!0})},function(x){E.postMessage({sourceName:I,targetName:u,stream:g.PULL_COMPLETE,streamId:v,reason:A(x)})});break;case g.ENQUEUE:if((0,n.assert)(O,"enqueue should have stream controller"),O.isClosed)break;O.controller.enqueue(y.chunk);break;case g.CLOSE:if((0,n.assert)(O,"close should have stream controller"),O.isClosed)break;O.isClosed=!0,O.controller.close(),this._deleteStreamController(O,v);break;case g.ERROR:(0,n.assert)(O,"error should have stream controller"),O.controller.error(A(y.reason)),this._deleteStreamController(O,v);break;case g.CANCEL_COMPLETE:y.success?O.cancelCall.resolve():O.cancelCall.reject(A(y.reason)),this._deleteStreamController(O,v);break;case g.CANCEL:if(!S)break;new Promise(function(x){x(S.onCancel&&S.onCancel(A(y.reason)))}).then(function(){E.postMessage({sourceName:I,targetName:u,stream:g.CANCEL_COMPLETE,streamId:v,success:!0})},function(x){E.postMessage({sourceName:I,targetName:u,stream:g.CANCEL_COMPLETE,streamId:v,reason:A(x)})}),S.sinkCapability.reject(A(y.reason)),S.isCancelled=!0,delete this.streamSinks[v];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(y,v){await Promise.allSettled([y.startCall&&y.startCall.promise,y.pullCall&&y.pullCall.promise,y.cancelCall&&y.cancelCall.promise]),delete this.streamControllers[v]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}i.MessageHandler=R},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Metadata=void 0;var n=t(1);function o(O,S,x){g(O,S),S.set(O,x)}function g(O,S){if(S.has(O))throw new TypeError("Cannot initialize the same private elements twice on an object")}function A(O,S){var x=y(O,S,"get");return R(O,x)}function R(O,S){return S.get?S.get.call(O):S.value}function C(O,S,x){var L=y(O,S,"set");return v(O,L,x),x}function y(O,S,x){if(!S.has(O))throw new TypeError("attempted to "+x+" private field on non-instance");return S.get(O)}function v(O,S,x){if(S.set)S.set.call(O,x);else{if(!S.writable)throw new TypeError("attempted to set read only private field");S.value=x}}var I=new WeakMap,u=new WeakMap;class E{constructor(S){let{parsedData:x,rawData:L}=S;o(this,I,{writable:!0,value:void 0}),o(this,u,{writable:!0,value:void 0}),C(this,I,x),C(this,u,L)}getRaw(){return A(this,u)}get(S){var x;return(x=A(this,I).get(S))!==null&&x!==void 0?x:null}getAll(){return(0,n.objectFromMap)(A(this,I))}has(S){return A(this,I).has(S)}}i.Metadata=E},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionalContentConfig=void 0;var n=t(1);function o(m,p){R(m,p),p.add(m)}function g(m,p,T){if(!p.has(m))throw new TypeError("attempted to get private field on non-instance");return T}function A(m,p,T){R(m,p),p.set(m,T)}function R(m,p){if(p.has(m))throw new TypeError("Cannot initialize the same private elements twice on an object")}function C(m,p,T){var N=I(m,p,"set");return y(m,N,T),T}function y(m,p,T){if(p.set)p.set.call(m,T);else{if(!p.writable)throw new TypeError("attempted to set read only private field");p.value=T}}function v(m,p){var T=I(m,p,"get");return u(m,T)}function I(m,p,T){if(!p.has(m))throw new TypeError("attempted to "+T+" private field on non-instance");return p.get(m)}function u(m,p){return p.get?p.get.call(m):p.value}const E=Symbol("INTERNAL");var O=new WeakMap;class S{constructor(p,T){A(this,O,{writable:!0,value:!0}),this.name=p,this.intent=T}get visible(){return v(this,O)}_setVisible(p,T){p!==E&&(0,n.unreachable)("Internal method `_setVisible` called."),C(this,O,T)}}var x=new WeakMap,L=new WeakMap,c=new WeakMap,h=new WeakMap,d=new WeakSet;class a{constructor(p){if(o(this,d),A(this,x,{writable:!0,value:!0}),A(this,L,{writable:!0,value:new Map}),A(this,c,{writable:!0,value:null}),A(this,h,{writable:!0,value:null}),this.name=null,this.creator=null,p!==null){this.name=p.name,this.creator=p.creator,C(this,h,p.order);for(const T of p.groups)v(this,L).set(T.id,new S(T.name,T.intent));if(p.baseState==="OFF")for(const T of v(this,L).values())T._setVisible(E,!1);for(const T of p.on)v(this,L).get(T)._setVisible(E,!0);for(const T of p.off)v(this,L).get(T)._setVisible(E,!1);C(this,c,new Map);for(const[T,N]of v(this,L))v(this,c).set(T,N.visible)}}isVisible(p){if(v(this,L).size===0)return!0;if(!p)return(0,n.warn)("Optional content group not defined."),!0;if(p.type==="OCG")return v(this,L).has(p.id)?v(this,L).get(p.id).visible:((0,n.warn)(`Optional content group not found: ${p.id}`),!0);if(p.type==="OCMD"){if(p.expression)return g(this,d,s).call(this,p.expression);if(!p.policy||p.policy==="AnyOn"){for(const T of p.ids){if(!v(this,L).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(v(this,L).get(T).visible)return!0}return!1}else if(p.policy==="AllOn"){for(const T of p.ids){if(!v(this,L).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(!v(this,L).get(T).visible)return!1}return!0}else if(p.policy==="AnyOff"){for(const T of p.ids){if(!v(this,L).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(!v(this,L).get(T).visible)return!0}return!1}else if(p.policy==="AllOff"){for(const T of p.ids){if(!v(this,L).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(v(this,L).get(T).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${p.policy}.`),!0}return(0,n.warn)(`Unknown group type ${p.type}.`),!0}setVisibility(p){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!v(this,L).has(p)){(0,n.warn)(`Optional content group not found: ${p}`);return}v(this,L).get(p)._setVisible(E,!!T),C(this,x,null)}get hasInitialVisibility(){if(v(this,x)!==null)return v(this,x);for(const[p,T]of v(this,L)){const N=v(this,c).get(p);if(T.visible!==N)return C(this,x,!1)}return C(this,x,!0)}getOrder(){return v(this,L).size?v(this,h)?v(this,h).slice():[...v(this,L).keys()]:null}getGroups(){return v(this,L).size>0?(0,n.objectFromMap)(v(this,L)):null}getGroup(p){return v(this,L).get(p)||null}}i.OptionalContentConfig=a;function s(m){const p=m.length;if(p<2)return!0;const T=m[0];for(let N=1;N<p;N++){const M=m[N];let Q;if(Array.isArray(M))Q=g(this,d,s).call(this,M);else if(v(this,L).has(M))Q=v(this,L).get(M).visible;else return(0,n.warn)(`Optional content group not found: ${M}`),!0;switch(T){case"And":if(!Q)return!1;break;case"Or":if(Q)return!0;break;case"Not":return!Q;default:return!0}}return T==="And"}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFDataTransportStream=void 0;var n=t(1),o=t(133);class g{constructor(y,v){(0,n.assert)(v,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=y.progressiveDone||!1,this._contentDispositionFilename=y.contentDispositionFilename||null;const I=y.initialData;if(I?.length>0){const u=new Uint8Array(I).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=v,this._isStreamingSupported=!y.disableStream,this._isRangeSupported=!y.disableRange,this._contentLength=y.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((u,E)=>{this._onReceiveData({begin:u,chunk:E})}),this._pdfDataRangeTransport.addProgressListener((u,E)=>{this._onProgress({loaded:u,total:E})}),this._pdfDataRangeTransport.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(y){const v=new Uint8Array(y.chunk).buffer;if(y.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(v):this._queuedChunks.push(v);else{const I=this._rangeReaders.some(function(u){return u._begin!==y.begin?!1:(u._enqueue(v),!0)});(0,n.assert)(I,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var y,v;return(y=(v=this._fullRequestReader)===null||v===void 0?void 0:v._loaded)!==null&&y!==void 0?y:0}_onProgress(y){if(y.total===void 0){const v=this._rangeReaders[0];v!=null&&v.onProgress&&v.onProgress({loaded:y.loaded})}else{const v=this._fullRequestReader;v!=null&&v.onProgress&&v.onProgress({loaded:y.loaded,total:y.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(y){const v=this._rangeReaders.indexOf(y);v>=0&&this._rangeReaders.splice(v,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const y=this._queuedChunks;return this._queuedChunks=null,new A(this,y,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(y,v){if(v<=this._progressiveDataLength)return null;const I=new R(this,y,v);return this._pdfDataRangeTransport.requestDataRange(y,v),this._rangeReaders.push(I),I}cancelAllRequests(y){this._fullRequestReader&&this._fullRequestReader.cancel(y);for(const v of this._rangeReaders.slice(0))v.cancel(y);this._pdfDataRangeTransport.abort()}}i.PDFDataTransportStream=g;class A{constructor(y,v){let I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;this._stream=y,this._done=I||!1,this._filename=(0,o.isPdfFile)(u)?u:null,this._queuedChunks=v||[],this._loaded=0;for(const E of this._queuedChunks)this._loaded+=E.byteLength;this._requests=[],this._headersReady=Promise.resolve(),y._fullRequestReader=this,this.onProgress=null}_enqueue(y){this._done||(this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunks.push(y),this._loaded+=y.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const y=(0,n.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class R{constructor(y,v,I){this._stream=y,this._begin=v,this._end=I,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(y){if(!this._done){if(this._requests.length===0)this._queuedChunk=y;else{this._requests.shift().resolve({value:y,done:!1});for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const y=(0,n.createPromiseCapability)();return this._requests.push(y),y.promise}cancel(y){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaText=void 0;class t{static textContent(o){const g=[],A={items:g,styles:Object.create(null)};function R(C){var y;if(!C)return;let v=null;const I=C.name;if(I==="#text")v=C.value;else if(t.shouldBuildText(I))C!=null&&(y=C.attributes)!==null&&y!==void 0&&y.textContent?v=C.attributes.textContent:C.value&&(v=C.value);else return;if(v!==null&&g.push({str:v}),!!C.children)for(const u of C.children)R(u)}return R(o),A}static shouldBuildText(o){return!(o==="textarea"||o==="input"||o==="option"||o==="select")}}i.XfaText=t},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NodeStandardFontDataFactory=i.NodeCanvasFactory=i.NodeCMapReaderFactory=void 0;var n=t(134);const o=function(C){return new Promise((y,v)=>{require$$7.readFile(C,(u,E)=>{if(u||!E){v(new Error(u));return}y(new Uint8Array(E))})})};class g extends n.BaseCanvasFactory{_createCanvas(y,v){return require$$7.createCanvas(y,v)}}i.NodeCanvasFactory=g;class A extends n.BaseCMapReaderFactory{_fetchData(y,v){return o(y).then(I=>({cMapData:I,compressionType:v}))}}i.NodeCMapReaderFactory=A;class R extends n.BaseStandardFontDataFactory{_fetchData(y){return o(y)}}i.NodeStandardFontDataFactory=R},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditorLayer=void 0;var n=t(132),o=t(1),g=t(148),A=t(149);function R(W,D){v(W,D),D.add(W)}function C(W,D,J){return D in W?Object.defineProperty(W,D,{value:J,enumerable:!0,configurable:!0,writable:!0}):W[D]=J,W}function y(W,D,J){v(W,D),D.set(W,J)}function v(W,D){if(D.has(W))throw new TypeError("Cannot initialize the same private elements twice on an object")}function I(W,D,J){if(!D.has(W))throw new TypeError("attempted to get private field on non-instance");return J}function u(W,D){var J=S(W,D,"get");return E(W,J)}function E(W,D){return D.get?D.get.call(W):D.value}function O(W,D,J){var le=S(W,D,"set");return x(W,le,J),J}function S(W,D,J){if(!D.has(W))throw new TypeError("attempted to "+J+" private field on non-instance");return D.get(W)}function x(W,D,J){if(D.set)D.set.call(W,J);else{if(!D.writable)throw new TypeError("attempted to set read only private field");D.value=J}}var L=new WeakMap,c=new WeakMap,h=new WeakMap,d=new WeakMap,a=new WeakMap,s=new WeakMap,m=new WeakMap,p=new WeakMap,T=new WeakSet,N=new WeakSet,M=new WeakSet,Q=new WeakSet;class q{constructor(D){R(this,Q),R(this,M),R(this,N),R(this,T),y(this,L,{writable:!0,value:void 0}),y(this,c,{writable:!0,value:!1}),y(this,h,{writable:!0,value:this.pointerup.bind(this)}),y(this,d,{writable:!0,value:this.pointerdown.bind(this)}),y(this,a,{writable:!0,value:new Map}),y(this,s,{writable:!0,value:!1}),y(this,m,{writable:!0,value:!1}),y(this,p,{writable:!0,value:void 0}),q._initialized||(q._initialized=!0,g.FreeTextEditor.initialize(D.l10n),A.InkEditor.initialize(D.l10n),D.uiManager.registerEditorTypes([g.FreeTextEditor,A.InkEditor])),O(this,p,D.uiManager),this.annotationStorage=D.annotationStorage,this.pageIndex=D.pageIndex,this.div=D.div,O(this,L,D.accessibilityManager),u(this,p).addLayer(this)}updateToolbar(D){u(this,p).updateToolbar(D)}updateMode(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u(this,p).getMode();I(this,Q,U).call(this),D===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),u(this,p).unselectAll()}addInkEditorIfNeeded(D){if(!D&&u(this,p).getMode()!==o.AnnotationEditorType.INK)return;if(!D){for(const le of u(this,a).values())if(le.isEmpty()){le.setInBackground();return}}I(this,M,H).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(D){u(this,p).setEditingState(D)}addCommands(D){u(this,p).addCommands(D)}enable(){this.div.style.pointerEvents="auto";for(const D of u(this,a).values())D.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const D of u(this,a).values())D.disableEditing()}setActiveEditor(D){u(this,p).getActive()!==D&&u(this,p).setActiveEditor(D)}enableClick(){this.div.addEventListener("pointerdown",u(this,d)),this.div.addEventListener("pointerup",u(this,h))}disableClick(){this.div.removeEventListener("pointerdown",u(this,d)),this.div.removeEventListener("pointerup",u(this,h))}attach(D){u(this,a).set(D.id,D)}detach(D){var J;u(this,a).delete(D.id),(J=u(this,L))===null||J===void 0||J.removePointerInTextLayer(D.contentDiv)}remove(D){u(this,p).removeEditor(D),this.detach(D),this.annotationStorage.remove(D.id),D.div.style.display="none",setTimeout(()=>{D.div.style.display="",D.div.remove(),D.isAttachedToDOM=!1,document.activeElement===document.body&&u(this,p).focusMainContainer()},0),u(this,m)||this.addInkEditorIfNeeded(!1)}add(D){if(I(this,T,X).call(this,D),u(this,p).addEditor(D),this.attach(D),!D.isAttachedToDOM){const J=D.render();this.div.append(J),D.isAttachedToDOM=!0}this.moveEditorInDOM(D),D.onceAdded(),this.addToAnnotationStorage(D)}moveEditorInDOM(D){var J;(J=u(this,L))===null||J===void 0||J.moveElementInDOM(this.div,D.div,D.contentDiv,!0)}addToAnnotationStorage(D){!D.isEmpty()&&!this.annotationStorage.has(D.id)&&this.annotationStorage.setValue(D.id,D)}addOrRebuild(D){D.needsToBeRebuilt()?D.rebuild():this.add(D)}addANewEditor(D){const J=()=>{this.addOrRebuild(D)},le=()=>{D.remove()};this.addCommands({cmd:J,undo:le,mustExec:!0})}addUndoableEditor(D){const J=()=>{this.addOrRebuild(D)},le=()=>{D.remove()};this.addCommands({cmd:J,undo:le,mustExec:!1})}getNextId(){return u(this,p).getId()}deserialize(D){switch(D.annotationType){case o.AnnotationEditorType.FREETEXT:return g.FreeTextEditor.deserialize(D,this);case o.AnnotationEditorType.INK:return A.InkEditor.deserialize(D,this)}return null}setSelected(D){u(this,p).setSelected(D)}toggleSelected(D){u(this,p).toggleSelected(D)}isSelected(D){return u(this,p).isSelected(D)}unselect(D){u(this,p).unselect(D)}pointerup(D){const J=n.KeyboardManager.platform.isMac;if(!(D.button!==0||D.ctrlKey&&J)&&D.target===this.div&&u(this,s)){if(O(this,s,!1),!u(this,c)){O(this,c,!0);return}I(this,M,H).call(this,D)}}pointerdown(D){const J=n.KeyboardManager.platform.isMac;if(D.button!==0||D.ctrlKey&&J||D.target!==this.div)return;O(this,s,!0);const le=u(this,p).getActive();O(this,c,!le||le.isEmpty())}drop(D){const J=D.dataTransfer.getData("text/plain"),le=u(this,p).getEditor(J);if(!le)return;D.preventDefault(),D.dataTransfer.dropEffect="move",I(this,T,X).call(this,le);const ve=this.div.getBoundingClientRect(),Ce=D.clientX-ve.x,V=D.clientY-ve.y;le.translate(Ce-le.startX,V-le.startY),this.moveEditorInDOM(le),le.div.focus()}dragover(D){D.preventDefault()}destroy(){var D;((D=u(this,p).getActive())===null||D===void 0?void 0:D.parent)===this&&u(this,p).setActiveEditor(null);for(const le of u(this,a).values()){var J;(J=u(this,L))===null||J===void 0||J.removePointerInTextLayer(le.contentDiv),le.isAttachedToDOM=!1,le.div.remove(),le.parent=null}this.div=null,u(this,a).clear(),u(this,p).removeLayer(this)}render(D){this.viewport=D.viewport,(0,n.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const J of u(this,p).getEditors(this.pageIndex))this.add(J);this.updateMode()}update(D){this.viewport=D.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[D,J,le,ve]=this.viewport.viewBox,Ce=le-D,V=ve-J;return[Ce,V]}get viewportBaseDimensions(){const{width:D,height:J,rotation:le}=this.viewport;return le%180===0?[D,J]:[J,D]}setDimensions(){const{width:D,height:J,rotation:le}=this.viewport,ve=le%180!==0,Ce=Math.floor(D)+"px",V=Math.floor(J)+"px";this.div.style.width=ve?V:Ce,this.div.style.height=ve?Ce:V,this.div.setAttribute("data-main-rotation",le)}}i.AnnotationEditorLayer=q;function X(W){var D;W.parent!==this&&(this.attach(W),W.pageIndex=this.pageIndex,(D=W.parent)===null||D===void 0||D.detach(W),W.parent=this,W.div&&W.isAttachedToDOM&&(W.div.remove(),this.div.append(W.div)))}function K(W){switch(u(this,p).getMode()){case o.AnnotationEditorType.FREETEXT:return new g.FreeTextEditor(W);case o.AnnotationEditorType.INK:return new A.InkEditor(W)}return null}function H(W){const D=this.getNextId(),J=I(this,N,K).call(this,{parent:this,id:D,x:W.offsetX,y:W.offsetY});return J&&this.add(J),J}function U(){O(this,m,!0);for(const W of u(this,a).values())W.isEmpty()&&W.remove();O(this,m,!1)}C(q,"_initialized",!1)},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FreeTextEditor=void 0;var n=t(1),o=t(132),g=t(131);function A(H,U){y(H,U),U.add(H)}function R(H,U,W){return U in H?Object.defineProperty(H,U,{value:W,enumerable:!0,configurable:!0,writable:!0}):H[U]=W,H}function C(H,U,W){y(H,U),U.set(H,W)}function y(H,U){if(U.has(H))throw new TypeError("Cannot initialize the same private elements twice on an object")}function v(H,U){var W=O(H,U,"get");return I(H,W)}function I(H,U){return U.get?U.get.call(H):U.value}function u(H,U,W){if(!U.has(H))throw new TypeError("attempted to get private field on non-instance");return W}function E(H,U,W){var D=O(H,U,"set");return S(H,D,W),W}function O(H,U,W){if(!U.has(H))throw new TypeError("attempted to "+W+" private field on non-instance");return U.get(H)}function S(H,U,W){if(U.set)U.set.call(H,W);else{if(!U.writable)throw new TypeError("attempted to set read only private field");U.value=W}}var x=new WeakMap,L=new WeakMap,c=new WeakMap,h=new WeakMap,d=new WeakMap,a=new WeakMap,s=new WeakMap,m=new WeakSet,p=new WeakSet,T=new WeakSet,N=new WeakSet;class M extends g.AnnotationEditor{constructor(U){super({...U,name:"freeTextEditor"}),A(this,N),A(this,T),A(this,p),A(this,m),C(this,x,{writable:!0,value:this.editorDivBlur.bind(this)}),C(this,L,{writable:!0,value:this.editorDivFocus.bind(this)}),C(this,c,{writable:!0,value:this.editorDivKeydown.bind(this)}),C(this,h,{writable:!0,value:void 0}),C(this,d,{writable:!0,value:""}),C(this,a,{writable:!0,value:!1}),C(this,s,{writable:!0,value:void 0}),E(this,h,U.color||M._defaultColor||g.AnnotationEditor._defaultLineColor),E(this,s,U.fontSize||M._defaultFontSize)}static initialize(U){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(D=>[D,U.get(D)]));const W=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(W.getPropertyValue("--freetext-padding"))}static updateDefaultParams(U,W){switch(U){case n.AnnotationEditorParamsType.FREETEXT_SIZE:M._defaultFontSize=W;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:M._defaultColor=W;break}}updateParams(U,W){switch(U){case n.AnnotationEditorParamsType.FREETEXT_SIZE:u(this,m,Q).call(this,W);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:u(this,p,q).call(this,W);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,M._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,M._defaultColor||g.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,v(this,s)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,v(this,h)]]}getInitialTranslation(){return[-M._internalPadding*this.parent.scaleFactor,-(M._internalPadding+v(this,s))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",v(this,c)),this.editorDiv.addEventListener("focus",v(this,L)),this.editorDiv.addEventListener("blur",v(this,x)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",v(this,c)),this.editorDiv.removeEventListener("focus",v(this,L)),this.editorDiv.removeEventListener("blur",v(this,x)),this.div.focus(),this.isEditing=!1)}focusin(U){super.focusin(U),U.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),v(this,a)||(E(this,a,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),E(this,d,u(this,T,X).call(this).trimEnd()),u(this,N,K).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(U){this.enableEditMode(),this.editorDiv.focus()}keydown(U){U.target===this.div&&U.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(U){M._keyboardManager.exec(this,U)}editorDivFocus(U){this.isEditing=!0}editorDivBlur(U){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let U,W;this.width&&(U=this.x,W=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),M._l10nPromise.get("editor_free_text_aria_label").then(J=>{var le;return(le=this.editorDiv)===null||le===void 0?void 0:le.setAttribute("aria-label",J)}),M._l10nPromise.get("free_text_default_content").then(J=>{var le;return(le=this.editorDiv)===null||le===void 0?void 0:le.setAttribute("default-content",J)}),this.editorDiv.contentEditable=!0;const{style:D}=this.editorDiv;if(D.fontSize=`calc(${v(this,s)}px * var(--scale-factor))`,D.color=v(this,h),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,o.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[J,le]=this.parent.viewportBaseDimensions;this.setAt(U*J,W*le,this.width*J,this.height*le);for(const ve of v(this,d).split(`
`)){const Ce=document.createElement("div");Ce.append(ve?document.createTextNode(ve):document.createElement("br")),this.editorDiv.append(Ce)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(U,W){const D=super.deserialize(U,W);return E(D,s,U.fontSize),E(D,h,n.Util.makeHexColor(...U.color)),E(D,d,U.value),D}serialize(){if(this.isEmpty())return null;const U=M._internalPadding*this.parent.scaleFactor,W=this.getRect(U,U),D=g.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:n.AnnotationEditorType.FREETEXT,color:D,fontSize:v(this,s),value:v(this,d),pageIndex:this.parent.pageIndex,rect:W,rotation:this.rotation}}}i.FreeTextEditor=M;function Q(H){const U=D=>{this.editorDiv.style.fontSize=`calc(${D}px * var(--scale-factor))`,this.translate(0,-(D-v(this,s))*this.parent.scaleFactor),E(this,s,D),u(this,N,K).call(this)},W=v(this,s);this.parent.addCommands({cmd:()=>{U(H)},undo:()=>{U(W)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function q(H){const U=v(this,h);this.parent.addCommands({cmd:()=>{E(this,h,H),this.editorDiv.style.color=H},undo:()=>{E(this,h,U),this.editorDiv.style.color=U},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function X(){const H=this.editorDiv.getElementsByTagName("div");if(H.length===0)return this.editorDiv.innerText;const U=[];for(let W=0,D=H.length;W<D;W++){const le=H[W].firstChild;le?.nodeName==="#text"?U.push(le.data):U.push("")}return U.join(`
`)}function K(){const[H,U]=this.parent.viewportBaseDimensions,W=this.div.getBoundingClientRect();this.width=W.width/H,this.height=W.height/U}R(M,"_freeTextDefaultContent",""),R(M,"_l10nPromise",void 0),R(M,"_internalPadding",0),R(M,"_defaultColor",null),R(M,"_defaultFontSize",10),R(M,"_keyboardManager",new o.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],M.prototype.commitOrRemove]])),R(M,"_type","freetext")},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InkEditor=void 0,Object.defineProperty(i,"fitCurve",{enumerable:!0,get:function(){return g.fitCurve}});var n=t(1),o=t(131),g=t(150),A=t(132);function R(he,se){v(he,se),se.add(he)}function C(he,se,Se){return se in he?Object.defineProperty(he,se,{value:Se,enumerable:!0,configurable:!0,writable:!0}):he[se]=Se,he}function y(he,se,Se){v(he,se),se.set(he,Se)}function v(he,se){if(se.has(he))throw new TypeError("Cannot initialize the same private elements twice on an object")}function I(he,se,Se){return u(he,se),Se}function u(he,se){if(he!==se)throw new TypeError("Private static access of wrong provenance")}function E(he,se,Se){var ke=x(he,se,"set");return O(he,ke,Se),Se}function O(he,se,Se){if(se.set)se.set.call(he,Se);else{if(!se.writable)throw new TypeError("attempted to set read only private field");se.value=Se}}function S(he,se){var Se=x(he,se,"get");return L(he,Se)}function x(he,se,Se){if(!se.has(he))throw new TypeError("attempted to "+Se+" private field on non-instance");return se.get(he)}function L(he,se){return se.get?se.get.call(he):se.value}function c(he,se,Se){if(!se.has(he))throw new TypeError("attempted to get private field on non-instance");return Se}const h=16;var d=new WeakMap,a=new WeakMap,s=new WeakMap,m=new WeakMap,p=new WeakMap,T=new WeakMap,N=new WeakMap,M=new WeakMap,Q=new WeakMap,q=new WeakMap,X=new WeakMap,K=new WeakMap,H=new WeakMap,U=new WeakMap,W=new WeakSet,D=new WeakSet,J=new WeakSet,le=new WeakSet,ve=new WeakSet,Ce=new WeakSet,V=new WeakSet,_=new WeakSet,P=new WeakSet,G=new WeakSet,z=new WeakSet,l=new WeakSet,b=new WeakSet,w=new WeakSet,F=new WeakSet,B=new WeakSet,$=new WeakSet,Z=new WeakSet,re=new WeakSet,ie=new WeakSet,ce=new WeakSet,oe=new WeakSet;class ue extends o.AnnotationEditor{constructor(se){super({...se,name:"inkEditor"}),R(this,oe),R(this,ce),R(this,ie),R(this,re),R(this,Z),R(this,$),R(this,B),R(this,F),R(this,w),R(this,b),R(this,l),R(this,z),R(this,G),R(this,P),R(this,_),R(this,V),R(this,Ce),R(this,ve),R(this,le),R(this,J),R(this,D),R(this,W),y(this,d,{writable:!0,value:0}),y(this,a,{writable:!0,value:0}),y(this,s,{writable:!0,value:0}),y(this,m,{writable:!0,value:this.canvasPointermove.bind(this)}),y(this,p,{writable:!0,value:this.canvasPointerleave.bind(this)}),y(this,T,{writable:!0,value:this.canvasPointerup.bind(this)}),y(this,N,{writable:!0,value:this.canvasPointerdown.bind(this)}),y(this,M,{writable:!0,value:!1}),y(this,Q,{writable:!0,value:!1}),y(this,q,{writable:!0,value:null}),y(this,X,{writable:!0,value:null}),y(this,K,{writable:!0,value:0}),y(this,H,{writable:!0,value:0}),y(this,U,{writable:!0,value:null}),this.color=se.color||null,this.thickness=se.thickness||null,this.opacity=se.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(se){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(Se=>[Se,se.get(Se)]))}static updateDefaultParams(se,Se){switch(se){case n.AnnotationEditorParamsType.INK_THICKNESS:ue._defaultThickness=Se;break;case n.AnnotationEditorParamsType.INK_COLOR:ue._defaultColor=Se;break;case n.AnnotationEditorParamsType.INK_OPACITY:ue._defaultOpacity=Se/100;break}}updateParams(se,Se){switch(se){case n.AnnotationEditorParamsType.INK_THICKNESS:c(this,W,me).call(this,Se);break;case n.AnnotationEditorParamsType.INK_COLOR:c(this,D,ye).call(this,Se);break;case n.AnnotationEditorParamsType.INK_OPACITY:c(this,J,_e).call(this,Se);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,ue._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,ue._defaultColor||o.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(ue._defaultOpacity*100)]]}get propertiesToUpdate(){var se;return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ue._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||ue._defaultColor||o.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((se=this.opacity)!==null&&se!==void 0?se:ue._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(c(this,z,ae).call(this),c(this,l,be).call(this)),this.isAttachedToDOM||(this.parent.add(this),c(this,b,De).call(this)),c(this,ce,Oe).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,S(this,X).disconnect(),E(this,X,null),super.remove())}enableEditMode(){S(this,M)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",S(this,N)),this.canvas.addEventListener("pointerup",S(this,T)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",S(this,N)),this.canvas.removeEventListener("pointerup",S(this,T)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){S(this,M)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),E(this,M,!0),this.div.classList.add("disabled"),c(this,ce,Oe).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(se){super.focusin(se),this.enableEditMode()}canvasPointerdown(se){se.button!==0||!this.isInEditMode()||S(this,M)||(this.setInForeground(),se.type!=="mouse"&&this.div.focus(),se.stopPropagation(),this.canvas.addEventListener("pointerleave",S(this,p)),this.canvas.addEventListener("pointermove",S(this,m)),c(this,Ce,Ae).call(this,se.offsetX,se.offsetY))}canvasPointermove(se){se.stopPropagation(),c(this,V,Ve).call(this,se.offsetX,se.offsetY)}canvasPointerup(se){se.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(se.stopPropagation(),c(this,G,we).call(this,se),this.setInBackground())}canvasPointerleave(se){c(this,G,we).call(this,se),this.setInBackground()}render(){if(this.div)return this.div;let se,Se;this.width&&(se=this.x,Se=this.y),super.render(),ue._l10nPromise.get("editor_ink_aria_label").then(ze=>{var Ie;return(Ie=this.div)===null||Ie===void 0?void 0:Ie.setAttribute("aria-label",ze)});const[ke,Be,Ge,Ue]=c(this,le,Ee).call(this);if(this.setAt(ke,Be,0,0),this.setDims(Ge,Ue),c(this,z,ae).call(this),this.width){const[ze,Ie]=this.parent.viewportBaseDimensions;this.setAt(se*ze,Se*Ie,this.width*ze,this.height*Ie),E(this,Q,!0),c(this,b,De).call(this),this.setDims(this.width*ze,this.height*Ie),c(this,P,Fe).call(this),c(this,oe,Ne).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return c(this,l,be).call(this),this.div}setDimensions(se,Se){const ke=Math.round(se),Be=Math.round(Se);if(S(this,K)===ke&&S(this,H)===Be)return;E(this,K,ke),E(this,H,Be),this.canvas.style.visibility="hidden",S(this,d)&&Math.abs(S(this,d)-se/Se)>.01&&(Se=Math.ceil(se/S(this,d)),this.setDims(se,Se));const[Ge,Ue]=this.parent.viewportBaseDimensions;this.width=se/Ge,this.height=Se/Ue,S(this,M)&&c(this,w,Ye).call(this,se,Se),c(this,b,De).call(this),c(this,P,Fe).call(this),this.canvas.style.visibility="visible"}static deserialize(se,Se){const ke=super.deserialize(se,Se);ke.thickness=se.thickness,ke.color=n.Util.makeHexColor(...se.color),ke.opacity=se.opacity;const[Be,Ge]=Se.pageDimensions,Ue=ke.width*Be,ze=ke.height*Ge,Ie=Se.scaleFactor,qe=se.thickness/2;E(ke,d,Ue/ze),E(ke,M,!0),E(ke,K,Math.round(Ue)),E(ke,H,Math.round(ze));for(const{bezier:Xe}of se.paths){const Je=[];ke.paths.push(Je);let at=Ie*(Xe[0]-qe),Ze=Ie*(ze-Xe[1]-qe);for(let et=2,mt=Xe.length;et<mt;et+=6){const Tt=Ie*(Xe[et]-qe),ct=Ie*(ze-Xe[et+1]-qe),Mt=Ie*(Xe[et+2]-qe),Gt=Ie*(ze-Xe[et+3]-qe),It=Ie*(Xe[et+4]-qe),ut=Ie*(ze-Xe[et+5]-qe);Je.push([[at,Ze],[Tt,ct],[Mt,Gt],[It,ut]]),at=It,Ze=ut}const st=I(this,ue,Re).call(this,Je);ke.bezierPath2D.push(st)}const nt=c(ke,re,ne).call(ke);return E(ke,s,Math.max(h,nt[2]-nt[0])),E(ke,a,Math.max(h,nt[3]-nt[1])),c(ke,w,Ye).call(ke,Ue,ze),ke}serialize(){if(this.isEmpty())return null;const se=this.getRect(0,0),Se=this.rotation%180===0?se[3]-se[1]:se[2]-se[0],ke=o.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:ke,thickness:this.thickness,opacity:this.opacity,paths:c(this,B,Le).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,Se),pageIndex:this.parent.pageIndex,rect:se,rotation:this.rotation}}}i.InkEditor=ue;function me(he){const se=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=he,c(this,ce,Oe).call(this)},undo:()=>{this.thickness=se,c(this,ce,Oe).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}function ye(he){const se=this.color;this.parent.addCommands({cmd:()=>{this.color=he,c(this,P,Fe).call(this)},undo:()=>{this.color=se,c(this,P,Fe).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function _e(he){he/=100;const se=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=he,c(this,P,Fe).call(this)},undo:()=>{this.opacity=se,c(this,P,Fe).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}function Ee(){const{width:he,height:se,rotation:Se}=this.parent.viewport;switch(Se){case 90:return[0,he,he,se];case 180:return[he,se,he,se];case 270:return[se,0,he,se];default:return[0,0,he,se]}}function Me(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,A.opacityToHex)(this.opacity)}`}function Ae(he,se){if(this.isEditing=!0,!S(this,Q)){var Se;E(this,Q,!0),c(this,b,De).call(this),this.thickness||(this.thickness=ue._defaultThickness),this.color||(this.color=ue._defaultColor||o.AnnotationEditor._defaultLineColor),(Se=this.opacity)!==null&&Se!==void 0||(this.opacity=ue._defaultOpacity)}this.currentPath.push([he,se]),E(this,q,null),c(this,ve,Me).call(this),this.ctx.beginPath(),this.ctx.moveTo(he,se),E(this,U,()=>{S(this,U)&&(S(this,q)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):c(this,P,Fe).call(this),this.ctx.lineTo(...S(this,q)),E(this,q,null),this.ctx.stroke()),window.requestAnimationFrame(S(this,U)))}),window.requestAnimationFrame(S(this,U))}function Ve(he,se){const[Se,ke]=this.currentPath.at(-1);he===Se&&se===ke||(this.currentPath.push([he,se]),E(this,q,[he,se]))}function Ke(he,se){this.ctx.closePath(),E(this,U,null),he=Math.min(Math.max(he,0),this.canvas.width),se=Math.min(Math.max(se,0),this.canvas.height);const[Se,ke]=this.currentPath.at(-1);(he!==Se||se!==ke)&&this.currentPath.push([he,se]);let Be;if(this.currentPath.length!==1)Be=(0,g.fitCurve)(this.currentPath,30,null);else{const Ie=[he,se];Be=[[Ie,Ie.slice(),Ie.slice(),Ie]]}const Ge=I(ue,ue,Re).call(ue,Be);this.currentPath.length=0;const Ue=()=>{this.paths.push(Be),this.bezierPath2D.push(Ge),this.rebuild()},ze=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(c(this,z,ae).call(this),c(this,l,be).call(this)),c(this,ce,Oe).call(this))};this.parent.addCommands({cmd:Ue,undo:ze,mustExec:!0})}function Fe(){if(this.isEmpty()){c(this,F,ge).call(this);return}c(this,ve,Me).call(this);const{canvas:he,ctx:se}=this;se.setTransform(1,0,0,1,0,0),se.clearRect(0,0,he.width,he.height),c(this,F,ge).call(this);for(const Se of this.bezierPath2D)se.stroke(Se)}function we(he){c(this,_,Ke).call(this,he.offsetX,he.offsetY),this.canvas.removeEventListener("pointerleave",S(this,p)),this.canvas.removeEventListener("pointermove",S(this,m)),this.parent.addToAnnotationStorage(this)}function ae(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",ue._l10nPromise.get("editor_ink_canvas_aria_label").then(he=>{var se;return(se=this.canvas)===null||se===void 0?void 0:se.setAttribute("aria-label",he)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}function be(){E(this,X,new ResizeObserver(he=>{const se=he[0].contentRect;se.width&&se.height&&this.setDimensions(se.width,se.height)})),S(this,X).observe(this.div)}function De(){if(!S(this,Q))return;const[he,se]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*he),this.canvas.height=Math.ceil(this.height*se),c(this,F,ge).call(this)}function Ye(he,se){const Se=c(this,ie,pe).call(this),ke=(he-Se)/S(this,s),Be=(se-Se)/S(this,a);this.scaleFactor=Math.min(ke,Be)}function ge(){const he=c(this,ie,pe).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+he,this.translationY*this.scaleFactor+he)}function Re(he){const se=new Path2D;for(let Se=0,ke=he.length;Se<ke;Se++){const[Be,Ge,Ue,ze]=he[Se];Se===0&&se.moveTo(...Be),se.bezierCurveTo(Ge[0],Ge[1],Ue[0],Ue[1],ze[0],ze[1])}return se}function Le(he,se,Se,ke){const Ge=[],Ue=this.thickness/2;let ze,Ie;for(const qe of this.paths){ze=[],Ie=[];for(let nt=0,Xe=qe.length;nt<Xe;nt++){const[Je,at,Ze,st]=qe[nt],et=he*(Je[0]+se)+Ue,mt=ke-he*(Je[1]+Se)-Ue,Tt=he*(at[0]+se)+Ue,ct=ke-he*(at[1]+Se)-Ue,Mt=he*(Ze[0]+se)+Ue,Gt=ke-he*(Ze[1]+Se)-Ue,It=he*(st[0]+se)+Ue,ut=ke-he*(st[1]+Se)-Ue;nt===0&&(ze.push(et,mt),Ie.push(et,mt)),ze.push(Tt,ct,Mt,Gt,It,ut),c(this,$,de).call(this,et,mt,Tt,ct,Mt,Gt,It,ut,4,Ie)}Ge.push({bezier:ze,points:Ie})}return Ge}function de(he,se,Se,ke,Be,Ge,Ue,ze,Ie,qe){if(c(this,Z,ee).call(this,he,se,Se,ke,Be,Ge,Ue,ze)){qe.push(Ue,ze);return}for(let nt=1;nt<Ie-1;nt++){const Xe=nt/Ie,Je=1-Xe;let at=Xe*he+Je*Se,Ze=Xe*se+Je*ke,st=Xe*Se+Je*Be,et=Xe*ke+Je*Ge;const mt=Xe*Be+Je*Ue,Tt=Xe*Ge+Je*ze;at=Xe*at+Je*st,Ze=Xe*Ze+Je*et,st=Xe*st+Je*mt,et=Xe*et+Je*Tt,at=Xe*at+Je*st,Ze=Xe*Ze+Je*et,qe.push(at,Ze)}qe.push(Ue,ze)}function ee(he,se,Se,ke,Be,Ge,Ue,ze){const qe=(3*Se-2*he-Ue)**2,nt=(3*ke-2*se-ze)**2,Xe=(3*Be-he-2*Ue)**2,Je=(3*Ge-se-2*ze)**2;return Math.max(qe,Xe)+Math.max(nt,Je)<=10}function ne(){let he=1/0,se=-1/0,Se=1/0,ke=-1/0;for(const Be of this.paths)for(const[Ge,Ue,ze,Ie]of Be){const qe=n.Util.bezierBoundingBox(...Ge,...Ue,...ze,...Ie);he=Math.min(he,qe[0]),Se=Math.min(Se,qe[1]),se=Math.max(se,qe[2]),ke=Math.max(ke,qe[3])}return[he,Se,se,ke]}function pe(){return S(this,M)?Math.ceil(this.thickness*this.parent.scaleFactor):0}function Oe(){let he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(this.isEmpty())return;if(!S(this,M)){c(this,P,Fe).call(this);return}const se=c(this,re,ne).call(this),Se=c(this,ie,pe).call(this);E(this,s,Math.max(h,se[2]-se[0])),E(this,a,Math.max(h,se[3]-se[1]));const ke=Math.ceil(Se+S(this,s)*this.scaleFactor),Be=Math.ceil(Se+S(this,a)*this.scaleFactor),[Ge,Ue]=this.parent.viewportBaseDimensions;this.width=ke/Ge,this.height=Be/Ue,E(this,d,ke/Be),c(this,oe,Ne).call(this);const ze=this.translationX,Ie=this.translationY;this.translationX=-se[0],this.translationY=-se[1],c(this,b,De).call(this),c(this,P,Fe).call(this),E(this,K,ke),E(this,H,Be),this.setDims(ke,Be);const qe=he?Se/this.scaleFactor/2:0;this.translate(ze-this.translationX-qe,Ie-this.translationY-qe)}function Ne(){const{style:he}=this.div;S(this,d)>=1?(he.minHeight=`${h}px`,he.minWidth=`${Math.round(S(this,d)*h)}px`):(he.minWidth=`${h}px`,he.minHeight=`${Math.round(h/S(this,d))}px`)}C(ue,"_defaultColor",null),C(ue,"_defaultOpacity",1),C(ue,"_defaultThickness",1),C(ue,"_l10nPromise",void 0),C(ue,"_type","ink")},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.fitCurve=void 0;const n=t(151);i.fitCurve=n},k=>{function i(O,S,x){if(!Array.isArray(O))throw new TypeError("First argument should be an array");if(O.forEach(d=>{if(!Array.isArray(d)||d.some(a=>typeof a!="number")||d.length!==O[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),O=O.filter((d,a)=>a===0||!d.every((s,m)=>s===O[a-1][m])),O.length<2)return[];const L=O.length,c=I(O[1],O[0]),h=I(O[L-2],O[L-1]);return t(O,c,h,S,x)}function t(O,S,x,L,c){var d,a,s,m,p,T,N,M,Q,q,X,K,H;if(O.length===2)return K=u.vectorLen(u.subtract(O[0],O[1]))/3,d=[O[0],u.addArrays(O[0],u.mulItems(S,K)),u.addArrays(O[1],u.mulItems(x,K)),O[1]],[d];if(a=R(O),[d,m,T]=n(O,a,a,S,x,c),m===0||m<L)return[d];if(m<L*L)for(s=a,p=m,N=T,H=0;H<20;H++){if(s=g(d,O,s),[d,m,T]=n(O,a,s,S,x,c),m<L)return[d];if(T===N){let U=m/p;if(U>.9999&&U<1.0001)break}p=m,N=T}return X=[],M=u.subtract(O[T-1],O[T+1]),M.every(U=>U===0)&&(M=u.subtract(O[T-1],O[T]),[M[0],M[1]]=[-M[1],M[0]]),Q=u.normalize(M),q=u.mulItems(Q,-1),X=X.concat(t(O.slice(0,T+1),S,Q,L,c)),X=X.concat(t(O.slice(T),q,x,L,c)),X}function n(O,S,x,L,c,h){var d,a,s;return d=o(O,x,L,c),[a,s]=C(O,d,S),h&&h({bez:d,points:O,params:S,maxErr:a,maxPoint:s}),[d,a,s]}function o(O,S,x,L){var c,h,d,a,s,m,p,T,N,M,Q,q,X,K,H,U,W,D=O[0],J=O[O.length-1];for(c=[D,null,null,J],h=u.zeros_Xx2x2(S.length),X=0,K=S.length;X<K;X++)U=S[X],W=1-U,d=h[X],d[0]=u.mulItems(x,3*U*(W*W)),d[1]=u.mulItems(L,3*W*(U*U));for(a=[[0,0],[0,0]],s=[0,0],X=0,K=O.length;X<K;X++)U=S[X],d=h[X],a[0][0]+=u.dot(d[0],d[0]),a[0][1]+=u.dot(d[0],d[1]),a[1][0]+=u.dot(d[0],d[1]),a[1][1]+=u.dot(d[1],d[1]),H=u.subtract(O[X],E.q([D,D,J,J],U)),s[0]+=u.dot(d[0],H),s[1]+=u.dot(d[1],H);return m=a[0][0]*a[1][1]-a[1][0]*a[0][1],p=a[0][0]*s[1]-a[1][0]*s[0],T=s[0]*a[1][1]-s[1]*a[0][1],N=m===0?0:T/m,M=m===0?0:p/m,q=u.vectorLen(u.subtract(D,J)),Q=1e-6*q,N<Q||M<Q?(c[1]=u.addArrays(D,u.mulItems(x,q/3)),c[2]=u.addArrays(J,u.mulItems(L,q/3))):(c[1]=u.addArrays(D,u.mulItems(x,N)),c[2]=u.addArrays(J,u.mulItems(L,M))),c}function g(O,S,x){return x.map((L,c)=>A(O,S[c],L))}function A(O,S,x){var L=u.subtract(E.q(O,x),S),c=E.qprime(O,x),h=u.mulMatrix(L,c),d=u.sum(u.squareItems(c))+2*u.mulMatrix(L,E.qprimeprime(O,x));return d===0?x:x-h/d}function R(O){var S=[],x,L,c;return O.forEach((h,d)=>{x=d?L+u.vectorLen(u.subtract(h,c)):0,S.push(x),L=x,c=h}),S=S.map(h=>h/L),S}function C(O,S,x){var L,c,h,d,a,s,m,p;c=0,h=Math.floor(O.length/2);const T=y(S,10);for(a=0,s=O.length;a<s;a++)m=O[a],p=v(S,x[a],T,10),d=u.subtract(E.q(S,p),m),L=d[0]*d[0]+d[1]*d[1],L>c&&(c=L,h=a);return[c,h]}var y=function(O,S){for(var x,L=[0],c=O[0],h=0,d=1;d<=S;d++)x=E.q(O,d/S),h+=u.vectorLen(u.subtract(x,c)),L.push(h),c=x;return L=L.map(a=>a/h),L};function v(O,S,x,L){if(S<0)return 0;if(S>1)return 1;for(var c,h,d,a,s,m=1;m<=L;m++)if(S<=x[m]){a=(m-1)/L,d=m/L,h=x[m-1],c=x[m],s=(S-h)/(c-h)*(d-a)+a;break}return s}function I(O,S){return u.normalize(u.subtract(O,S))}class u{static zeros_Xx2x2(S){for(var x=[];S--;)x.push([0,0]);return x}static mulItems(S,x){return S.map(L=>L*x)}static mulMatrix(S,x){return S.reduce((L,c,h)=>L+c*x[h],0)}static subtract(S,x){return S.map((L,c)=>L-x[c])}static addArrays(S,x){return S.map((L,c)=>L+x[c])}static addItems(S,x){return S.map(L=>L+x)}static sum(S){return S.reduce((x,L)=>x+L)}static dot(S,x){return u.mulMatrix(S,x)}static vectorLen(S){return Math.hypot(...S)}static divItems(S,x){return S.map(L=>L/x)}static squareItems(S){return S.map(x=>x*x)}static normalize(S){return this.divItems(S,this.vectorLen(S))}}class E{static q(S,x){var L=1-x,c=u.mulItems(S[0],L*L*L),h=u.mulItems(S[1],3*L*L*x),d=u.mulItems(S[2],3*L*x*x),a=u.mulItems(S[3],x*x*x);return u.addArrays(u.addArrays(c,h),u.addArrays(d,a))}static qprime(S,x){var L=1-x,c=u.mulItems(u.subtract(S[1],S[0]),3*L*L),h=u.mulItems(u.subtract(S[2],S[1]),6*L*x),d=u.mulItems(u.subtract(S[3],S[2]),3*x*x);return u.addArrays(u.addArrays(c,h),d)}static qprimeprime(S,x){return u.addArrays(u.mulItems(u.addArrays(u.subtract(S[2],u.mulItems(S[1],2)),S[0]),6*(1-x)),u.mulItems(u.addArrays(u.subtract(S[3],u.mulItems(S[2],2)),S[1]),6*x))}}k.exports=i,k.exports.fitCubic=t,k.exports.createTangent=I},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationLayer=void 0;var n=t(1),o=t(133),g=t(130),A=t(153),R=t(154);function C(z,l,b){return y(z,l),b}function y(z,l){if(z!==l)throw new TypeError("Private static access of wrong provenance")}const v=1e3,I=9,u=new WeakSet;function E(z){return{width:z[2]-z[0],height:z[3]-z[1]}}class O{static create(l){switch(l.data.annotationType){case n.AnnotationType.LINK:return new x(l);case n.AnnotationType.TEXT:return new L(l);case n.AnnotationType.WIDGET:switch(l.data.fieldType){case"Tx":return new h(l);case"Btn":return l.data.radioButton?new a(l):l.data.checkBox?new d(l):new s(l);case"Ch":return new m(l)}return new c(l);case n.AnnotationType.POPUP:return new p(l);case n.AnnotationType.FREETEXT:return new N(l);case n.AnnotationType.LINE:return new M(l);case n.AnnotationType.SQUARE:return new Q(l);case n.AnnotationType.CIRCLE:return new q(l);case n.AnnotationType.POLYLINE:return new X(l);case n.AnnotationType.CARET:return new H(l);case n.AnnotationType.INK:return new U(l);case n.AnnotationType.POLYGON:return new K(l);case n.AnnotationType.HIGHLIGHT:return new W(l);case n.AnnotationType.UNDERLINE:return new D(l);case n.AnnotationType.SQUIGGLY:return new J(l);case n.AnnotationType.STRIKEOUT:return new le(l);case n.AnnotationType.STAMP:return new ve(l);case n.AnnotationType.FILEATTACHMENT:return new Ce(l);default:return new S(l)}}}class S{constructor(l){let{isRenderable:b=!1,ignoreBorder:w=!1,createQuadrilaterals:F=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.isRenderable=b,this.data=l.data,this.layer=l.layer,this.page=l.page,this.viewport=l.viewport,this.linkService=l.linkService,this.downloadManager=l.downloadManager,this.imageResourcesPath=l.imageResourcesPath,this.renderForms=l.renderForms,this.svgFactory=l.svgFactory,this.annotationStorage=l.annotationStorage,this.enableScripting=l.enableScripting,this.hasJSActions=l.hasJSActions,this._fieldObjects=l.fieldObjects,this._mouseState=l.mouseState,b&&(this.container=this._createContainer(w)),F&&(this.quadrilaterals=this._createQuadrilaterals(w))}_createContainer(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const b=this.data,w=this.page,F=this.viewport,B=document.createElement("section"),{width:$,height:Z}=E(b.rect),[re,ie,ce,oe]=F.viewBox,ue=ce-re,me=oe-ie;B.setAttribute("data-annotation-id",b.id);const ye=n.Util.normalizeRect([b.rect[0],w.view[3]-b.rect[1]+w.view[1],b.rect[2],w.view[3]-b.rect[3]+w.view[1]]);if(!l&&b.borderStyle.width>0){B.style.borderWidth=`${b.borderStyle.width}px`;const Ee=b.borderStyle.horizontalCornerRadius,Me=b.borderStyle.verticalCornerRadius;if(Ee>0||Me>0){const Ve=`calc(${Ee}px * var(--scale-factor)) / calc(${Me}px * var(--scale-factor))`;B.style.borderRadius=Ve}else if(this instanceof a){const Ve=`calc(${$}px * var(--scale-factor)) / calc(${Z}px * var(--scale-factor))`;B.style.borderRadius=Ve}switch(b.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:B.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:B.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:B.style.borderBottomStyle="solid";break}const Ae=b.borderColor||null;Ae?B.style.borderColor=n.Util.makeHexColor(Ae[0]|0,Ae[1]|0,Ae[2]|0):B.style.borderWidth=0}B.style.left=`${100*(ye[0]-re)/ue}%`,B.style.top=`${100*(ye[1]-ie)/me}%`;const{rotation:_e}=b;return b.hasOwnCanvas||_e===0?(B.style.width=`${100*$/ue}%`,B.style.height=`${100*Z/me}%`):this.setRotation(_e,B),B}setRotation(l){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.container;const[w,F,B,$]=this.viewport.viewBox,Z=B-w,re=$-F,{width:ie,height:ce}=E(this.data.rect);let oe,ue;l%180===0?(oe=100*ie/Z,ue=100*ce/re):(oe=100*ce/Z,ue=100*ie/re),b.style.width=`${oe}%`,b.style.height=`${ue}%`,b.setAttribute("data-main-rotation",(360-l)%360)}get _commonActions(){const l=(b,w,F)=>{const B=F.detail[b];F.target.style[w]=A.ColorConverters[`${B[0]}_HTML`](B.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:b=>{const w=b.detail.display%2===1;this.container.style.visibility=w?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:w,print:b.detail.display===0||b.detail.display===3})},print:b=>{this.annotationStorage.setValue(this.data.id,{print:b.detail.print})},hidden:b=>{this.container.style.visibility=b.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:b.detail.hidden})},focus:b=>{setTimeout(()=>b.target.focus({preventScroll:!1}),0)},userName:b=>{b.target.title=b.detail.userName},readonly:b=>{b.detail.readonly?b.target.setAttribute("readonly",""):b.target.removeAttribute("readonly")},required:b=>{this._setRequired(b.target,b.detail.required)},bgColor:b=>{l("bgColor","backgroundColor",b)},fillColor:b=>{l("fillColor","backgroundColor",b)},fgColor:b=>{l("fgColor","color",b)},textColor:b=>{l("textColor","color",b)},borderColor:b=>{l("borderColor","borderColor",b)},strokeColor:b=>{l("strokeColor","borderColor",b)},rotation:b=>{const w=b.detail.rotation;this.setRotation(w),this.annotationStorage.setValue(this.data.id,{rotation:w})}})}_dispatchEventFromSandbox(l,b){const w=this._commonActions;for(const F of Object.keys(b.detail)){const B=l[F]||w[F];B&&B(b)}}_setDefaultPropertiesFromJS(l){if(!this.enableScripting)return;const b=this.annotationStorage.getRawValue(this.data.id);if(!b)return;const w=this._commonActions;for(const[F,B]of Object.entries(b)){const $=w[F];if($){const Z={detail:{[F]:B},target:l};$(Z),delete b[F]}}}_createQuadrilaterals(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.data.quadPoints)return null;const b=[],w=this.data.rect;for(const F of this.data.quadPoints)this.data.rect=[F[2].x,F[2].y,F[1].x,F[1].y],b.push(this._createContainer(l));return this.data.rect=w,b}_createPopup(l,b){let w=this.container;this.quadrilaterals&&(l=l||this.quadrilaterals,w=this.quadrilaterals[0]),l||(l=document.createElement("div"),l.className="popupTriggerArea",w.append(l));const B=new T({container:w,trigger:l,color:b.color,titleObj:b.titleObj,modificationDate:b.modificationDate,contentsObj:b.contentsObj,richText:b.richText,hideWrapper:!0}).render();B.style.left="100%",w.append(B)}_renderQuadrilaterals(l){for(const b of this.quadrilaterals)b.className=l;return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(l){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;const w=[];if(this._fieldObjects){const F=this._fieldObjects[l];if(F)for(const{page:B,id:$,exportValues:Z}of F){if(B===-1||$===b)continue;const re=typeof Z=="string"?Z:null,ie=document.querySelector(`[data-element-id="${$}"]`);if(ie&&!u.has(ie)){(0,n.warn)(`_getElementsByName - element not allowed: ${$}`);continue}w.push({id:$,exportValue:re,domElement:ie})}return w}for(const F of document.getElementsByName(l)){const{id:B,exportValue:$}=F;B!==b&&u.has(F)&&w.push({id:B,exportValue:$,domElement:F})}return w}static get platform(){const l=typeof navigator<"u"?navigator.platform:"";return(0,n.shadow)(this,"platform",{isWin:l.includes("Win"),isMac:l.includes("Mac")})}}class x extends S{constructor(l){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;super(l,{isRenderable:!0,ignoreBorder:!!(b!=null&&b.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=l.data.isTooltipOnly}render(){const{data:l,linkService:b}=this,w=document.createElement("a");w.setAttribute("data-element-id",l.id);let F=!1;return l.url?(b.addLinkAttributes(w,l.url,l.newWindow),F=!0):l.action?(this._bindNamedAction(w,l.action),F=!0):l.dest?(this._bindLink(w,l.dest),F=!0):(l.actions&&(l.actions.Action||l.actions["Mouse Up"]||l.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(w,l),F=!0),l.resetForm?(this._bindResetFormAction(w,l.resetForm),F=!0):this.isTooltipOnly&&!F&&(this._bindLink(w,""),F=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((B,$)=>{const Z=$===0?w:w.cloneNode();return B.append(Z),B}):(this.container.className="linkAnnotation",F&&this.container.append(w),this.container)}_bindLink(l,b){l.href=this.linkService.getDestinationHash(b),l.onclick=()=>(b&&this.linkService.goToDestination(b),!1),(b||b==="")&&(l.className="internalLink")}_bindNamedAction(l,b){l.href=this.linkService.getAnchorUrl(""),l.onclick=()=>(this.linkService.executeNamedAction(b),!1),l.className="internalLink"}_bindJSAction(l,b){l.href=this.linkService.getAnchorUrl("");const w=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const F of Object.keys(b.actions)){const B=w.get(F);B&&(l[B]=()=>{var $;return($=this.linkService.eventBus)===null||$===void 0||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b.id,name:F}}),!1})}l.onclick||(l.onclick=()=>!1),l.className="internalLink"}_bindResetFormAction(l,b){const w=l.onclick;if(w||(l.href=this.linkService.getAnchorUrl("")),l.className="internalLink",!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),w||(l.onclick=()=>!1);return}l.onclick=()=>{w&&w();const{fields:F,refs:B,include:$}=b,Z=[];if(F.length!==0||B.length!==0){const oe=new Set(B);for(const ue of F){const me=this._fieldObjects[ue]||[];for(const{id:ye}of me)oe.add(ye)}for(const ue of Object.values(this._fieldObjects))for(const me of ue)oe.has(me.id)===$&&Z.push(me)}else for(const oe of Object.values(this._fieldObjects))Z.push(...oe);const re=this.annotationStorage,ie=[];for(const oe of Z){const{id:ue}=oe;switch(ie.push(ue),oe.type){case"text":{const ye=oe.defaultValue||"";re.setValue(ue,{value:ye});break}case"checkbox":case"radiobutton":{const ye=oe.defaultValue===oe.exportValues;re.setValue(ue,{value:ye});break}case"combobox":case"listbox":{const ye=oe.defaultValue||"";re.setValue(ue,{value:ye});break}default:continue}const me=document.querySelector(`[data-element-id="${ue}"]`);if(me){if(!u.has(me)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${ue}`);continue}}else continue;me.dispatchEvent(new Event("resetform"))}if(this.enableScripting){var ce;(ce=this.linkService.eventBus)===null||ce===void 0||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ie,name:"ResetForm"}})}return!1}}}class L extends S{constructor(l){var b,w,F;const B=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(F=l.data.richText)!==null&&F!==void 0&&F.str);super(l,{isRenderable:B})}render(){this.container.className="textAnnotation";const l=document.createElement("img");return l.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",l.alt="[{{type}} Annotation]",l.dataset.l10nId="text_annotation_type",l.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(l,this.data),this.container.append(l),this.container}}class c extends S{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(l){const{isWin:b,isMac:w}=S.platform;return b&&l.ctrlKey||w&&l.metaKey}_setEventListener(l,b,w,F){b.includes("mouse")?l.addEventListener(b,B=>{var $;($=this.linkService.eventBus)===null||$===void 0||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:w,value:F(B),shift:B.shiftKey,modifier:this._getKeyModifier(B)}})}):l.addEventListener(b,B=>{var $;($=this.linkService.eventBus)===null||$===void 0||$.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:w,value:F(B)}})})}_setEventListeners(l,b,w){for(const[B,$]of b){var F;($==="Action"||(F=this.data.actions)!==null&&F!==void 0&&F[$])&&this._setEventListener(l,B,$,w)}}_setBackgroundColor(l){const b=this.data.backgroundColor||null;l.style.backgroundColor=b===null?"transparent":n.Util.makeHexColor(b[0],b[1],b[2])}_setTextStyle(l){const b=["left","center","right"],{fontColor:w}=this.data.defaultAppearanceData,F=this.data.defaultAppearanceData.fontSize||I,B=l.style;let $;if(this.data.multiLine){const Z=Math.abs(this.data.rect[3]-this.data.rect[1]),re=Math.round(Z/(n.LINE_FACTOR*F))||1,ie=Z/re;$=Math.min(F,Math.round(ie/n.LINE_FACTOR))}else{const Z=Math.abs(this.data.rect[3]-this.data.rect[1]);$=Math.min(F,Math.round(Z/n.LINE_FACTOR))}B.fontSize=`calc(${$}px * var(--scale-factor))`,B.color=n.Util.makeHexColor(w[0],w[1],w[2]),this.data.textAlignment!==null&&(B.textAlign=b[this.data.textAlignment])}_setRequired(l,b){b?l.setAttribute("required",!0):l.removeAttribute("required"),l.setAttribute("aria-required",b)}}class h extends c{constructor(l){const b=l.renderForms||!l.data.hasAppearance&&!!l.data.fieldValue;super(l,{isRenderable:b})}setPropertyOnSiblings(l,b,w,F){const B=this.annotationStorage;for(const $ of this._getElementsByName(l.name,l.id))$.domElement&&($.domElement[b]=w),B.setValue($.id,{[F]:w})}render(){const l=this.annotationStorage,b=this.data.id;this.container.className="textWidgetAnnotation";let w=null;if(this.renderForms){const B=l.getValue(b,{value:this.data.fieldValue});let $=B.formattedValue||B.value||"";const Z=l.getValue(b,{charLimit:this.data.maxLen}).charLimit;Z&&$.length>Z&&($=$.slice(0,Z));const re={userValue:$,formattedValue:null,valueOnFocus:""};this.data.multiLine?(w=document.createElement("textarea"),w.textContent=$,this.data.doNotScroll&&(w.style.overflowY="hidden")):(w=document.createElement("input"),w.type="text",w.setAttribute("value",$),this.data.doNotScroll&&(w.style.overflowX="hidden")),u.add(w),w.setAttribute("data-element-id",b),w.disabled=this.data.readOnly,w.name=this.data.fieldName,w.tabIndex=v,this._setRequired(w,this.data.required),Z&&(w.maxLength=Z),w.addEventListener("input",ce=>{l.setValue(b,{value:ce.target.value}),this.setPropertyOnSiblings(w,"value",ce.target.value,"value")}),w.addEventListener("resetform",ce=>{var oe;const ue=(oe=this.data.defaultFieldValue)!==null&&oe!==void 0?oe:"";w.value=re.userValue=ue,re.formattedValue=null});let ie=ce=>{const{formattedValue:oe}=re;oe!=null&&(ce.target.value=oe),ce.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var F;w.addEventListener("focus",oe=>{re.userValue&&(oe.target.value=re.userValue),re.valueOnFocus=oe.target.value}),w.addEventListener("updatefromsandbox",oe=>{const ue={value(me){var ye;re.userValue=(ye=me.detail.value)!==null&&ye!==void 0?ye:"",l.setValue(b,{value:re.userValue.toString()}),me.target.value=re.userValue},formattedValue(me){const{formattedValue:ye}=me.detail;re.formattedValue=ye,ye!=null&&me.target!==document.activeElement&&(me.target.value=ye),l.setValue(b,{formattedValue:ye})},selRange(me){me.target.setSelectionRange(...me.detail.selRange)},charLimit:me=>{var ye;const{charLimit:_e}=me.detail,{target:Ee}=me;if(_e===0){Ee.removeAttribute("maxLength");return}Ee.setAttribute("maxLength",_e);let Me=re.userValue;!Me||Me.length<=_e||(Me=Me.slice(0,_e),Ee.value=re.userValue=Me,l.setValue(b,{value:Me}),(ye=this.linkService.eventBus)===null||ye===void 0||ye.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:Me,willCommit:!0,commitKey:1,selStart:Ee.selectionStart,selEnd:Ee.selectionEnd}}))}};this._dispatchEventFromSandbox(ue,oe)}),w.addEventListener("keydown",oe=>{var ue;let me=-1;if(oe.key==="Escape"?me=0:oe.key==="Enter"?me=2:oe.key==="Tab"&&(me=3),me===-1)return;const{value:ye}=oe.target;re.valueOnFocus!==ye&&(re.userValue=ye,(ue=this.linkService.eventBus)===null||ue===void 0||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:ye,willCommit:!0,commitKey:me,selStart:oe.target.selectionStart,selEnd:oe.target.selectionEnd}}))});const ce=ie;ie=null,w.addEventListener("blur",oe=>{const{value:ue}=oe.target;if(re.userValue=ue,this._mouseState.isDown&&re.valueOnFocus!==ue){var me;(me=this.linkService.eventBus)===null||me===void 0||me.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:ue,willCommit:!0,commitKey:1,selStart:oe.target.selectionStart,selEnd:oe.target.selectionEnd}})}ce(oe)}),(F=this.data.actions)!==null&&F!==void 0&&F.Keystroke&&w.addEventListener("beforeinput",oe=>{var ue;const{data:me,target:ye}=oe,{value:_e,selectionStart:Ee,selectionEnd:Me}=ye;let Ae=Ee,Ve=Me;switch(oe.inputType){case"deleteWordBackward":{const Ke=_e.substring(0,Ee).match(/\w*[^\w]*$/);Ke&&(Ae-=Ke[0].length);break}case"deleteWordForward":{const Ke=_e.substring(Ee).match(/^[^\w]*\w*/);Ke&&(Ve+=Ke[0].length);break}case"deleteContentBackward":Ee===Me&&(Ae-=1);break;case"deleteContentForward":Ee===Me&&(Ve+=1);break}oe.preventDefault(),(ue=this.linkService.eventBus)===null||ue===void 0||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:_e,change:me||"",willCommit:!1,selStart:Ae,selEnd:Ve}})}),this._setEventListeners(w,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],oe=>oe.target.value)}if(ie&&w.addEventListener("blur",ie),this.data.comb){const oe=(this.data.rect[2]-this.data.rect[0])/Z;w.classList.add("comb"),w.style.letterSpacing=`calc(${oe}px * var(--scale-factor) - 1ch)`}}else w=document.createElement("div"),w.textContent=this.data.fieldValue,w.style.verticalAlign="middle",w.style.display="table-cell";return this._setTextStyle(w),this._setBackgroundColor(w),this._setDefaultPropertiesFromJS(w),this.container.append(w),this.container}}class d extends c{constructor(l){super(l,{isRenderable:l.renderForms})}render(){const l=this.annotationStorage,b=this.data,w=b.id;let F=l.getValue(w,{value:b.exportValue===b.fieldValue}).value;typeof F=="string"&&(F=F!=="Off",l.setValue(w,{value:F})),this.container.className="buttonWidgetAnnotation checkBox";const B=document.createElement("input");return u.add(B),B.setAttribute("data-element-id",w),B.disabled=b.readOnly,this._setRequired(B,this.data.required),B.type="checkbox",B.name=b.fieldName,F&&B.setAttribute("checked",!0),B.setAttribute("exportValue",b.exportValue),B.tabIndex=v,B.addEventListener("change",$=>{const{name:Z,checked:re}=$.target;for(const ie of this._getElementsByName(Z,w)){const ce=re&&ie.exportValue===b.exportValue;ie.domElement&&(ie.domElement.checked=ce),l.setValue(ie.id,{value:ce})}l.setValue(w,{value:re})}),B.addEventListener("resetform",$=>{const Z=b.defaultFieldValue||"Off";$.target.checked=Z===b.exportValue}),this.enableScripting&&this.hasJSActions&&(B.addEventListener("updatefromsandbox",$=>{const Z={value(re){re.target.checked=re.detail.value!=="Off",l.setValue(w,{value:re.target.checked})}};this._dispatchEventFromSandbox(Z,$)}),this._setEventListeners(B,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$=>$.target.checked)),this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class a extends c{constructor(l){super(l,{isRenderable:l.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const l=this.annotationStorage,b=this.data,w=b.id;let F=l.getValue(w,{value:b.fieldValue===b.buttonValue}).value;typeof F=="string"&&(F=F!==b.buttonValue,l.setValue(w,{value:F}));const B=document.createElement("input");if(u.add(B),B.setAttribute("data-element-id",w),B.disabled=b.readOnly,this._setRequired(B,this.data.required),B.type="radio",B.name=b.fieldName,F&&B.setAttribute("checked",!0),B.tabIndex=v,B.addEventListener("change",$=>{const{name:Z,checked:re}=$.target;for(const ie of this._getElementsByName(Z,w))l.setValue(ie.id,{value:!1});l.setValue(w,{value:re})}),B.addEventListener("resetform",$=>{const Z=b.defaultFieldValue;$.target.checked=Z!=null&&Z===b.buttonValue}),this.enableScripting&&this.hasJSActions){const $=b.buttonValue;B.addEventListener("updatefromsandbox",Z=>{const re={value:ie=>{const ce=$===ie.detail.value;for(const oe of this._getElementsByName(ie.target.name)){const ue=ce&&oe.id===w;oe.domElement&&(oe.domElement.checked=ue),l.setValue(oe.id,{value:ue})}}};this._dispatchEventFromSandbox(re,Z)}),this._setEventListeners(B,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Z=>Z.target.checked)}return this._setBackgroundColor(B),this._setDefaultPropertiesFromJS(B),this.container.append(B),this.container}}class s extends x{constructor(l){super(l,{ignoreBorder:l.data.hasAppearance})}render(){const l=super.render();l.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(l.title=this.data.alternativeText);const b=l.lastChild;return this.enableScripting&&this.hasJSActions&&b&&(this._setDefaultPropertiesFromJS(b),b.addEventListener("updatefromsandbox",w=>{this._dispatchEventFromSandbox({},w)})),l}}class m extends c{constructor(l){super(l,{isRenderable:l.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const l=this.annotationStorage,b=this.data.id,w=l.getValue(b,{value:this.data.fieldValue}),F=document.createElement("select");u.add(F),F.setAttribute("data-element-id",b),F.disabled=this.data.readOnly,this._setRequired(F,this.data.required),F.name=this.data.fieldName,F.tabIndex=v;let B=this.data.combo&&this.data.options.length>0;this.data.combo||(F.size=this.data.options.length,this.data.multiSelect&&(F.multiple=!0)),F.addEventListener("resetform",ie=>{const ce=this.data.defaultFieldValue;for(const oe of F.options)oe.selected=oe.value===ce});for(const ie of this.data.options){const ce=document.createElement("option");ce.textContent=ie.displayValue,ce.value=ie.exportValue,w.value.includes(ie.exportValue)&&(ce.setAttribute("selected",!0),B=!1),F.append(ce)}let $=null;if(B){const ie=document.createElement("option");ie.value=" ",ie.setAttribute("hidden",!0),ie.setAttribute("selected",!0),F.prepend(ie),$=()=>{ie.remove(),F.removeEventListener("input",$),$=null},F.addEventListener("input",$)}const Z=(ie,ce)=>{const oe=ce?"value":"textContent",ue=ie.target.options;return ie.target.multiple?Array.prototype.filter.call(ue,me=>me.selected).map(me=>me[oe]):ue.selectedIndex===-1?null:ue[ue.selectedIndex][oe]},re=ie=>{const ce=ie.target.options;return Array.prototype.map.call(ce,oe=>({displayValue:oe.textContent,exportValue:oe.value}))};return this.enableScripting&&this.hasJSActions?(F.addEventListener("updatefromsandbox",ie=>{const ce={value(oe){var ue;(ue=$)===null||ue===void 0||ue();const me=oe.detail.value,ye=new Set(Array.isArray(me)?me:[me]);for(const _e of F.options)_e.selected=ye.has(_e.value);l.setValue(b,{value:Z(oe,!0)})},multipleSelection(oe){F.multiple=!0},remove(oe){const ue=F.options,me=oe.detail.remove;ue[me].selected=!1,F.remove(me),ue.length>0&&Array.prototype.findIndex.call(ue,_e=>_e.selected)===-1&&(ue[0].selected=!0),l.setValue(b,{value:Z(oe,!0),items:re(oe)})},clear(oe){for(;F.length!==0;)F.remove(0);l.setValue(b,{value:null,items:[]})},insert(oe){const{index:ue,displayValue:me,exportValue:ye}=oe.detail.insert,_e=F.children[ue],Ee=document.createElement("option");Ee.textContent=me,Ee.value=ye,_e?_e.before(Ee):F.append(Ee),l.setValue(b,{value:Z(oe,!0),items:re(oe)})},items(oe){const{items:ue}=oe.detail;for(;F.length!==0;)F.remove(0);for(const me of ue){const{displayValue:ye,exportValue:_e}=me,Ee=document.createElement("option");Ee.textContent=ye,Ee.value=_e,F.append(Ee)}F.options.length>0&&(F.options[0].selected=!0),l.setValue(b,{value:Z(oe,!0),items:re(oe)})},indices(oe){const ue=new Set(oe.detail.indices);for(const me of oe.target.options)me.selected=ue.has(me.index);l.setValue(b,{value:Z(oe,!0)})},editable(oe){oe.target.disabled=!oe.detail.editable}};this._dispatchEventFromSandbox(ce,ie)}),F.addEventListener("input",ie=>{var ce;const oe=Z(ie,!0),ue=Z(ie,!1);l.setValue(b,{value:oe}),(ce=this.linkService.eventBus)===null||ce===void 0||ce.dispatch("dispatcheventinsandbox",{source:this,detail:{id:b,name:"Keystroke",value:ue,changeEx:oe,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(F,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],ie=>ie.target.checked)):F.addEventListener("input",function(ie){l.setValue(b,{value:Z(ie,!0)})}),this.data.combo&&this._setTextStyle(F),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}class p extends S{constructor(l){var b,w,F;const B=!!((b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(F=l.data.richText)!==null&&F!==void 0&&F.str);super(l,{isRenderable:B})}render(){const l=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",l.includes(this.data.parentType))return this.container;const b=`[data-annotation-id="${this.data.parentId}"]`,w=this.layer.querySelectorAll(b);if(w.length===0)return this.container;const F=new T({container:this.container,trigger:Array.from(w),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),B=this.page,$=n.Util.normalizeRect([this.data.parentRect[0],B.view[3]-this.data.parentRect[1]+B.view[1],this.data.parentRect[2],B.view[3]-this.data.parentRect[3]+B.view[1]]),Z=$[0]+this.data.parentRect[2]-this.data.parentRect[0],re=$[1],[ie,ce,oe,ue]=this.viewport.viewBox,me=oe-ie,ye=ue-ce;return this.container.style.left=`${100*(Z-ie)/me}%`,this.container.style.top=`${100*(re-ce)/ye}%`,this.container.append(F.render()),this.container}}class T{constructor(l){this.container=l.container,this.trigger=l.trigger,this.color=l.color,this.titleObj=l.titleObj,this.modificationDate=l.modificationDate,this.contentsObj=l.contentsObj,this.richText=l.richText,this.hideWrapper=l.hideWrapper||!1,this.pinned=!1}render(){var l,b;const F=document.createElement("div");F.className="popupWrapper",this.hideElement=this.hideWrapper?F:this.container,this.hideElement.hidden=!0;const B=document.createElement("div");B.className="popup";const $=this.color;if($){const ie=.7*(255-$[0])+$[0],ce=.7*(255-$[1])+$[1],oe=.7*(255-$[2])+$[2];B.style.backgroundColor=n.Util.makeHexColor(ie|0,ce|0,oe|0)}const Z=document.createElement("h1");Z.dir=this.titleObj.dir,Z.textContent=this.titleObj.str,B.append(Z);const re=o.PDFDateString.toDateObject(this.modificationDate);if(re){const ie=document.createElement("span");ie.className="popupDate",ie.textContent="{{date}}, {{time}}",ie.dataset.l10nId="annotation_date_string",ie.dataset.l10nArgs=JSON.stringify({date:re.toLocaleDateString(),time:re.toLocaleTimeString()}),B.append(ie)}if((l=this.richText)!==null&&l!==void 0&&l.str&&(!((b=this.contentsObj)!==null&&b!==void 0&&b.str)||this.contentsObj.str===this.richText.str))R.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:B}),B.lastChild.className="richText popupContent";else{const ie=this._formatContents(this.contentsObj);B.append(ie)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const ie of this.trigger)ie.addEventListener("click",this._toggle.bind(this)),ie.addEventListener("mouseover",this._show.bind(this,!1)),ie.addEventListener("mouseout",this._hide.bind(this,!1));return B.addEventListener("click",this._hide.bind(this,!0)),F.append(B),F}_formatContents(l){let{str:b,dir:w}=l;const F=document.createElement("p");F.className="popupContent",F.dir=w;const B=b.split(/(?:\r\n?|\n)/);for(let $=0,Z=B.length;$<Z;++$){const re=B[$];F.append(document.createTextNode(re)),$<Z-1&&F.append(document.createElement("br"))}return F}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0)&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class N extends S{constructor(l){var b,w,F;const B=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(F=l.data.richText)!==null&&F!==void 0&&F.str);super(l,{isRenderable:B,ignoreBorder:!0}),this.textContent=l.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const l=document.createElement("div");l.className="annotationTextContent",l.setAttribute("role","comment");for(const b of this.textContent){const w=document.createElement("span");w.textContent=b,l.append(w)}this.container.append(l)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class M extends S{constructor(l){var b,w,F;const B=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(F=l.data.richText)!==null&&F!==void 0&&F.str);super(l,{isRenderable:B,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const l=this.data,{width:b,height:w}=E(l.rect),F=this.svgFactory.create(b,w,!0),B=this.svgFactory.createElement("svg:line");return B.setAttribute("x1",l.rect[2]-l.lineCoordinates[0]),B.setAttribute("y1",l.rect[3]-l.lineCoordinates[1]),B.setAttribute("x2",l.rect[2]-l.lineCoordinates[2]),B.setAttribute("y2",l.rect[3]-l.lineCoordinates[3]),B.setAttribute("stroke-width",l.borderStyle.width||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),F.append(B),this.container.append(F),this._createPopup(B,l),this.container}}class Q extends S{constructor(l){var b,w,F;const B=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(F=l.data.richText)!==null&&F!==void 0&&F.str);super(l,{isRenderable:B,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const l=this.data,{width:b,height:w}=E(l.rect),F=this.svgFactory.create(b,w,!0),B=l.borderStyle.width,$=this.svgFactory.createElement("svg:rect");return $.setAttribute("x",B/2),$.setAttribute("y",B/2),$.setAttribute("width",b-B),$.setAttribute("height",w-B),$.setAttribute("stroke-width",B||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),F.append($),this.container.append(F),this._createPopup($,l),this.container}}class q extends S{constructor(l){var b,w,F;const B=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(F=l.data.richText)!==null&&F!==void 0&&F.str);super(l,{isRenderable:B,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const l=this.data,{width:b,height:w}=E(l.rect),F=this.svgFactory.create(b,w,!0),B=l.borderStyle.width,$=this.svgFactory.createElement("svg:ellipse");return $.setAttribute("cx",b/2),$.setAttribute("cy",w/2),$.setAttribute("rx",b/2-B/2),$.setAttribute("ry",w/2-B/2),$.setAttribute("stroke-width",B||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),F.append($),this.container.append(F),this._createPopup($,l),this.container}}class X extends S{constructor(l){var b,w,F;const B=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(F=l.data.richText)!==null&&F!==void 0&&F.str);super(l,{isRenderable:B,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const l=this.data,{width:b,height:w}=E(l.rect),F=this.svgFactory.create(b,w,!0);let B=[];for(const Z of l.vertices){const re=Z.x-l.rect[0],ie=l.rect[3]-Z.y;B.push(re+","+ie)}B=B.join(" ");const $=this.svgFactory.createElement(this.svgElementName);return $.setAttribute("points",B),$.setAttribute("stroke-width",l.borderStyle.width||1),$.setAttribute("stroke","transparent"),$.setAttribute("fill","transparent"),F.append($),this.container.append(F),this._createPopup($,l),this.container}}class K extends X{constructor(l){super(l),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class H extends S{constructor(l){var b,w,F;const B=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(F=l.data.richText)!==null&&F!==void 0&&F.str);super(l,{isRenderable:B,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class U extends S{constructor(l){var b,w,F;const B=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(F=l.data.richText)!==null&&F!==void 0&&F.str);super(l,{isRenderable:B,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const l=this.data,{width:b,height:w}=E(l.rect),F=this.svgFactory.create(b,w,!0);for(const B of l.inkLists){let $=[];for(const re of B){const ie=re.x-l.rect[0],ce=l.rect[3]-re.y;$.push(`${ie},${ce}`)}$=$.join(" ");const Z=this.svgFactory.createElement(this.svgElementName);Z.setAttribute("points",$),Z.setAttribute("stroke-width",l.borderStyle.width||1),Z.setAttribute("stroke","transparent"),Z.setAttribute("fill","transparent"),this._createPopup(Z,l),F.append(Z)}return this.container.append(F),this.container}}class W extends S{constructor(l){var b,w,F;const B=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(F=l.data.richText)!==null&&F!==void 0&&F.str);super(l,{isRenderable:B,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class D extends S{constructor(l){var b,w,F;const B=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(F=l.data.richText)!==null&&F!==void 0&&F.str);super(l,{isRenderable:B,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class J extends S{constructor(l){var b,w,F;const B=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(F=l.data.richText)!==null&&F!==void 0&&F.str);super(l,{isRenderable:B,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class le extends S{constructor(l){var b,w,F;const B=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(F=l.data.richText)!==null&&F!==void 0&&F.str);super(l,{isRenderable:B,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class ve extends S{constructor(l){var b,w,F;const B=!!(l.data.hasPopup||(b=l.data.titleObj)!==null&&b!==void 0&&b.str||(w=l.data.contentsObj)!==null&&w!==void 0&&w.str||(F=l.data.richText)!==null&&F!==void 0&&F.str);super(l,{isRenderable:B,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class Ce extends S{constructor(l){var b;super(l,{isRenderable:!0});const{filename:w,content:F}=this.data.file;this.filename=(0,o.getFilenameFromUrl)(w),this.content=F,(b=this.linkService.eventBus)===null||b===void 0||b.dispatch("fileattachmentannotation",{source:this,filename:w,content:F})}render(){var l,b;this.container.className="fileAttachmentAnnotation";const w=document.createElement("div");return w.className="popupTriggerArea",w.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((l=this.data.titleObj)!==null&&l!==void 0&&l.str||(b=this.data.contentsObj)!==null&&b!==void 0&&b.str||this.data.richText)&&this._createPopup(w,this.data),this.container.append(w),this.container}_download(){var l;(l=this.downloadManager)===null||l===void 0||l.openOrDownloadData(this.container,this.content,this.filename)}}class V{static render(l){const{annotations:b,div:w,viewport:F,accessibilityManager:B}=l;C(this,V,P).call(this,w,F);let $=0;for(const Z of b){if(Z.annotationType!==n.AnnotationType.POPUP){const{width:ie,height:ce}=E(Z.rect);if(ie<=0||ce<=0)continue}const re=O.create({data:Z,layer:w,page:l.page,viewport:F,linkService:l.linkService,downloadManager:l.downloadManager,imageResourcesPath:l.imageResourcesPath||"",renderForms:l.renderForms!==!1,svgFactory:new o.DOMSVGFactory,annotationStorage:l.annotationStorage||new g.AnnotationStorage,enableScripting:l.enableScripting,hasJSActions:l.hasJSActions,fieldObjects:l.fieldObjects,mouseState:l.mouseState||{isDown:!1}});if(re.isRenderable){const ie=re.render();if(Z.hidden&&(ie.style.visibility="hidden"),Array.isArray(ie))for(const ce of ie)ce.style.zIndex=$++,C(V,V,_).call(V,ce,Z.id,w,B);else ie.style.zIndex=$++,re instanceof p?w.prepend(ie):C(V,V,_).call(V,ie,Z.id,w,B)}}C(this,V,G).call(this,w,l.annotationCanvasMap)}static update(l){const{annotationCanvasMap:b,div:w,viewport:F}=l;C(this,V,P).call(this,w,F),C(this,V,G).call(this,w,b),w.hidden=!1}}i.AnnotationLayer=V;function _(z,l,b,w){const F=z.firstChild||z;F.id=`${o.AnnotationPrefix}${l}`,b.append(z),w?.moveElementInDOM(b,z,F,!1)}function P(z,l){let{width:b,height:w,rotation:F}=l;const{style:B}=z,$=F%180!==0,Z=Math.floor(b)+"px",re=Math.floor(w)+"px";B.width=$?re:Z,B.height=$?Z:re,z.setAttribute("data-main-rotation",F)}function G(z,l){if(l){for(const[b,w]of l){const F=z.querySelector(`[data-annotation-id="${b}"]`);if(!F)continue;const{firstChild:B}=F;B?B.nodeName==="CANVAS"?B.replaceWith(w):B.before(w):F.append(w)}l.clear()}}},(k,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorConverters=void 0;function t(o){return Math.floor(Math.max(0,Math.min(1,o))*255).toString(16).padStart(2,"0")}class n{static CMYK_G(g){let[A,R,C,y]=g;return["G",1-Math.min(1,.3*A+.59*C+.11*R+y)]}static G_CMYK(g){let[A]=g;return["CMYK",0,0,0,1-A]}static G_RGB(g){let[A]=g;return["RGB",A,A,A]}static G_HTML(g){let[A]=g;const R=t(A);return`#${R}${R}${R}`}static RGB_G(g){let[A,R,C]=g;return["G",.3*A+.59*R+.11*C]}static RGB_HTML(g){let[A,R,C]=g;const y=t(A),v=t(R),I=t(C);return`#${y}${v}${I}`}static T_HTML(){return"#00000000"}static CMYK_RGB(g){let[A,R,C,y]=g;return["RGB",1-Math.min(1,A+y),1-Math.min(1,C+y),1-Math.min(1,R+y)]}static CMYK_HTML(g){const A=this.CMYK_RGB(g).slice(1);return this.RGB_HTML(A)}static RGB_CMYK(g){let[A,R,C]=g;const y=1-A,v=1-R,I=1-C,u=Math.min(y,v,I);return["CMYK",y,v,I,u]}}i.ColorConverters=n},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaLayer=void 0;var n=t(145);class o{static setupStorage(A,R,C,y,v){const I=y.getValue(R,{value:null});switch(C.name){case"textarea":if(I.value!==null&&(A.textContent=I.value),v==="print")break;A.addEventListener("input",u=>{y.setValue(R,{value:u.target.value})});break;case"input":if(C.attributes.type==="radio"||C.attributes.type==="checkbox"){if(I.value===C.attributes.xfaOn?A.setAttribute("checked",!0):I.value===C.attributes.xfaOff&&A.removeAttribute("checked"),v==="print")break;A.addEventListener("change",u=>{y.setValue(R,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(I.value!==null&&A.setAttribute("value",I.value),v==="print")break;A.addEventListener("input",u=>{y.setValue(R,{value:u.target.value})})}break;case"select":if(I.value!==null)for(const u of C.children)u.attributes.value===I.value&&(u.attributes.selected=!0);A.addEventListener("input",u=>{const E=u.target.options,O=E.selectedIndex===-1?"":E[E.selectedIndex].value;y.setValue(R,{value:O})});break}}static setAttributes(A){let{html:R,element:C,storage:y=null,intent:v,linkService:I}=A;const{attributes:u}=C,E=R instanceof HTMLAnchorElement;u.type==="radio"&&(u.name=`${u.name}-${v}`);for(const[O,S]of Object.entries(u))if(S!=null)switch(O){case"class":S.length&&R.setAttribute(O,S.join(" "));break;case"dataId":break;case"id":R.setAttribute("data-element-id",S);break;case"style":Object.assign(R.style,S);break;case"textContent":R.textContent=S;break;default:(!E||O!=="href"&&O!=="newWindow")&&R.setAttribute(O,S)}E&&I.addLinkAttributes(R,u.href,u.newWindow),y&&u.dataId&&this.setupStorage(R,u.dataId,C,y)}static render(A){const R=A.annotationStorage,C=A.linkService,y=A.xfaHtml,v=A.intent||"display",I=document.createElement(y.name);y.attributes&&this.setAttributes({html:I,element:y,intent:v,linkService:C});const u=[[y,-1,I]],E=A.div;if(E.append(I),A.viewport){const x=`matrix(${A.viewport.transform.join(",")})`;E.style.transform=x}v!=="richText"&&E.setAttribute("class","xfaLayer xfaFont");const O=[];for(;u.length>0;){var S;const[x,L,c]=u.at(-1);if(L+1===x.children.length){u.pop();continue}const h=x.children[++u.at(-1)[1]];if(h===null)continue;const{name:d}=h;if(d==="#text"){const s=document.createTextNode(h.value);O.push(s),c.append(s);continue}let a;if(h!=null&&(S=h.attributes)!==null&&S!==void 0&&S.xmlns?a=document.createElementNS(h.attributes.xmlns,d):a=document.createElement(d),c.append(a),h.attributes&&this.setAttributes({html:a,element:h,storage:R,intent:v,linkService:C}),h.children&&h.children.length>0)u.push([h,-1,a]);else if(h.value){const s=document.createTextNode(h.value);n.XfaText.shouldBuildText(d)&&O.push(s),a.append(s)}}for(const x of E.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))x.setAttribute("readOnly",!0);return{textDivs:O}}static update(A){const R=`matrix(${A.viewport.transform.join(",")})`;A.div.style.transform=R,A.div.hidden=!1}}i.XfaLayer=o},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextLayerRenderTask=void 0,i.renderTextLayer=c;var n=t(1),o=t(133);const g=1e5,A=30,R=.8,C=new Map,y=/^\s+$/g;function v(h,d){const a=C.get(h);if(a)return a;d.save(),d.font=`${A}px ${h}`;const s=d.measureText("");let m=s.fontBoundingBoxAscent,p=Math.abs(s.fontBoundingBoxDescent);if(m){d.restore();const N=m/(m+p);return C.set(h,N),N}d.strokeStyle="red",d.clearRect(0,0,A,A),d.strokeText("g",0,0);let T=d.getImageData(0,0,A,A).data;p=0;for(let N=T.length-1-3;N>=0;N-=4)if(T[N]>0){p=Math.ceil(N/4/A);break}d.clearRect(0,0,A,A),d.strokeText("A",0,A),T=d.getImageData(0,0,A,A).data,m=0;for(let N=0,M=T.length;N<M;N+=4)if(T[N]>0){m=A-Math.floor(N/4/A);break}if(d.restore(),m){const N=m/(m+p);return C.set(h,N),N}return C.set(h,R),R}function I(h,d,a,s){const m=document.createElement("span"),p=h._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:d.str!=="",hasEOL:d.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:d.str!=="",hasEOL:d.hasEOL,fontSize:0};h._textDivs.push(m);const T=n.Util.transform(h._viewport.transform,d.transform);let N=Math.atan2(T[1],T[0]);const M=a[d.fontName];M.vertical&&(N+=Math.PI/2);const Q=Math.hypot(T[2],T[3]),q=Q*v(M.fontFamily,s);let X,K;N===0?(X=T[4],K=T[5]-q):(X=T[4]+q*Math.sin(N),K=T[5]-q*Math.cos(N)),m.style.left=`${X}px`,m.style.top=`${K}px`,m.style.fontSize=`${Q}px`,m.style.fontFamily=M.fontFamily,p.fontSize=Q,m.setAttribute("role","presentation"),m.textContent=d.str,m.dir=d.dir,h._fontInspectorEnabled&&(m.dataset.fontName=d.fontName),N!==0&&(p.angle=N*(180/Math.PI));let H=!1;if(d.str.length>1||h._enhanceTextSelection&&y.test(d.str))H=!0;else if(d.str!==" "&&d.transform[0]!==d.transform[3]){const U=Math.abs(d.transform[0]),W=Math.abs(d.transform[3]);U!==W&&Math.max(U,W)/Math.min(U,W)>1.5&&(H=!0)}if(H&&(M.vertical?p.canvasWidth=d.height*h._viewport.scale:p.canvasWidth=d.width*h._viewport.scale),h._textDivProperties.set(m,p),h._textContentStream&&h._layoutText(m),h._enhanceTextSelection&&p.hasText){let U=1,W=0;N!==0&&(U=Math.cos(N),W=Math.sin(N));const D=(M.vertical?d.height:d.width)*h._viewport.scale,J=Q;let le,ve;N!==0?(le=[U,W,-W,U,X,K],ve=n.Util.getAxialAlignedBoundingBox([0,0,D,J],le)):ve=[X,K,X+D,K+J],h._bounds.push({left:ve[0],top:ve[1],right:ve[2],bottom:ve[3],div:m,size:[D,J],m:le})}}function u(h){if(h._canceled)return;const d=h._textDivs,a=h._capability,s=d.length;if(s>g){h._renderingDone=!0,a.resolve();return}if(!h._textContentStream)for(let m=0;m<s;m++)h._layoutText(d[m]);h._renderingDone=!0,a.resolve()}function E(h,d,a){let s=0;for(let m=0;m<a;m++){const p=h[d++];p>0&&(s=s?Math.min(p,s):p)}return s}function O(h){const d=h._bounds,a=h._viewport,s=S(a.width,a.height,d);for(let m=0;m<s.length;m++){const p=d[m].div,T=h._textDivProperties.get(p);if(T.angle===0){T.paddingLeft=d[m].left-s[m].left,T.paddingTop=d[m].top-s[m].top,T.paddingRight=s[m].right-d[m].right,T.paddingBottom=s[m].bottom-d[m].bottom,h._textDivProperties.set(p,T);continue}const N=s[m],M=d[m],Q=M.m,q=Q[0],X=Q[1],K=[[0,0],[0,M.size[1]],[M.size[0],0],M.size],H=new Float64Array(64);for(let W=0,D=K.length;W<D;W++){const J=n.Util.applyTransform(K[W],Q);H[W+0]=q&&(N.left-J[0])/q,H[W+4]=X&&(N.top-J[1])/X,H[W+8]=q&&(N.right-J[0])/q,H[W+12]=X&&(N.bottom-J[1])/X,H[W+16]=X&&(N.left-J[0])/-X,H[W+20]=q&&(N.top-J[1])/q,H[W+24]=X&&(N.right-J[0])/-X,H[W+28]=q&&(N.bottom-J[1])/q,H[W+32]=q&&(N.left-J[0])/-q,H[W+36]=X&&(N.top-J[1])/-X,H[W+40]=q&&(N.right-J[0])/-q,H[W+44]=X&&(N.bottom-J[1])/-X,H[W+48]=X&&(N.left-J[0])/X,H[W+52]=q&&(N.top-J[1])/-q,H[W+56]=X&&(N.right-J[0])/X,H[W+60]=q&&(N.bottom-J[1])/-q}const U=1+Math.min(Math.abs(q),Math.abs(X));T.paddingLeft=E(H,32,16)/U,T.paddingTop=E(H,48,16)/U,T.paddingRight=E(H,0,16)/U,T.paddingBottom=E(H,16,16)/U,h._textDivProperties.set(p,T)}}function S(h,d,a){const s=a.map(function(p,T){return{x1:p.left,y1:p.top,x2:p.right,y2:p.bottom,index:T,x1New:void 0,x2New:void 0}});x(h,s);const m=new Array(a.length);for(const p of s){const T=p.index;m[T]={left:p.x1New,top:0,right:p.x2New,bottom:0}}a.map(function(p,T){const N=m[T],M=s[T];M.x1=p.top,M.y1=h-N.right,M.x2=p.bottom,M.y2=h-N.left,M.index=T,M.x1New=void 0,M.x2New=void 0}),x(d,s);for(const p of s){const T=p.index;m[T].top=p.x1New,m[T].bottom=p.x2New}return m}function x(h,d){d.sort(function(m,p){return m.x1-p.x1||m.index-p.index});const s=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const m of d){let p=0;for(;p<s.length&&s[p].end<=m.y1;)p++;let T=s.length-1;for(;T>=0&&s[T].start>=m.y2;)T--;let N,M,Q,q,X=-1/0;for(Q=p;Q<=T;Q++){N=s[Q],M=N.boundary;let U;M.x2>m.x1?U=M.index>m.index?M.x1New:m.x1:M.x2New===void 0?U=(M.x2+m.x1)/2:U=M.x2New,U>X&&(X=U)}for(m.x1New=X,Q=p;Q<=T;Q++)N=s[Q],M=N.boundary,M.x2New===void 0?M.x2>m.x1?M.index>m.index&&(M.x2New=M.x2):M.x2New=X:M.x2New>X&&(M.x2New=Math.max(X,M.x2));const K=[];let H=null;for(Q=p;Q<=T;Q++){N=s[Q],M=N.boundary;const U=M.x2>m.x2?M:m;H===U?K.at(-1).end=N.end:(K.push({start:N.start,end:N.end,boundary:U}),H=U)}for(s[p].start<m.y1&&(K[0].start=m.y1,K.unshift({start:s[p].start,end:m.y1,boundary:s[p].boundary})),m.y2<s[T].end&&(K.at(-1).end=m.y2,K.push({start:m.y2,end:s[T].end,boundary:s[T].boundary})),Q=p;Q<=T;Q++){if(N=s[Q],M=N.boundary,M.x2New!==void 0)continue;let U=!1;for(q=p-1;!U&&q>=0&&s[q].start>=M.y1;q--)U=s[q].boundary===M;for(q=T+1;!U&&q<s.length&&s[q].end<=M.y2;q++)U=s[q].boundary===M;for(q=0;!U&&q<K.length;q++)U=K[q].boundary===M;U||(M.x2New=X)}Array.prototype.splice.apply(s,[p,T-p+1,...K])}for(const m of s){const p=m.boundary;p.x2New===void 0&&(p.x2New=Math.max(h,p.x2))}}class L{constructor(d){var a;let{textContent:s,textContentStream:m,container:p,viewport:T,textDivs:N,textContentItemsStr:M,enhanceTextSelection:Q}=d;Q&&(0,o.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=s,this._textContentStream=m,this._container=p,this._document=p.ownerDocument,this._viewport=T,this._textDivs=N||[],this._textContentItemsStr=M||[],this._enhanceTextSelection=!!Q,this._fontInspectorEnabled=!!((a=globalThis.FontInspector)!==null&&a!==void 0&&a.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(d,a){for(let s=0,m=d.length;s<m;s++){if(d[s].str===void 0){if(d[s].type==="beginMarkedContentProps"||d[s].type==="beginMarkedContent"){const p=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),d[s].id!==null&&this._container.setAttribute("id",`${d[s].id}`),p.append(this._container)}else d[s].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(d[s].str),I(this,d[s],a,this._layoutTextCtx)}}_layoutText(d){const a=this._textDivProperties.get(d);let s="";if(a.canvasWidth!==0&&a.hasText){const{fontFamily:m}=d.style,{fontSize:p}=a;(p!==this._layoutTextLastFontSize||m!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${p*this._devicePixelRatio}px ${m}`,this._layoutTextLastFontSize=p,this._layoutTextLastFontFamily=m);const{width:T}=this._layoutTextCtx.measureText(d.textContent);if(T>0){const N=this._devicePixelRatio*a.canvasWidth/T;this._enhanceTextSelection&&(a.scale=N),s=`scaleX(${N})`}}if(a.angle!==0&&(s=`rotate(${a.angle}deg) ${s}`),s.length>0&&(this._enhanceTextSelection&&(a.originalTransform=s),d.style.transform=s),a.hasText&&this._container.append(d),a.hasEOL){const m=document.createElement("br");m.setAttribute("role","presentation"),this._container.append(m)}}_render(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;const a=(0,n.createPromiseCapability)();let s=Object.create(null);const m=this._document.createElement("canvas");if(m.height=m.width=A,this._layoutTextCtx=m.getContext("2d",{alpha:!1}),this._textContent){const p=this._textContent.items,T=this._textContent.styles;this._processItems(p,T),a.resolve()}else if(this._textContentStream){const p=()=>{this._reader.read().then(T=>{let{value:N,done:M}=T;if(M){a.resolve();return}Object.assign(s,N.styles),this._processItems(N.items,s),p()},a.reject)};this._reader=this._textContentStream.getReader(),p()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');a.promise.then(()=>{s=null,d?this._renderTimer=setTimeout(()=>{u(this),this._renderTimer=null},d):u(this)},this._capability.reject)}expandTextDivs(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(O(this),this._bounds=null);const a=[],s=[];for(let m=0,p=this._textDivs.length;m<p;m++){const T=this._textDivs[m],N=this._textDivProperties.get(T);N.hasText&&(d?(a.length=0,s.length=0,N.originalTransform&&a.push(N.originalTransform),N.paddingTop>0?(s.push(`${N.paddingTop}px`),a.push(`translateY(${-N.paddingTop}px)`)):s.push(0),N.paddingRight>0?s.push(`${N.paddingRight/N.scale}px`):s.push(0),N.paddingBottom>0?s.push(`${N.paddingBottom}px`):s.push(0),N.paddingLeft>0?(s.push(`${N.paddingLeft/N.scale}px`),a.push(`translateX(${-N.paddingLeft/N.scale}px)`)):s.push(0),T.style.padding=s.join(" "),a.length&&(T.style.transform=a.join(" "))):(T.style.padding=null,T.style.transform=N.originalTransform))}}}i.TextLayerRenderTask=L;function c(h){const d=new L({textContent:h.textContent,textContentStream:h.textContentStream,container:h.container,viewport:h.viewport,textDivs:h.textDivs,textContentItemsStr:h.textContentItemsStr,enhanceTextSelection:h.enhanceTextSelection});return d._render(h.timeout),d}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SVGGraphics=void 0;var n=t(133),o=t(1),g=t(3);let A=class{constructor(){(0,o.unreachable)("Not implemented: SVGGraphics")}};i.SVGGraphics=A;{let S=function(a){let s=[];const m=[];for(const p of a){if(p.fn==="save"){s.push({fnId:92,fn:"group",items:[]}),m.push(s),s=s.at(-1).items;continue}p.fn==="restore"?s=m.pop():s.push(p)}return s},x=function(a){if(Number.isInteger(a))return a.toString();const s=a.toFixed(10);let m=s.length-1;if(s[m]!=="0")return s;do m--;while(s[m]==="0");return s.substring(0,s[m]==="."?m:m+1)},L=function(a){if(a[4]===0&&a[5]===0){if(a[1]===0&&a[2]===0)return a[0]===1&&a[3]===1?"":`scale(${x(a[0])} ${x(a[3])})`;if(a[0]===a[3]&&a[1]===-a[2]){const s=Math.acos(a[0])*180/Math.PI;return`rotate(${x(s)})`}}else if(a[0]===1&&a[1]===0&&a[2]===0&&a[3]===1)return`translate(${x(a[4])} ${x(a[5])})`;return`matrix(${x(a[0])} ${x(a[1])} ${x(a[2])} ${x(a[3])} ${x(a[4])} ${x(a[5])})`};const R={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},C="http://www.w3.org/XML/1998/namespace",y="http://www.w3.org/1999/xlink",v=["butt","round","square"],I=["miter","round","bevel"],u=function(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(URL.createObjectURL&&typeof Blob<"u"&&!m)return URL.createObjectURL(new Blob([a],{type:s}));const p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let T=`data:${s};base64,`;for(let N=0,M=a.length;N<M;N+=3){const Q=a[N]&255,q=a[N+1]&255,X=a[N+2]&255,K=Q>>2,H=(Q&3)<<4|q>>4,U=N+1<M?(q&15)<<2|X>>6:64,W=N+2<M?X&63:64;T+=p[K]+p[H]+p[U]+p[W]}return T},E=function(){const a=new Uint8Array([137,80,78,71,13,10,26,10]),s=12,m=new Int32Array(256);for(let X=0;X<256;X++){let K=X;for(let H=0;H<8;H++)K&1?K=3988292384^K>>1&2147483647:K=K>>1&2147483647;m[X]=K}function p(X,K,H){let U=-1;for(let W=K;W<H;W++){const D=(U^X[W])&255,J=m[D];U=U>>>8^J}return U^-1}function T(X,K,H,U){let W=U;const D=K.length;H[W]=D>>24&255,H[W+1]=D>>16&255,H[W+2]=D>>8&255,H[W+3]=D&255,W+=4,H[W]=X.charCodeAt(0)&255,H[W+1]=X.charCodeAt(1)&255,H[W+2]=X.charCodeAt(2)&255,H[W+3]=X.charCodeAt(3)&255,W+=4,H.set(K,W),W+=K.length;const J=p(H,U+4,W);H[W]=J>>24&255,H[W+1]=J>>16&255,H[W+2]=J>>8&255,H[W+3]=J&255}function N(X,K,H){let U=1,W=0;for(let D=K;D<H;++D)U=(U+(X[D]&255))%65521,W=(W+U)%65521;return W<<16|U}function M(X){if(!g.isNodeJS)return Q(X);try{let K;parseInt(process.versions.node)>=8?K=X:K=Buffer.from(X);const H=require$$7.deflateSync(K,{level:9});return H instanceof Uint8Array?H:new Uint8Array(H)}catch(K){(0,o.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+K)}return Q(X)}function Q(X){let K=X.length;const H=65535,U=Math.ceil(K/H),W=new Uint8Array(2+K+U*5+4);let D=0;W[D++]=120,W[D++]=156;let J=0;for(;K>H;)W[D++]=0,W[D++]=255,W[D++]=255,W[D++]=0,W[D++]=0,W.set(X.subarray(J,J+H),D),D+=H,J+=H,K-=H;W[D++]=1,W[D++]=K&255,W[D++]=K>>8&255,W[D++]=~K&65535&255,W[D++]=(~K&65535)>>8&255,W.set(X.subarray(J),D),D+=X.length-J;const le=N(X,0,X.length);return W[D++]=le>>24&255,W[D++]=le>>16&255,W[D++]=le>>8&255,W[D++]=le&255,W}function q(X,K,H,U){const W=X.width,D=X.height;let J,le,ve;const Ce=X.data;switch(K){case o.ImageKind.GRAYSCALE_1BPP:le=0,J=1,ve=W+7>>3;break;case o.ImageKind.RGB_24BPP:le=2,J=8,ve=W*3;break;case o.ImageKind.RGBA_32BPP:le=6,J=8,ve=W*4;break;default:throw new Error("invalid format")}const V=new Uint8Array((1+ve)*D);let _=0,P=0;for(let F=0;F<D;++F)V[_++]=0,V.set(Ce.subarray(P,P+ve),_),P+=ve,_+=ve;if(K===o.ImageKind.GRAYSCALE_1BPP&&U){_=0;for(let F=0;F<D;F++){_++;for(let B=0;B<ve;B++)V[_++]^=255}}const G=new Uint8Array([W>>24&255,W>>16&255,W>>8&255,W&255,D>>24&255,D>>16&255,D>>8&255,D&255,J,le,0,0,0]),z=M(V),l=a.length+s*3+G.length+z.length,b=new Uint8Array(l);let w=0;return b.set(a,w),w+=a.length,T("IHDR",G,b,w),w+=s+G.length,T("IDATA",z,b,w),w+=s+z.length,T("IEND",new Uint8Array(0),b,w),u(b,"image/png",H)}return function(K,H,U){const W=K.kind===void 0?o.ImageKind.GRAYSCALE_1BPP:K.kind;return q(K,W,H,U)}}();class O{constructor(){this.fontSizeScale=1,this.fontWeight=R.fontWeight,this.fontSize=0,this.textMatrix=o.IDENTITY_MATRIX,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=o.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=R.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(s,m){this.x=s,this.y=m}}let c=0,h=0,d=0;i.SVGGraphics=A=class{constructor(a,s){let m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new O,this.transformMatrix=o.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=a,this.objs=s,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!m,this._operatorIdMapping=[];for(const p in o.OPS)this._operatorIdMapping[o.OPS[p]]=p}save(){this.transformStack.push(this.transformMatrix);const a=this.current;this.extraStack.push(a),this.current=a.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(a){this.save(),this.executeOpTree(a),this.restore()}loadDependencies(a){const s=a.fnArray,m=a.argsArray;for(let p=0,T=s.length;p<T;p++)if(s[p]===o.OPS.dependency)for(const N of m[p]){const M=N.startsWith("g_")?this.commonObjs:this.objs,Q=new Promise(q=>{M.get(N,q)});this.current.dependencies.push(Q)}return Promise.all(this.current.dependencies)}transform(a,s,m,p,T,N){const M=[a,s,m,p,T,N];this.transformMatrix=o.Util.transform(this.transformMatrix,M),this.tgrp=null}getSVG(a,s){this.viewport=s;const m=this._initialize(s);return this.loadDependencies(a).then(()=>(this.transformMatrix=o.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(a)),m))}convertOpList(a){const s=this._operatorIdMapping,m=a.argsArray,p=a.fnArray,T=[];for(let N=0,M=p.length;N<M;N++){const Q=p[N];T.push({fnId:Q,fn:s[Q],args:m[N]})}return S(T)}executeOpTree(a){for(const s of a){const m=s.fn,p=s.fnId,T=s.args;switch(p|0){case o.OPS.beginText:this.beginText();break;case o.OPS.dependency:break;case o.OPS.setLeading:this.setLeading(T);break;case o.OPS.setLeadingMoveText:this.setLeadingMoveText(T[0],T[1]);break;case o.OPS.setFont:this.setFont(T);break;case o.OPS.showText:this.showText(T[0]);break;case o.OPS.showSpacedText:this.showText(T[0]);break;case o.OPS.endText:this.endText();break;case o.OPS.moveText:this.moveText(T[0],T[1]);break;case o.OPS.setCharSpacing:this.setCharSpacing(T[0]);break;case o.OPS.setWordSpacing:this.setWordSpacing(T[0]);break;case o.OPS.setHScale:this.setHScale(T[0]);break;case o.OPS.setTextMatrix:this.setTextMatrix(T[0],T[1],T[2],T[3],T[4],T[5]);break;case o.OPS.setTextRise:this.setTextRise(T[0]);break;case o.OPS.setTextRenderingMode:this.setTextRenderingMode(T[0]);break;case o.OPS.setLineWidth:this.setLineWidth(T[0]);break;case o.OPS.setLineJoin:this.setLineJoin(T[0]);break;case o.OPS.setLineCap:this.setLineCap(T[0]);break;case o.OPS.setMiterLimit:this.setMiterLimit(T[0]);break;case o.OPS.setFillRGBColor:this.setFillRGBColor(T[0],T[1],T[2]);break;case o.OPS.setStrokeRGBColor:this.setStrokeRGBColor(T[0],T[1],T[2]);break;case o.OPS.setStrokeColorN:this.setStrokeColorN(T);break;case o.OPS.setFillColorN:this.setFillColorN(T);break;case o.OPS.shadingFill:this.shadingFill(T[0]);break;case o.OPS.setDash:this.setDash(T[0],T[1]);break;case o.OPS.setRenderingIntent:this.setRenderingIntent(T[0]);break;case o.OPS.setFlatness:this.setFlatness(T[0]);break;case o.OPS.setGState:this.setGState(T[0]);break;case o.OPS.fill:this.fill();break;case o.OPS.eoFill:this.eoFill();break;case o.OPS.stroke:this.stroke();break;case o.OPS.fillStroke:this.fillStroke();break;case o.OPS.eoFillStroke:this.eoFillStroke();break;case o.OPS.clip:this.clip("nonzero");break;case o.OPS.eoClip:this.clip("evenodd");break;case o.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case o.OPS.paintImageXObject:this.paintImageXObject(T[0]);break;case o.OPS.paintInlineImageXObject:this.paintInlineImageXObject(T[0]);break;case o.OPS.paintImageMaskXObject:this.paintImageMaskXObject(T[0]);break;case o.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(T[0],T[1]);break;case o.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case o.OPS.closePath:this.closePath();break;case o.OPS.closeStroke:this.closeStroke();break;case o.OPS.closeFillStroke:this.closeFillStroke();break;case o.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case o.OPS.nextLine:this.nextLine();break;case o.OPS.transform:this.transform(T[0],T[1],T[2],T[3],T[4],T[5]);break;case o.OPS.constructPath:this.constructPath(T[0],T[1]);break;case o.OPS.endPath:this.endPath();break;case 92:this.group(s.items);break;default:(0,o.warn)(`Unimplemented operator ${m}`);break}}}setWordSpacing(a){this.current.wordSpacing=a}setCharSpacing(a){this.current.charSpacing=a}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(a,s,m,p,T,N){const M=this.current;M.textMatrix=M.lineMatrix=[a,s,m,p,T,N],M.textMatrixScale=Math.hypot(a,s),M.x=M.lineX=0,M.y=M.lineY=0,M.xcoords=[],M.ycoords=[],M.tspan=this.svgFactory.createElement("svg:tspan"),M.tspan.setAttributeNS(null,"font-family",M.fontFamily),M.tspan.setAttributeNS(null,"font-size",`${x(M.fontSize)}px`),M.tspan.setAttributeNS(null,"y",x(-M.y)),M.txtElement=this.svgFactory.createElement("svg:text"),M.txtElement.append(M.tspan)}beginText(){const a=this.current;a.x=a.lineX=0,a.y=a.lineY=0,a.textMatrix=o.IDENTITY_MATRIX,a.lineMatrix=o.IDENTITY_MATRIX,a.textMatrixScale=1,a.tspan=this.svgFactory.createElement("svg:tspan"),a.txtElement=this.svgFactory.createElement("svg:text"),a.txtgrp=this.svgFactory.createElement("svg:g"),a.xcoords=[],a.ycoords=[]}moveText(a,s){const m=this.current;m.x=m.lineX+=a,m.y=m.lineY+=s,m.xcoords=[],m.ycoords=[],m.tspan=this.svgFactory.createElement("svg:tspan"),m.tspan.setAttributeNS(null,"font-family",m.fontFamily),m.tspan.setAttributeNS(null,"font-size",`${x(m.fontSize)}px`),m.tspan.setAttributeNS(null,"y",x(-m.y))}showText(a){const s=this.current,m=s.font,p=s.fontSize;if(p===0)return;const T=s.fontSizeScale,N=s.charSpacing,M=s.wordSpacing,Q=s.fontDirection,q=s.textHScale*Q,X=m.vertical,K=X?1:-1,H=m.defaultVMetrics,U=p*s.fontMatrix[0];let W=0;for(const le of a){if(le===null){W+=Q*M;continue}else if(typeof le=="number"){W+=K*le*p/1e3;continue}const ve=(le.isSpace?M:0)+N,Ce=le.fontChar;let V,_,P=le.width;if(X){let z;const l=le.vmetric||H;z=le.vmetric?l[1]:P*.5,z=-z*U;const b=l[2]*U;P=l?-l[0]:P,V=z/T,_=(W+b)/T}else V=W/T,_=0;(le.isInFont||m.missingFile)&&(s.xcoords.push(s.x+V),X&&s.ycoords.push(-s.y+_),s.tspan.textContent+=Ce);let G;X?G=P*U-ve*Q:G=P*U+ve*Q,W+=G}s.tspan.setAttributeNS(null,"x",s.xcoords.map(x).join(" ")),X?s.tspan.setAttributeNS(null,"y",s.ycoords.map(x).join(" ")):s.tspan.setAttributeNS(null,"y",x(-s.y)),X?s.y-=W:s.x+=W*q,s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${x(s.fontSize)}px`),s.fontStyle!==R.fontStyle&&s.tspan.setAttributeNS(null,"font-style",s.fontStyle),s.fontWeight!==R.fontWeight&&s.tspan.setAttributeNS(null,"font-weight",s.fontWeight);const D=s.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;if(D===o.TextRenderingMode.FILL||D===o.TextRenderingMode.FILL_STROKE?(s.fillColor!==R.fillColor&&s.tspan.setAttributeNS(null,"fill",s.fillColor),s.fillAlpha<1&&s.tspan.setAttributeNS(null,"fill-opacity",s.fillAlpha)):s.textRenderingMode===o.TextRenderingMode.ADD_TO_PATH?s.tspan.setAttributeNS(null,"fill","transparent"):s.tspan.setAttributeNS(null,"fill","none"),D===o.TextRenderingMode.STROKE||D===o.TextRenderingMode.FILL_STROKE){const le=1/(s.textMatrixScale||1);this._setStrokeAttributes(s.tspan,le)}let J=s.textMatrix;s.textRise!==0&&(J=J.slice(),J[5]+=s.textRise),s.txtElement.setAttributeNS(null,"transform",`${L(J)} scale(${x(q)}, -1)`),s.txtElement.setAttributeNS(C,"xml:space","preserve"),s.txtElement.append(s.tspan),s.txtgrp.append(s.txtElement),this._ensureTransformGroup().append(s.txtElement)}setLeadingMoveText(a,s){this.setLeading(-s),this.moveText(a,s)}addFontStyle(a){if(!a.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const s=u(a.data,a.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${a.loadedName}"; src: url(${s}); }
`}setFont(a){const s=this.current,m=this.commonObjs.get(a[0]);let p=a[1];s.font=m,this.embedFonts&&!m.missingFile&&!this.embeddedFonts[m.loadedName]&&(this.addFontStyle(m),this.embeddedFonts[m.loadedName]=m),s.fontMatrix=m.fontMatrix||o.FONT_IDENTITY_MATRIX;let T="normal";m.black?T="900":m.bold&&(T="bold");const N=m.italic?"italic":"normal";p<0?(p=-p,s.fontDirection=-1):s.fontDirection=1,s.fontSize=p,s.fontFamily=m.loadedName,s.fontWeight=T,s.fontStyle=N,s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"y",x(-s.y)),s.xcoords=[],s.ycoords=[]}endText(){var a;const s=this.current;s.textRenderingMode&o.TextRenderingMode.ADD_TO_PATH_FLAG&&(a=s.txtElement)!==null&&a!==void 0&&a.hasChildNodes()&&(s.element=s.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(a){a>0&&(this.current.lineWidth=a)}setLineCap(a){this.current.lineCap=v[a]}setLineJoin(a){this.current.lineJoin=I[a]}setMiterLimit(a){this.current.miterLimit=a}setStrokeAlpha(a){this.current.strokeAlpha=a}setStrokeRGBColor(a,s,m){this.current.strokeColor=o.Util.makeHexColor(a,s,m)}setFillAlpha(a){this.current.fillAlpha=a}setFillRGBColor(a,s,m){this.current.fillColor=o.Util.makeHexColor(a,s,m),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(a){this.current.strokeColor=this._makeColorN_Pattern(a)}setFillColorN(a){this.current.fillColor=this._makeColorN_Pattern(a)}shadingFill(a){const s=this.viewport.width,m=this.viewport.height,p=o.Util.inverseTransform(this.transformMatrix),T=o.Util.applyTransform([0,0],p),N=o.Util.applyTransform([0,m],p),M=o.Util.applyTransform([s,0],p),Q=o.Util.applyTransform([s,m],p),q=Math.min(T[0],N[0],M[0],Q[0]),X=Math.min(T[1],N[1],M[1],Q[1]),K=Math.max(T[0],N[0],M[0],Q[0]),H=Math.max(T[1],N[1],M[1],Q[1]),U=this.svgFactory.createElement("svg:rect");U.setAttributeNS(null,"x",q),U.setAttributeNS(null,"y",X),U.setAttributeNS(null,"width",K-q),U.setAttributeNS(null,"height",H-X),U.setAttributeNS(null,"fill",this._makeShadingPattern(a)),this.current.fillAlpha<1&&U.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(U)}_makeColorN_Pattern(a){return a[0]==="TilingPattern"?this._makeTilingPattern(a):this._makeShadingPattern(a)}_makeTilingPattern(a){const s=a[1],m=a[2],p=a[3]||o.IDENTITY_MATRIX,[T,N,M,Q]=a[4],q=a[5],X=a[6],K=a[7],H=`shading${d++}`,[U,W,D,J]=o.Util.normalizeRect([...o.Util.applyTransform([T,N],p),...o.Util.applyTransform([M,Q],p)]),[le,ve]=o.Util.singularValueDecompose2dScale(p),Ce=q*le,V=X*ve,_=this.svgFactory.createElement("svg:pattern");_.setAttributeNS(null,"id",H),_.setAttributeNS(null,"patternUnits","userSpaceOnUse"),_.setAttributeNS(null,"width",Ce),_.setAttributeNS(null,"height",V),_.setAttributeNS(null,"x",`${U}`),_.setAttributeNS(null,"y",`${W}`);const P=this.svg,G=this.transformMatrix,z=this.current.fillColor,l=this.current.strokeColor,b=this.svgFactory.create(D-U,J-W);if(this.svg=b,this.transformMatrix=p,K===2){const w=o.Util.makeHexColor(...s);this.current.fillColor=w,this.current.strokeColor=w}return this.executeOpTree(this.convertOpList(m)),this.svg=P,this.transformMatrix=G,this.current.fillColor=z,this.current.strokeColor=l,_.append(b.childNodes[0]),this.defs.append(_),`url(#${H})`}_makeShadingPattern(a){switch(typeof a=="string"&&(a=this.objs.get(a)),a[0]){case"RadialAxial":const s=`shading${d++}`,m=a[3];let p;switch(a[1]){case"axial":const T=a[4],N=a[5];p=this.svgFactory.createElement("svg:linearGradient"),p.setAttributeNS(null,"id",s),p.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),p.setAttributeNS(null,"x1",T[0]),p.setAttributeNS(null,"y1",T[1]),p.setAttributeNS(null,"x2",N[0]),p.setAttributeNS(null,"y2",N[1]);break;case"radial":const M=a[4],Q=a[5],q=a[6],X=a[7];p=this.svgFactory.createElement("svg:radialGradient"),p.setAttributeNS(null,"id",s),p.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),p.setAttributeNS(null,"cx",Q[0]),p.setAttributeNS(null,"cy",Q[1]),p.setAttributeNS(null,"r",X),p.setAttributeNS(null,"fx",M[0]),p.setAttributeNS(null,"fy",M[1]),p.setAttributeNS(null,"fr",q);break;default:throw new Error(`Unknown RadialAxial type: ${a[1]}`)}for(const T of m){const N=this.svgFactory.createElement("svg:stop");N.setAttributeNS(null,"offset",T[0]),N.setAttributeNS(null,"stop-color",T[1]),p.append(N)}return this.defs.append(p),`url(#${s})`;case"Mesh":return(0,o.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${a[0]}`)}}setDash(a,s){this.current.dashArray=a,this.current.dashPhase=s}constructPath(a,s){const m=this.current;let p=m.x,T=m.y,N=[],M=0;for(const Q of a)switch(Q|0){case o.OPS.rectangle:p=s[M++],T=s[M++];const q=s[M++],X=s[M++],K=p+q,H=T+X;N.push("M",x(p),x(T),"L",x(K),x(T),"L",x(K),x(H),"L",x(p),x(H),"Z");break;case o.OPS.moveTo:p=s[M++],T=s[M++],N.push("M",x(p),x(T));break;case o.OPS.lineTo:p=s[M++],T=s[M++],N.push("L",x(p),x(T));break;case o.OPS.curveTo:p=s[M+4],T=s[M+5],N.push("C",x(s[M]),x(s[M+1]),x(s[M+2]),x(s[M+3]),x(p),x(T)),M+=6;break;case o.OPS.curveTo2:N.push("C",x(p),x(T),x(s[M]),x(s[M+1]),x(s[M+2]),x(s[M+3])),p=s[M+2],T=s[M+3],M+=4;break;case o.OPS.curveTo3:p=s[M+2],T=s[M+3],N.push("C",x(s[M]),x(s[M+1]),x(p),x(T),x(p),x(T)),M+=4;break;case o.OPS.closePath:N.push("Z");break}N=N.join(" "),m.path&&a.length>0&&a[0]!==o.OPS.rectangle&&a[0]!==o.OPS.moveTo?N=m.path.getAttributeNS(null,"d")+N:(m.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(m.path)),m.path.setAttributeNS(null,"d",N),m.path.setAttributeNS(null,"fill","none"),m.element=m.path,m.setCurrentPoint(p,T)}endPath(){const a=this.current;if(a.path=null,!this.pendingClip)return;if(!a.element){this.pendingClip=null;return}const s=`clippath${c++}`,m=this.svgFactory.createElement("svg:clipPath");m.setAttributeNS(null,"id",s),m.setAttributeNS(null,"transform",L(this.transformMatrix));const p=a.element.cloneNode(!0);if(this.pendingClip==="evenodd"?p.setAttributeNS(null,"clip-rule","evenodd"):p.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,m.append(p),this.defs.append(m),a.activeClipUrl){a.clipGroup=null;for(const T of this.extraStack)T.clipGroup=null;m.setAttributeNS(null,"clip-path",a.activeClipUrl)}a.activeClipUrl=`url(#${s})`,this.tgrp=null}clip(a){this.pendingClip=a}closePath(){const a=this.current;if(a.path){const s=`${a.path.getAttributeNS(null,"d")}Z`;a.path.setAttributeNS(null,"d",s)}}setLeading(a){this.current.leading=-a}setTextRise(a){this.current.textRise=a}setTextRenderingMode(a){this.current.textRenderingMode=a}setHScale(a){this.current.textHScale=a/100}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(const[s,m]of a)switch(s){case"LW":this.setLineWidth(m);break;case"LC":this.setLineCap(m);break;case"LJ":this.setLineJoin(m);break;case"ML":this.setMiterLimit(m);break;case"D":this.setDash(m[0],m[1]);break;case"RI":this.setRenderingIntent(m);break;case"FL":this.setFlatness(m);break;case"Font":this.setFont(m);break;case"CA":this.setStrokeAlpha(m);break;case"ca":this.setFillAlpha(m);break;default:(0,o.warn)(`Unimplemented graphic state operator ${s}`);break}}fill(){const a=this.current;a.element&&(a.element.setAttributeNS(null,"fill",a.fillColor),a.element.setAttributeNS(null,"fill-opacity",a.fillAlpha),this.endPath())}stroke(){const a=this.current;a.element&&(this._setStrokeAttributes(a.element),a.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const m=this.current;let p=m.dashArray;s!==1&&p.length>0&&(p=p.map(function(T){return s*T})),a.setAttributeNS(null,"stroke",m.strokeColor),a.setAttributeNS(null,"stroke-opacity",m.strokeAlpha),a.setAttributeNS(null,"stroke-miterlimit",x(m.miterLimit)),a.setAttributeNS(null,"stroke-linecap",m.lineCap),a.setAttributeNS(null,"stroke-linejoin",m.lineJoin),a.setAttributeNS(null,"stroke-width",x(s*m.lineWidth)+"px"),a.setAttributeNS(null,"stroke-dasharray",p.map(x).join(" ")),a.setAttributeNS(null,"stroke-dashoffset",x(s*m.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width","1px"),a.setAttributeNS(null,"height","1px"),a.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(a)}paintImageXObject(a){const s=a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a);if(!s){(0,o.warn)(`Dependent image with object ID ${a} is not ready yet`);return}this.paintInlineImageXObject(s)}paintInlineImageXObject(a,s){const m=a.width,p=a.height,T=E(a,this.forceDataSchema,!!s),N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width",x(m)),N.setAttributeNS(null,"height",x(p)),this.current.element=N,this.clip("nonzero");const M=this.svgFactory.createElement("svg:image");M.setAttributeNS(y,"xlink:href",T),M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y",x(-p)),M.setAttributeNS(null,"width",x(m)+"px"),M.setAttributeNS(null,"height",x(p)+"px"),M.setAttributeNS(null,"transform",`scale(${x(1/m)} ${x(-1/p)})`),s?s.append(M):this._ensureTransformGroup().append(M)}paintImageMaskXObject(a){const s=this.current,m=a.width,p=a.height,T=s.fillColor;s.maskId=`mask${h++}`;const N=this.svgFactory.createElement("svg:mask");N.setAttributeNS(null,"id",s.maskId);const M=this.svgFactory.createElement("svg:rect");M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y","0"),M.setAttributeNS(null,"width",x(m)),M.setAttributeNS(null,"height",x(p)),M.setAttributeNS(null,"fill",T),M.setAttributeNS(null,"mask",`url(#${s.maskId})`),this.defs.append(N),this._ensureTransformGroup().append(M),this.paintInlineImageXObject(a,N)}paintFormXObjectBegin(a,s){if(Array.isArray(a)&&a.length===6&&this.transform(a[0],a[1],a[2],a[3],a[4],a[5]),s){const m=s[2]-s[0],p=s[3]-s[1],T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x",s[0]),T.setAttributeNS(null,"y",s[1]),T.setAttributeNS(null,"width",x(m)),T.setAttributeNS(null,"height",x(p)),this.current.element=T,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(a){const s=this.svgFactory.create(a.width,a.height),m=this.svgFactory.createElement("svg:defs");s.append(m),this.defs=m;const p=this.svgFactory.createElement("svg:g");return p.setAttributeNS(null,"transform",L(a.transform)),s.append(p),this.svg=p,s}_ensureClipGroup(){if(!this.current.clipGroup){const a=this.svgFactory.createElement("svg:g");a.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(a),this.current.clipGroup=a}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",L(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNodeStream=void 0;var n=t(1),o=t(158);const g=require$$7,A=require$$7,R=require$$7,C=require$$7,y=/^file:\/\/\/[a-zA-Z]:\//;function v(h){const d=C.parse(h);return d.protocol==="file:"||d.host?d:/^[a-z]:[/\\]/i.test(h)?C.parse(`file:///${h}`):(d.host||(d.protocol="file:"),d)}class I{constructor(d){this.source=d,this.url=v(d.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&d.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var d,a;return(d=(a=this._fullRequestReader)===null||a===void 0?void 0:a._loaded)!==null&&d!==void 0?d:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new L(this):new S(this),this._fullRequestReader}getRangeReader(d,a){if(a<=this._progressiveDataLength)return null;const s=this.isFsUrl?new c(this,d,a):new x(this,d,a);return this._rangeRequestReaders.push(s),s}cancelAllRequests(d){this._fullRequestReader&&this._fullRequestReader.cancel(d);for(const a of this._rangeRequestReaders.slice(0))a.cancel(d)}}i.PDFNodeStream=I;class u{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null;const a=d.source;this._contentLength=a.length,this._loaded=0,this._filename=null,this._disableRange=a.disableRange||!1,this._rangeChunkSize=a.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!a.disableStream,this._isRangeSupported=!a.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const d=this._readableStream.read();return d===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=d.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(d).buffer,done:!1})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",a=>{this._error(a)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class E{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)();const a=d.source;this._isStreamingSupported=!a.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const d=this._readableStream.read();return d===null?(this._readCapability=(0,n.createPromiseCapability)(),this.read()):(this._loaded+=d.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(d).buffer,done:!1})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",a=>{this._error(a)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function O(h,d){return{protocol:h.protocol,auth:h.auth,host:h.hostname,port:h.port,path:h.path,method:"GET",headers:d}}class S extends u{constructor(d){super(d);const a=s=>{if(s.statusCode===404){const N=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=N,this._headersCapability.reject(N);return}this._headersCapability.resolve(),this._setReadableStream(s);const m=N=>this._readableStream.headers[N.toLowerCase()],{allowRangeRequests:p,suggestedLength:T}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:d.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=p,this._contentLength=T||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(m)};this._request=null,this._url.protocol==="http:"?this._request=A.request(O(this._url,d.httpHeaders),a):this._request=R.request(O(this._url,d.httpHeaders),a),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class x extends E{constructor(d,a,s){super(d),this._httpHeaders={};for(const p in d.httpHeaders){const T=d.httpHeaders[p];typeof T>"u"||(this._httpHeaders[p]=T)}this._httpHeaders.Range=`bytes=${a}-${s-1}`;const m=p=>{if(p.statusCode===404){const T=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=T;return}this._setReadableStream(p)};this._request=null,this._url.protocol==="http:"?this._request=A.request(O(this._url,this._httpHeaders),m):this._request=R.request(O(this._url,this._httpHeaders),m),this._request.on("error",p=>{this._storedError=p}),this._request.end()}}class L extends u{constructor(d){super(d);let a=decodeURIComponent(this._url.path);y.test(this._url.href)&&(a=a.replace(/^\//,"")),g.lstat(a,(s,m)=>{if(s){s.code==="ENOENT"&&(s=new n.MissingPDFException(`Missing PDF "${a}".`)),this._storedError=s,this._headersCapability.reject(s);return}this._contentLength=m.size,this._setReadableStream(g.createReadStream(a)),this._headersCapability.resolve()})}}class c extends E{constructor(d,a,s){super(d);let m=decodeURIComponent(this._url.path);y.test(this._url.href)&&(m=m.replace(/^\//,"")),this._setReadableStream(g.createReadStream(m,{start:a,end:s-1}))}}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createResponseStatusError=C,i.extractFilenameFromHeader=R,i.validateRangeRequestCapabilities=A,i.validateResponseStatus=y;var n=t(1),o=t(159),g=t(133);function A(v){let{getResponseHeader:I,isHttp:u,rangeChunkSize:E,disableRange:O}=v;const S={allowRangeRequests:!1,suggestedLength:void 0},x=parseInt(I("Content-Length"),10);return!Number.isInteger(x)||(S.suggestedLength=x,x<=2*E)||O||!u||I("Accept-Ranges")!=="bytes"||(I("Content-Encoding")||"identity")!=="identity"||(S.allowRangeRequests=!0),S}function R(v){const I=v("Content-Disposition");if(I){let u=(0,o.getFilenameFromContentDispositionHeader)(I);if(u.includes("%"))try{u=decodeURIComponent(u)}catch{}if((0,g.isPdfFile)(u))return u}return null}function C(v,I){return v===404||v===0&&I.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+I+'".'):new n.UnexpectedResponseException(`Unexpected server response (${v}) while retrieving PDF "${I}".`,v)}function y(v){return v===200||v===206}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getFilenameFromContentDispositionHeader=o;var n=t(1);function o(g){let A=!0,R=C("filename\\*","i").exec(g);if(R){R=R[1];let S=u(R);return S=unescape(S),S=E(S),S=O(S),v(S)}if(R=I(g),R){const S=O(R);return v(S)}if(R=C("filename","i").exec(g),R){R=R[1];let S=u(R);return S=O(S),v(S)}function C(S,x){return new RegExp("(?:^|;)\\s*"+S+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',x)}function y(S,x){if(S){if(!/^[\x00-\xFF]+$/.test(x))return x;try{const L=new TextDecoder(S,{fatal:!0}),c=(0,n.stringToBytes)(x);x=L.decode(c),A=!1}catch{}}return x}function v(S){return A&&/[\x80-\xff]/.test(S)&&(S=y("utf-8",S),A&&(S=y("iso-8859-1",S))),S}function I(S){const x=[];let L;const c=C("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(L=c.exec(S))!==null;){let[,d,a,s]=L;if(d=parseInt(d,10),d in x){if(d===0)break;continue}x[d]=[a,s]}const h=[];for(let d=0;d<x.length&&d in x;++d){let[a,s]=x[d];s=u(s),a&&(s=unescape(s),d===0&&(s=E(s))),h.push(s)}return h.join("")}function u(S){if(S.startsWith('"')){const x=S.slice(1).split('\\"');for(let L=0;L<x.length;++L){const c=x[L].indexOf('"');c!==-1&&(x[L]=x[L].slice(0,c),x.length=L+1),x[L]=x[L].replace(/\\(.)/g,"$1")}S=x.join('"')}return S}function E(S){const x=S.indexOf("'");if(x===-1)return S;const L=S.slice(0,x),h=S.slice(x+1).replace(/^[^']*'/,"");return y(L,h)}function O(S){return!S.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(S)?S:S.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(x,L,c,h){if(c==="q"||c==="Q")return h=h.replace(/_/g," "),h=h.replace(/=([0-9a-fA-F]{2})/g,function(d,a){return String.fromCharCode(parseInt(a,16))}),y(L,h);try{h=atob(h)}catch{}return y(L,h)})}return""}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNetworkStream=void 0;var n=t(1),o=t(158);const g=200,A=206;function R(u){const E=u.response;return typeof E!="string"?E:(0,n.stringToBytes)(E).buffer}class C{constructor(E){let O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.url=E,this.isHttp=/^https?:/i.test(E),this.httpHeaders=this.isHttp&&O.httpHeaders||Object.create(null),this.withCredentials=O.withCredentials||!1,this.getXhr=O.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(E,O,S){const x={begin:E,end:O};for(const L in S)x[L]=S[L];return this.request(x)}requestFull(E){return this.request(E)}request(E){const O=this.getXhr(),S=this.currXhrId++,x=this.pendingRequests[S]={xhr:O};O.open("GET",this.url),O.withCredentials=this.withCredentials;for(const L in this.httpHeaders){const c=this.httpHeaders[L];typeof c>"u"||O.setRequestHeader(L,c)}return this.isHttp&&"begin"in E&&"end"in E?(O.setRequestHeader("Range",`bytes=${E.begin}-${E.end-1}`),x.expectedStatus=A):x.expectedStatus=g,O.responseType="arraybuffer",E.onError&&(O.onerror=function(L){E.onError(O.status)}),O.onreadystatechange=this.onStateChange.bind(this,S),O.onprogress=this.onProgress.bind(this,S),x.onHeadersReceived=E.onHeadersReceived,x.onDone=E.onDone,x.onError=E.onError,x.onProgress=E.onProgress,O.send(null),S}onProgress(E,O){var S;const x=this.pendingRequests[E];x&&((S=x.onProgress)===null||S===void 0||S.call(x,O))}onStateChange(E,O){const S=this.pendingRequests[E];if(!S)return;const x=S.xhr;if(x.readyState>=2&&S.onHeadersReceived&&(S.onHeadersReceived(),delete S.onHeadersReceived),x.readyState!==4||!(E in this.pendingRequests))return;if(delete this.pendingRequests[E],x.status===0&&this.isHttp){var L;(L=S.onError)===null||L===void 0||L.call(S,x.status);return}const c=x.status||g;if(!(c===g&&S.expectedStatus===A)&&c!==S.expectedStatus){var d;(d=S.onError)===null||d===void 0||d.call(S,x.status);return}const a=R(x);if(c===A){const m=x.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(m);S.onDone({begin:parseInt(p[1],10),chunk:a})}else if(a)S.onDone({begin:0,chunk:a});else{var s;(s=S.onError)===null||s===void 0||s.call(S,x.status)}}getRequestXhr(E){return this.pendingRequests[E].xhr}isPendingRequest(E){return E in this.pendingRequests}abortRequest(E){const O=this.pendingRequests[E].xhr;delete this.pendingRequests[E],O.abort()}}class y{constructor(E){this._source=E,this._manager=new C(E.url,{httpHeaders:E.httpHeaders,withCredentials:E.withCredentials}),this._rangeChunkSize=E.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(E){const O=this._rangeRequestReaders.indexOf(E);O>=0&&this._rangeRequestReaders.splice(O,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new v(this._manager,this._source),this._fullRequestReader}getRangeReader(E,O){const S=new I(this._manager,E,O);return S.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(S),S}cancelAllRequests(E){var O;(O=this._fullRequestReader)===null||O===void 0||O.cancel(E);for(const S of this._rangeRequestReaders.slice(0))S.cancel(E)}}i.PDFNetworkStream=y;class v{constructor(E,O){this._manager=E;const S={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=O.url,this._fullRequestId=E.requestFull(S),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=O.disableRange||!1,this._contentLength=O.length,this._rangeChunkSize=O.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const E=this._fullRequestId,O=this._manager.getRequestXhr(E),S=c=>O.getResponseHeader(c),{allowRangeRequests:x,suggestedLength:L}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});x&&(this._isRangeSupported=!0),this._contentLength=L||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(S),this._isRangeSupported&&this._manager.abortRequest(E),this._headersReceivedCapability.resolve()}_onDone(E){if(E&&(this._requests.length>0?this._requests.shift().resolve({value:E.chunk,done:!1}):this._cachedChunks.push(E.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(E){this._storedError=(0,o.createResponseStatusError)(E,this._url),this._headersReceivedCapability.reject(this._storedError);for(const O of this._requests)O.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(E){var O;(O=this.onProgress)===null||O===void 0||O.call(this,{loaded:E.loaded,total:E.lengthComputable?E.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const E=(0,n.createPromiseCapability)();return this._requests.push(E),E.promise}cancel(E){this._done=!0,this._headersReceivedCapability.reject(E);for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I{constructor(E,O,S){this._manager=E;const x={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._requestId=E.requestRange(O,S,x),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var E;(E=this.onClosed)===null||E===void 0||E.call(this,this)}_onDone(E){const O=E.chunk;this._requests.length>0?this._requests.shift().resolve({value:O,done:!1}):this._queuedChunk=O,this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(E){this._storedError=(0,o.createResponseStatusError)(E,this._url);for(const O of this._requests)O.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(E){if(!this.isStreamingSupported){var O;(O=this.onProgress)===null||O===void 0||O.call(this,{loaded:E.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const O=this._queuedChunk;return this._queuedChunk=null,{value:O,done:!1}}if(this._done)return{value:void 0,done:!0};const E=(0,n.createPromiseCapability)();return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(k,i,t)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFFetchStream=void 0;var n=t(1),o=t(158);function g(v,I,u){return{method:"GET",headers:v,signal:u.signal,mode:"cors",credentials:I?"include":"same-origin",redirect:"follow"}}function A(v){const I=new Headers;for(const u in v){const E=v[u];typeof E>"u"||I.append(u,E)}return I}class R{constructor(I){this.source=I,this.isHttp=/^https?:/i.test(I.url),this.httpHeaders=this.isHttp&&I.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var I,u;return(I=(u=this._fullRequestReader)===null||u===void 0?void 0:u._loaded)!==null&&I!==void 0?I:0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new C(this),this._fullRequestReader}getRangeReader(I,u){if(u<=this._progressiveDataLength)return null;const E=new y(this,I,u);return this._rangeRequestReaders.push(E),E}cancelAllRequests(I){this._fullRequestReader&&this._fullRequestReader.cancel(I);for(const u of this._rangeRequestReaders.slice(0))u.cancel(I)}}i.PDFFetchStream=R;class C{constructor(I){this._stream=I,this._reader=null,this._loaded=0,this._filename=null;const u=I.source;this._withCredentials=u.withCredentials||!1,this._contentLength=u.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=u.disableRange||!1,this._rangeChunkSize=u.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!u.disableStream,this._isRangeSupported=!u.disableRange,this._headers=A(this._stream.httpHeaders);const E=u.url;fetch(E,g(this._headers,this._withCredentials,this._abortController)).then(O=>{if(!(0,o.validateResponseStatus)(O.status))throw(0,o.createResponseStatusError)(O.status,E);this._reader=O.body.getReader(),this._headersCapability.resolve();const S=c=>O.headers.get(c),{allowRangeRequests:x,suggestedLength:L}=(0,o.validateRangeRequestCapabilities)({getResponseHeader:S,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=x,this._contentLength=L||this._contentLength,this._filename=(0,o.extractFilenameFromHeader)(S),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:I,done:u}=await this._reader.read();return u?{value:I,done:u}:(this._loaded+=I.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(I).buffer,done:!1})}cancel(I){this._reader&&this._reader.cancel(I),this._abortController.abort()}}class y{constructor(I,u,E){this._stream=I,this._reader=null,this._loaded=0;const O=I.source;this._withCredentials=O.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!O.disableStream,this._abortController=new AbortController,this._headers=A(this._stream.httpHeaders),this._headers.append("Range",`bytes=${u}-${E-1}`);const S=O.url;fetch(S,g(this._headers,this._withCredentials,this._abortController)).then(x=>{if(!(0,o.validateResponseStatus)(x.status))throw(0,o.createResponseStatusError)(x.status,S);this._readCapability.resolve(),this._reader=x.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:I,done:u}=await this._reader.read();return u?{value:I,done:u}:(this._loaded+=I.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(I).buffer,done:!1})}cancel(I){this._reader&&this._reader.cancel(I),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(k){var i=__webpack_module_cache__[k];if(i!==void 0)return i.exports;var t=__webpack_module_cache__[k]={exports:{}};return __webpack_modules__[k](t,t.exports,__w_pdfjs_require__),t.exports}var __webpack_exports__={};return(()=>{var k=__webpack_exports__;Object.defineProperty(k,"__esModule",{value:!0}),Object.defineProperty(k,"AnnotationEditorLayer",{enumerable:!0,get:function(){return o.AnnotationEditorLayer}}),Object.defineProperty(k,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return i.AnnotationEditorParamsType}}),Object.defineProperty(k,"AnnotationEditorType",{enumerable:!0,get:function(){return i.AnnotationEditorType}}),Object.defineProperty(k,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return g.AnnotationEditorUIManager}}),Object.defineProperty(k,"AnnotationLayer",{enumerable:!0,get:function(){return A.AnnotationLayer}}),Object.defineProperty(k,"AnnotationMode",{enumerable:!0,get:function(){return i.AnnotationMode}}),Object.defineProperty(k,"CMapCompressionType",{enumerable:!0,get:function(){return i.CMapCompressionType}}),Object.defineProperty(k,"GlobalWorkerOptions",{enumerable:!0,get:function(){return R.GlobalWorkerOptions}}),Object.defineProperty(k,"InvalidPDFException",{enumerable:!0,get:function(){return i.InvalidPDFException}}),Object.defineProperty(k,"LoopbackPort",{enumerable:!0,get:function(){return t.LoopbackPort}}),Object.defineProperty(k,"MissingPDFException",{enumerable:!0,get:function(){return i.MissingPDFException}}),Object.defineProperty(k,"OPS",{enumerable:!0,get:function(){return i.OPS}}),Object.defineProperty(k,"PDFDataRangeTransport",{enumerable:!0,get:function(){return t.PDFDataRangeTransport}}),Object.defineProperty(k,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(k,"PDFWorker",{enumerable:!0,get:function(){return t.PDFWorker}}),Object.defineProperty(k,"PasswordResponses",{enumerable:!0,get:function(){return i.PasswordResponses}}),Object.defineProperty(k,"PermissionFlag",{enumerable:!0,get:function(){return i.PermissionFlag}}),Object.defineProperty(k,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(k,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(k,"SVGGraphics",{enumerable:!0,get:function(){return v.SVGGraphics}}),Object.defineProperty(k,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return i.UNSUPPORTED_FEATURES}}),Object.defineProperty(k,"UnexpectedResponseException",{enumerable:!0,get:function(){return i.UnexpectedResponseException}}),Object.defineProperty(k,"Util",{enumerable:!0,get:function(){return i.Util}}),Object.defineProperty(k,"VerbosityLevel",{enumerable:!0,get:function(){return i.VerbosityLevel}}),Object.defineProperty(k,"XfaLayer",{enumerable:!0,get:function(){return I.XfaLayer}}),Object.defineProperty(k,"build",{enumerable:!0,get:function(){return t.build}}),Object.defineProperty(k,"createPromiseCapability",{enumerable:!0,get:function(){return i.createPromiseCapability}}),Object.defineProperty(k,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return i.createValidAbsoluteUrl}}),Object.defineProperty(k,"getDocument",{enumerable:!0,get:function(){return t.getDocument}}),Object.defineProperty(k,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(k,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(k,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(k,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(k,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(k,"renderTextLayer",{enumerable:!0,get:function(){return y.renderTextLayer}}),Object.defineProperty(k,"shadow",{enumerable:!0,get:function(){return i.shadow}}),Object.defineProperty(k,"version",{enumerable:!0,get:function(){return t.version}});var i=__w_pdfjs_require__(1),t=__w_pdfjs_require__(129),n=__w_pdfjs_require__(133),o=__w_pdfjs_require__(147),g=__w_pdfjs_require__(132),A=__w_pdfjs_require__(152),R=__w_pdfjs_require__(140),C=__w_pdfjs_require__(3),y=__w_pdfjs_require__(155),v=__w_pdfjs_require__(156),I=__w_pdfjs_require__(154);if(C.isNodeJS){const{PDFNodeStream:u}=__w_pdfjs_require__(157);(0,t.setPDFNetworkStreamFactory)(E=>new u(E))}else{const{PDFNetworkStream:u}=__w_pdfjs_require__(160),{PDFFetchStream:E}=__w_pdfjs_require__(161);(0,t.setPDFNetworkStreamFactory)(O=>(0,n.isValidFetchUrl)(O.url)?new E(O):new u(O))}})(),__webpack_exports__})())}(pdf$2)),pdf$2.exports}var pdfExports=requirePdf();const pdf=getDefaultExportFromCjs(pdfExports),pdf$1=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]);export{pdf$1 as p};
